import{r as P,ao as B,b as r,a$ as g,j as d}from"./index.559c1fcf.js";import{k as Q}from"./ProductApi.fe19781a.js";import{F as l}from"./index.d3e6f2d0.js";import{B as k}from"./button.c49f6243.js";import{C as y}from"./index.4fb68f20.js";import{S as F}from"./index.57a1466e.js";import"./apiConfig.819e96ae.js";import"./axios.0a901153.js";import"./config.d6ac9ea8.js";import"./render.6e9f9fbc.js";import"./useNotification.530e6546.js";import"./useMutation.esm.3622c9ad.js";import"./utils.esm.f9fc2da8.js";import"./useInfiniteQuery.esm.273cbf80.js";import"./useQuery.esm.484a4dde.js";import"./index.02299b94.js";import"./motion.c94e2116.js";import"./isEqual.5b0c1f76.js";import"./useMergedState.e59004d6.js";import"./collapse.4ef0eee8.js";import"./LoadingOutlined.65af6f9d.js";import"./row.1adc50e8.js";import"./useFlexGapSupport.39a8fd32.js";import"./responsiveObserve.0df24820.js";import"./Compact.e0a86bbb.js";import"./Dropdown.40e49efe.js";import"./Overflow.0ae650b7.js";import"./index.800256bd.js";import"./PlusOutlined.c65b7533.js";import"./pickAttrs.09e8e693.js";import"./statusUtils.8e955008.js";import"./CheckOutlined.61030fcd.js";import"./DownOutlined.218b67e6.js";import"./SearchOutlined.1243ca95.js";import"./PurePanel.4b452415.js";const q="_electronics_title_hrg0r_1",A="_close_electro_hrg0r_11",E="_export_title_hrg0r_17",G={electronics_title:q,close_electro:A,export_title:E},ye=({features:m,selected_features:p,editID:_})=>{const[u,C]=P.exports.useState({product_features:p}),S=B(),{isLoading:h,mutateAsync:x}=Q(),[j]=l.useForm(),w=i=>{let e={product_id:_,...u};x(e,{onSuccess:()=>S.invalidateQueries(["single_product",String(_)])})},L=i=>{console.log("Failed:",i)},O=(i,e)=>{},f=(i,e)=>{e&&C({product_features:{...u.product_features,[e.feature]:{feature_type:e.type,value:"Feature updated",variant_id:e.value}}})},V=()=>{let i=m.filter(e=>e.feature_type=="G");return r("div",{children:i.map((e,s)=>d("div",{children:[r("h3",{children:e.description}),r(y,{children:Object.values(e.subfeatures).map((t,a)=>{var n;return r("div",{children:r(l.Item,{name:t==null?void 0:t.description,label:t==null?void 0:t.description,children:r(F,{showSearch:!0,defaultValue:(n=p[t==null?void 0:t.feature_id])==null?void 0:n.variant_id,onChange:f,optionFilterProp:"children",filterOption:(o,c)=>{var v;return((v=c==null?void 0:c.label)!=null?v:"").toLowerCase().includes(o.toLowerCase())},options:t.variants?Object.values(t.variants).map(o=>({label:o.variant,value:o.variant_id,feature:t.feature_id,type:o.feature_type})):[]})})},a)})})]},s))},"this is features")},I=()=>{let i=m.filter((e,s)=>e.feature_type=="S");return r(y,{children:i.map((e,s)=>{var t;return r("div",{children:r(l.Item,{name:e==null?void 0:e.internal_name,label:e==null?void 0:e.internal_name,children:r(F,{onChange:f,showSearch:!0,optionFilterProp:"children",defaultValue:(t=p[e==null?void 0:e.feature_id])==null?void 0:t.variant_id,filterOption:(a,n)=>{var o;return((o=n==null?void 0:n.label)!=null?o:"").toLowerCase().includes(a.toLowerCase())},options:Object.values(e.variants).map(a=>({label:a.variant,value:a.variant_id,feature:e.feature_id,type:a.feature_type}))})})},s)})})};return h?r(g,{}):d("div",{className:G.feature_container,children:[h?r(g,{}):"",d(l,{form:j,name:"features",onFinish:w,onFinishFailed:L,autoComplete:"off",onValuesChange:O,children:[r(l.Item,{style:{float:"right"},children:r(k,{type:"primary",htmlType:"submit",children:"Save changes"})}),r("br",{}),r("br",{}),I(),r("div",{children:V()})]})]})};export{ye as default};
