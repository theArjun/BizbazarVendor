import{r as a,_ as E,j as F,v as j,f as G,b as I,W as L,a5 as Q,F as W,a6 as q,L as M,V}from"./index.2fea9b70.js";var z=a.exports.forwardRef(function(e,y){var C=e.prefixCls,s=e.style,v=e.className,u=e.duration,l=u===void 0?4.5:u,N=e.eventKey,R=e.content,p=e.closable,$=e.closeIcon,h=$===void 0?"x":$,k=e.props,S=e.onClick,d=e.onNoticeClose,A=a.exports.useState(!1),_=E(A,2),f=_[0],x=_[1],g=function(){d(N)};a.exports.useEffect(function(){if(!f&&l>0){var c=setTimeout(function(){g()},l*1e3);return function(){clearTimeout(c)}}},[l,f]);var m="".concat(C,"-notice");return F("div",{...k,ref:y,className:j(m,v,G({},"".concat(m,"-closable"),p)),style:s,onMouseEnter:function(){x(!0)},onMouseLeave:function(){x(!1)},onClick:S,children:[I("div",{className:"".concat(m,"-content"),children:R}),p&&I("a",{tabIndex:0,className:"".concat(m,"-close"),onClick:function(t){t.preventDefault(),t.stopPropagation(),g()},children:h})]})});const B=z;var J=a.exports.forwardRef(function(e,y){var C=e.prefixCls,s=C===void 0?"rc-notification":C,v=e.container,u=e.motion,l=e.maxCount,N=e.className,R=e.style,p=e.onAllRemoved,$=a.exports.useState([]),h=E($,2),k=h[0],S=h[1],d=function(n){var i,o=k.find(function(r){return r.key===n});o==null||(i=o.onClose)===null||i===void 0||i.call(o),S(function(r){return r.filter(function(b){return b.key!==n})})};a.exports.useImperativeHandle(y,function(){return{open:function(n){S(function(i){var o=L(i),r=o.findIndex(function(b){return b.key===n.key});return r>=0?o[r]=n:o.push(n),l>0&&o.length>l&&(o=o.slice(-l)),o})},close:function(n){d(n)},destroy:function(){S([])}}});var A=a.exports.useState({}),_=E(A,2),f=_[0],x=_[1];a.exports.useEffect(function(){var t={};k.forEach(function(n){var i=n.placement,o=i===void 0?"topRight":i;o&&(t[o]=t[o]||[],t[o].push(n))}),Object.keys(f).forEach(function(n){t[n]=t[n]||[]}),x(t)},[k]);var g=function(n){x(function(i){var o=M({},i),r=o[n]||[];return r.length||delete o[n],o})},m=a.exports.useRef(!1);if(a.exports.useEffect(function(){Object.keys(f).length>0?m.current=!0:m.current&&(p==null||p(),m.current=!1)},[f]),!v)return null;var c=Object.keys(f);return Q.exports.createPortal(I(W,{children:c.map(function(t){var n=f[t],i=n.map(function(r){return{config:r,key:r.key}}),o=typeof u=="function"?u(t):u;return I(q,{className:j(s,"".concat(s,"-").concat(t),N==null?void 0:N(t)),style:R==null?void 0:R(t),keys:i,motionAppear:!0,...o,onAllRemoved:function(){g(t)},children:function(r,b){var P=r.config,O=r.className,T=r.style,w=P.key,H=P.className,D=P.style;return a.exports.createElement(B,{...P,ref:b,prefixCls:s,className:j(O,H),style:M(M({},T),D),key:w,eventKey:w,onNoticeClose:d})}},t)})}),v)}),U=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],X=function(){return document.body},K=0;function Y(){for(var e={},y=arguments.length,C=new Array(y),s=0;s<y;s++)C[s]=arguments[s];return C.forEach(function(v){v&&Object.keys(v).forEach(function(u){var l=v[u];l!==void 0&&(e[u]=l)})}),e}function ee(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=e.getContainer,C=y===void 0?X:y,s=e.motion,v=e.prefixCls,u=e.maxCount,l=e.className,N=e.style,R=e.onAllRemoved,p=V(e,U),$=a.exports.useState(),h=E($,2),k=h[0],S=h[1],d=a.exports.useRef(),A=I(J,{container:k,ref:d,prefixCls:v,motion:s,maxCount:u,className:l,style:N,onAllRemoved:R}),_=a.exports.useState([]),f=E(_,2),x=f[0],g=f[1],m=a.exports.useMemo(function(){return{open:function(t){var n=Y(p,t);(n.key===null||n.key===void 0)&&(n.key="rc-notification-".concat(K),K+=1),g(function(i){return[].concat(L(i),[{type:"open",config:n}])})},close:function(t){g(function(n){return[].concat(L(n),[{type:"close",key:t}])})},destroy:function(){g(function(t){return[].concat(L(t),[{type:"destroy"}])})}}},[]);return a.exports.useEffect(function(){S(C())}),a.exports.useEffect(function(){d.current&&x.length&&(x.forEach(function(c){switch(c.type){case"open":d.current.open(c.config);break;case"close":d.current.close(c.key);break;case"destroy":d.current.destroy();break}}),g([]))},[x]),[m,A]}export{B as N,ee as u};
