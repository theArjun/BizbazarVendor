import{r as u,j as f,b as m}from"./index.b239cc55.js";import{M as I,a as L}from"./index.b6374920.js";import{u as G}from"./ReportsApi.c58279c4.js";import{A as N}from"./apiConfig.446075fe.js";import{u as P}from"./useQuery.esm.3c1c4f21.js";import{u as v}from"./useDebounce.d6117fcd.js";import{B as c}from"./Breadcrumb.d9f90a7e.js";import"./apicall.15330b79.js";import"./axios.0a901153.js";import"./config.79883511.js";import"./render.1622182d.js";import"./useNotification.49a3f20c.js";import"./apicall2.6148566f.js";import"./useInfiniteQuery.esm.0432f70d.js";import"./utils.esm.408cb86b.js";import"./dropdown.989042eb.js";import"./RightOutlined.47ed9d6c.js";import"./Dropdown.3bbb202b.js";import"./useMergedState.a28f7e87.js";import"./Overflow.8b34a4db.js";import"./index.282ea7d3.js";import"./motion.0d7a897e.js";import"./isEqual.21fc3aef.js";import"./PurePanel.ffcb695e.js";import"./index.4bbb7811.js";import"./collapse.4a0a3d30.js";import"./button.1e90f6e6.js";import"./Compact.d9f155a2.js";import"./LoadingOutlined.97101298.js";import"./useFlexGapSupport.1cb3c05a.js";import"./DownOutlined.69351dd6.js";const B="_container_122jv_1",T={container:B},q=()=>P({queryKey:["statuses"],queryFn:()=>N.get("statuses")}),F={order_id:"",status_id:"",user_type:"",usergroup_id:"",time_from:"",time_to:""},ht=()=>{const[d,h]=u.exports.useState(F),[g,y]=u.exports.useState(!1),{data:o,isLoading:_,isFetchingNextPage:x,fetchNextPage:b}=G(d),{data:p,isLoading:H}=q(),M=t=>{const e=t.target.scrollTop+t.target.offsetHeight+100>t.target.scrollHeight;y(e)};let j=u.exports.useMemo(()=>{var e;let t=[];return(e=o==null?void 0:o.pages)==null||e.map(s=>{var a,i;(i=Object.values((a=s==null?void 0:s.data)==null?void 0:a.report))==null||i.map(r=>{var n;(n=Object.entries(r))==null||n.map((S,K)=>{S.map((O,A)=>{A===1&&t.push(O)})})})}),t||[]},[o]);const l=()=>{var t;return p?(t=p==null?void 0:p.data)==null?void 0:t.statuses:[]},R=()=>{var e,s,a,i;let t=((a=(s=(e=o==null?void 0:o.pages)==null?void 0:e.at(-1))==null?void 0:s.data)==null?void 0:a.usergroups)||{};return(i=Object.values(t))==null?void 0:i.map((r,n)=>({label:r==null?void 0:r.usergroup,value:r==null?void 0:r.usergroup_id}))};return v(()=>{!g||b()},300,[g]),f("div",{className:T.container,children:[f(c,{children:[m(c.Item,{children:"Reports"}),m(c.Item,{children:"Monthly order reports"})]}),m(I,{status:l(),userGroup:R(),params:d,setParams:h}),m(L,{handleScroll:M,data:j,loading:_||x,status:l()})]})};export{ht as default};
