import{r as a,j as m,X as A,b as o,v as G}from"./index.774ea3ea.js";import{x as j,y as W,z as k}from"./index.ed194364.js";import{a as I}from"./apicall.886edec7.js";import{B as _}from"./Breadcrumb.97460a59.js";import{B as O}from"./button.1c6eda25.js";import{m as T}from"./index.5b8b5984.js";import"./axios.0a901153.js";import"./config.54eb1656.js";import"./render.66f9535e.js";import"./useNotification.934e0e3b.js";import"./dropdown.adcd444c.js";import"./RightOutlined.e389cfa8.js";import"./Dropdown.9bafc5f9.js";import"./useMergedState.18b5b371.js";import"./Overflow.bc908490.js";import"./index.40d7e5d1.js";import"./motion.300408ad.js";import"./isEqual.4659e5de.js";import"./PurePanel.f27248d0.js";import"./index.26751f43.js";import"./collapse.bedc836d.js";import"./Compact.c162d62d.js";import"./useFlexGapSupport.f6cd5e9f.js";import"./DownOutlined.719ce519.js";import"./LoadingOutlined.732e1375.js";const $="_tabWrapper_8bw5q_1",z="_tab_8bw5q_1",F="_bgColor_8bw5q_33",J="_container_8bw5q_51",M="_tabcontain_8bw5q_69",V="_breadcumb_8bw5q_75",r={tabWrapper:$,tab:z,bgColor:F,container:J,tabcontain:M,breadcumb:V};function gt(){const[u,w]=a.exports.useState("General"),[b,x]=a.exports.useState([]),[g,y]=a.exports.useState([]),[c,v]=a.exports.useState(""),[N,p]=a.exports.useState(!1),[i,S]=a.exports.useState({zone:"catalog",name:"",detailed_description:"",short_description:"",from_date:0,to_date:0,priority:0,stop_other_rules:"N",status:"A"}),[f,B]=a.exports.useState({set:"all",set_value:1}),D=()=>{switch(u){case"General":return o(k,{image:c,setImage:v,generalData:i,setGeneralData:S});case"Conditions":return o(W,{conditions:g,setConditions:y,conditionValues:f,setConditionValues:B});default:return o(j,{bonuses:b,setBonuses:x})}},P=async()=>{if(i.name){p(!0);const t=new FormData;let e={promo_main_image_data:{0:{pair_id:"",type:"M",object_id:"0",image_alt:""}},file_promo_main_image_icon:{0:"promo_main"},type_promo_main_image_icon:{0:"local"},is_high_res_promo_main_image_icon:{0:"N"}},C=g.reduce((n,l,d)=>(n[d+1]={...l},n),{}),q=b.reduce((n,l,d)=>(n[d]={...l},n),{}),s={promotion_id:0,promotion_data:{...i,from_date:h(i.from_date),to_date:h(i.to_date),bonuses:{...q},conditions:{...f,conditions:{...C}}}};c&&(t.append("file",c),s={...s,...e}),t.append("promotion_data",JSON.stringify(s)),await I({url:"Promotions",method:"post",data:t,headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":!0}})&&p(!1),p(!1)}else T.error("Name is necessary to create a promotion.")},h=t=>{if(t){let e=t.split("-");return`${e[2]}/${e[1]}/${e[0]}`}};return m(A.Fragment,{children:[m("div",{className:r.breadcumb,children:[m(_,{children:[o(_.Item,{children:"Marketing"}),o(_.Item,{children:o("a",{href:"",children:"Add Catalog Promotion"})})]}),o(O,{loading:N,onClick:P,type:"primary",children:"Create promotion"})]}),m("div",{className:r.container,children:[o("div",{className:r.tabWrapper,children:["General","Conditions","Bonuses"].map((t,e)=>o("div",{className:G(r.tab,t===u?r.bgColor:null),onClick:()=>w(t),children:t},e))}),o("div",{className:r.tabcontain,children:D()})]})]})}export{gt as default};
