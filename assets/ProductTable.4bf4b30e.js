import{r as h,ao as j,a as K,aU as Q,j as a,b as o}from"./index.0eae6df2.js";import{j as H,k as z,a as U}from"./index.esm.24474ea7.js";import{h as V,i as X,j as J}from"./ProductApi.1a51d991.js";import{T as d}from"./Table.c3ea0e52.js";import{B as W}from"./button.bb92e4e7.js";import{I as G}from"./index.d5e41f1d.js";import{D as v,S as Y}from"./dropdown.04f8b523.js";import{M as Z}from"./index.faab0a1d.js";import{T as s}from"./index.d9a05769.js";import"./apiConfig.422f7f8e.js";import"./axios.0a901153.js";import"./config.a608364a.js";import"./render.36f71972.js";import"./useNotification.b0fd12ef.js";import"./useMutation.esm.b9a3c183.js";import"./utils.esm.9d23a50b.js";import"./useInfiniteQuery.esm.39b60b71.js";import"./useQuery.esm.a226e4a2.js";import"./motion.25de7d91.js";import"./isEqual.7557051f.js";import"./useMergedState.e128dcb1.js";import"./pickAttrs.8c22c2db.js";import"./styleChecker.c2755425.js";import"./index.00b7436e.js";import"./css.d6e3059f.js";import"./index.c17da8cc.js";import"./Overflow.0bb1c80c.js";import"./statusUtils.bdd687b0.js";import"./CheckOutlined.aebd02a2.js";import"./DownOutlined.0d88a6a7.js";import"./LoadingOutlined.8c764613.js";import"./SearchOutlined.83cc36da.js";import"./PurePanel.6b30b4ea.js";import"./Compact.394e1fff.js";import"./Pagination.e850c34f.js";import"./LeftOutlined.3acbf618.js";import"./RightOutlined.44374471.js";import"./useForceUpdate.36181d63.js";import"./responsiveObserve.b22e885b.js";import"./index.ae11ed19.js";import"./index.db80b566.js";import"./index.ed0030b1.js";import"./index.7079f3c0.js";import"./collapse.d7e28f1d.js";import"./index.e0155dc4.js";import"./TextArea.79f23aac.js";import"./EyeOutlined.e2533ce1.js";import"./index.a53e5976.js";import"./index.bbe2afa4.js";import"./Dropdown.a44dcf86.js";import"./useFlexGapSupport.26f67e3e.js";const $="_product_info_1tgvq_1",ee="_product_name_1tgvq_9",te="_icons_1tgvq_19",oe="_openDelete_1tgvq_51",re="_selectBar_1tgvq_57",c={product_info:$,product_name:ee,icons:te,openDelete:oe,selectBar:re},{confirm:ie}=Z,ot=({loading:S,handleScroll:l,setSortBy:k,products:b})=>{const[n,f]=h.exports.useState(""),[u,p]=h.exports.useState([]),{mutate:C,isLoading:x}=V(),{mutate:D,isLoading:I}=X(),{mutate:E,isLoading:N}=J(),m=j(),_=K(),A=Q();h.exports.useEffect(()=>{var t;return(t=document.querySelector("#product > div > div.ant-table-body"))==null||t.addEventListener("scroll",l),()=>{var e;(e=document.querySelector("#product > div > div.ant-table-body"))==null||e.removeEventListener("scroll",l)}},[l]);function L(t,e="",r){ie({title:t,content:e,async onOk(){try{C(r,{onSuccess:i=>{m.invalidateQueries(["products"])}})}catch{return console.log("Oops errors!")}},onCancel(){}})}const R=async t=>{let e={product_ids:{}};t==null||t.map((r,i)=>{e.product_ids[i]=r}),D(e,{onSuccess:r=>{m.invalidateQueries(["products"])}})},q=async(t,e)=>{f(t),window.localstorage.setItem("productRowId",JSON.stringify(t)),e==="detail"&&_("products")},g=(t,e)=>{E({id:t,status:e},{onSuccess:r=>{m.invalidateQueries(["products"])}})},y=t=>{switch(t){case"H":return o(s,{color:"purple",children:"Hidden"});case"A":return o(s,{color:"green",children:"Active"});case"D":return o(s,{color:"orange",children:"Disabled"});case"R":return o(s,{color:"red",children:"Requires Approval"});case"X":return o(s,{color:"magenta",children:"Disapproved"});default:return"Attention required"}},w=[{key:"1",label:o("div",{onClick:()=>g(n,"A"),children:"Active"})},{key:"2",label:o("div",{onClick:()=>g(n,"D"),children:"Disabled"})},{key:"3",label:o("div",{onClick:()=>g(n,"H"),children:"Hidden"})}],O=[{key:"1",label:a("a",{onClick:()=>_("../products/"+n),children:["Edit ",o(H,{})]})},{key:"2",label:a("a",{rel:"noopener noreferrer",href:"#",className:c.action_items,onClick:()=>L("Are you sure to delete?","",n),children:["Delete",o(z,{})]})}],P=[{title:"Name/Code",dataIndex:["product_id","product","product_code","main_pair"],data:"data",key:"product",render:(t,e)=>{var r;return a("div",{className:c.product_info,children:[o(G,{width:70,src:e.main_pair?e.main_pair.detailed.image_path:"",alt:""}),a("div",{className:c.product_name,children:[o("a",{onClick:()=>_("../products/"+(e==null?void 0:e.product_id)),children:o("strong",{children:((r=e.product)==null?void 0:r.length)>15?e.product.substring(0,15)+"...":e.product})}),o("small",{children:e.product_code})]})]})},sorter:(t,e)=>{}},{title:"Price",dataIndex:"price",key:"price",sorter:(t,e)=>{},render:t=>o("p",{children:parseFloat(t).toFixed(2)})},{title:"Quantity",dataIndex:"amount",key:"amount",sorter:(t,e)=>{}},{title:"Action",key:"action",dataIndex:["product_id"],render:t=>o("div",{className:c.product_action,onClick:()=>q(t),children:o(v,{menu:{items:O},placement:"bottom",arrow:!0,trigger:["click"],children:o(U,{size:20,className:c.icons})})})},{title:"Status",key:"status",dataIndex:["status","product_id"],defaultFilteredValue:"Requires Approval",render:(t,e)=>o("div",{children:e.status=="R"||e.status=="X"?y(e.status):o(v,{menu:{items:w},children:o(Y,{onMouseOver:()=>f(e.product_id),children:y(e.status)})})})}],T=t=>{p(t)},B=u.length>0,F={selectedRowKeys:u,onChange:T,selections:[d.SELECTION_ALL,d.SELECTION_INVERT,d.SELECTION_NONE,{key:"odd",text:"Select Odd Row",onSelect:t=>{let e=[];e=t.filter((r,i)=>i%2===0),p(e)}},{key:"even",text:"Select Even Row",onSelect:t=>{let e=[];e=t.filter((r,i)=>i%2!==0),p(e)}}]};function M(t,e,r,i){k(r)}return a("div",{children:[o("div",{style:{backgroundColor:"white",padding:"10px"},children:o(W,{type:"primary",onClick:()=>R(u),disabled:!B,children:"Delete"})}),o(d,{id:"product",rowKey:"product_id",loading:S||x||I||N,rowSelection:F,columns:P,dataSource:b,pagination:!1,onChange:M,scroll:{y:A.height>670?400:200,x:1e3}})]})};export{ot as default};
