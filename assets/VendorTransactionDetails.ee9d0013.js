import{r as d,b as e,j as n,aU as k}from"./index.774ea3ea.js";import{u as T}from"./useDebounce.1afc85d0.js";import{C as I}from"./index.debb8753.js";import{I as D}from"./index.39e4b2c8.js";import{D as C}from"./index.bcd0b5f4.js";import{l as N,C as P}from"./index.5c6a01cc.js";import{T as b}from"./Table.41afa7f4.js";import{B as x}from"./button.1c6eda25.js";import{b as V}from"./ReportsApi.1ad700b6.js";import{B as y}from"./Breadcrumb.97460a59.js";import"./Dropdown.9bafc5f9.js";import"./useMergedState.18b5b371.js";import"./Overflow.bc908490.js";import"./index.40d7e5d1.js";import"./motion.300408ad.js";import"./isEqual.4659e5de.js";import"./PlusOutlined.4da0bfe2.js";import"./index.0d78aa55.js";import"./Compact.c162d62d.js";import"./TextArea.119a5545.js";import"./statusUtils.d5af00d6.js";import"./EyeOutlined.700862bb.js";import"./SearchOutlined.16cec939.js";import"./PurePanel.f27248d0.js";import"./index.26751f43.js";import"./pickAttrs.087993c3.js";import"./styleChecker.bcd3295e.js";import"./css.d6e3059f.js";import"./index.f4539c3d.js";import"./CheckOutlined.70cf6153.js";import"./DownOutlined.719ce519.js";import"./LoadingOutlined.732e1375.js";import"./Pagination.43e6bda7.js";import"./LeftOutlined.de95bfb5.js";import"./RightOutlined.e389cfa8.js";import"./useForceUpdate.0ca03680.js";import"./responsiveObserve.84e4b503.js";import"./index.23d5fe28.js";import"./index.15a5cbb2.js";import"./dropdown.adcd444c.js";import"./collapse.bedc836d.js";import"./useFlexGapSupport.f6cd5e9f.js";import"./index.4645b33d.js";import"./apicall.886edec7.js";import"./axios.0a901153.js";import"./config.54eb1656.js";import"./render.66f9535e.js";import"./useNotification.934e0e3b.js";import"./apicall2.e45f6879.js";import"./useInfiniteQuery.esm.23b2a444.js";import"./useQuery.esm.ae6f238b.js";import"./utils.esm.82fab7d4.js";const $="_container_1qg89_1",R={container:$},B="_container_178h8_1",L="_search_inputs_178h8_9",A="_price_container_178h8_21",E="_search_btn_178h8_55",M="_form_178h8_63",j="_formcolumn_178h8_83",q="_dropdownbutton_178h8_101",z="_icon_178h8_109",H="_flex_178h8_135",K="_datepicker_178h8_147",W="_date_178h8_147",F="_span_178h8_163",w={container:B,search_inputs:L,price_container:A,search_btn:E,form:M,formcolumn:j,dropdownbutton:q,icon:z,flex:H,datepicker:K,date:W,span:F};const{RangePicker:G}=C,U=({params:a,setParams:c})=>{const[s,m]=d.exports.useState("");T(()=>{let o={...a};o.vendor=s,c(o)},500,[s]);const l=o=>{var p,_,u,t,i,h;let r={...a};if(o){let f=new Date((p=o[0])==null?void 0:p.$y,(_=o[0])==null?void 0:_.$M,(u=o[0])==null?void 0:u.$D).getTime()/1e3,v=new Date((t=o[1])==null?void 0:t.$y,(i=o[1])==null?void 0:i.$M,(h=o[1])==null?void 0:h.$D).getTime()/1e3;r.time_from=f||"",r.time_to=v||""}else r.time_from="",r.time_to="";c(r)};return e("div",{className:w.container,id:"changeHere",children:e(I,{children:n("div",{className:w.formcolumn,children:[n("label",{children:["Vendor",e(D,{onChange:o=>m(o.target.value)})]}),n("label",{children:["Payout Date ",e("br",{}),e("div",{style:{display:"flex"},children:e(G,{style:{minWidth:"250px"},onChange:o=>l(o)})})]})]})})})},J="_product_info_sw05v_1",O="_product_name_sw05v_9",Q="_icons_sw05v_19",X="_order_status_sw05v_51",Y="_gross_total_sw05v_59",Z="_openSpinner_sw05v_67",tt="_closeSpinner_sw05v_75",ot="_positionabsolute_sw05v_83",et="_print_sw05v_95",nt="_margintop_sw05v_103",g={product_info:J,product_name:O,icons:Q,order_status:X,gross_total:Y,openSpinner:Z,closeSpinner:tt,positionabsolute:ot,print:et,margintop:nt},rt=({accountOrderDetails:a,loading:c,handleScroll:s})=>{const[m,l]=d.exports.useState(!1),o=k();d.exports.useEffect(()=>{var t;return(t=document.querySelector("#reportaccount > div > div.ant-table-body"))==null||t.addEventListener("scroll",s),()=>{var i;(i=document.querySelector("#reportaccount > div > div.ant-table-body "))==null||i.removeEventListener("scroll",s)}},[]);const r=d.exports.useRef(),p=[{title:"Vendor",dataIndex:"vendor",key:"vendor"},{title:"Vendor name",dataIndex:"vendor_name",key:"vendor_name"},{title:"Total order amount",dataIndex:"total_order_amount",key:"total_order_amount",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Commission",dataIndex:"commission",key:"commission",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Total shipping",dataIndex:"total_shipping",key:"total_shipping",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Total withdrawal",dataIndex:"total_withdrawal",key:"total_withdrawal",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Total payout addition",dataIndex:"total_payout_addition",key:"total_payout_addition",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Total payout deduction",dataIndex:"total_payout_deduction",key:"total_payout_deduction",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Balance",dataIndex:"balance",key:"balance",render:t=>n("div",{children:["\u0930\u0941",t]})}],_=N.exports.useReactToPrint({content:()=>r.current,onAfterPrint:()=>l(!1)}),u=()=>{l(!0);const t=setTimeout(_,10);return()=>clearTimeout(t)};return n("div",{children:[e(b,{id:"reportaccount",columns:p,rowKey:"company_id",loading:c,dataSource:a,pagination:!1,scroll:{y:o.height>670?500:300,x:1500}}),n("div",{className:g.positionabsolute,children:[e(x,{className:g.print,onClick:u,children:"print"}),e(x,{children:e(P,{filename:"Expense_Table.csv",data:a,className:"btn btn-primary",onClick:()=>{},children:"Export to CSV"})})]}),m&&e("div",{className:g.margintop}),m&&e(b,{id:"reporprintTableaccount1",className:g.printTable,style:{zIndex:-1},columns:p,ref:r,rowKey:"order_id",loading:c,dataSource:a,pagination:!1})]})},it={time_from:"",time_to:"",vendor:""},ro=()=>{const[a,c]=d.exports.useState(it),[s,m]=d.exports.useState(!1),{isLoading:l,data:o,fetchNextPage:r,isFetchingNextPage:p}=V(a);let _=d.exports.useMemo(()=>{var i;let t=[];return(i=o==null?void 0:o.pages)==null||i.map(h=>{var f,v;(v=(f=h==null?void 0:h.data)==null?void 0:f.report)==null||v.map(S=>{t.push(S)})}),t||[]},[o]);const u=t=>{const i=t.target.scrollTop+t.target.offsetHeight+100>t.target.scrollHeight;m(i)};return T(()=>{!s||r()},300,[s]),n("div",{className:R.container,children:[n(y,{children:[e(y.Item,{children:"Reports"}),e(y.Item,{children:"Vendor Transaction Details"})]}),e(U,{params:a,setParams:c}),e(rt,{accountOrderDetails:_,handleScroll:u,loading:l||p})]})};export{ro as default};
