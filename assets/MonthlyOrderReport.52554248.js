import{r as u,j as f,b as m}from"./index.774ea3ea.js";import{M as I,a as L}from"./index.ed194364.js";import{u as G}from"./ReportsApi.1ad700b6.js";import{A as N}from"./apiConfig.2a32373e.js";import{u as P}from"./useQuery.esm.ae6f238b.js";import{u as v}from"./useDebounce.1afc85d0.js";import{B as c}from"./Breadcrumb.97460a59.js";import"./apicall.886edec7.js";import"./axios.0a901153.js";import"./config.54eb1656.js";import"./render.66f9535e.js";import"./useNotification.934e0e3b.js";import"./apicall2.e45f6879.js";import"./useInfiniteQuery.esm.23b2a444.js";import"./utils.esm.82fab7d4.js";import"./dropdown.adcd444c.js";import"./RightOutlined.e389cfa8.js";import"./Dropdown.9bafc5f9.js";import"./useMergedState.18b5b371.js";import"./Overflow.bc908490.js";import"./index.40d7e5d1.js";import"./motion.300408ad.js";import"./isEqual.4659e5de.js";import"./PurePanel.f27248d0.js";import"./index.26751f43.js";import"./collapse.bedc836d.js";import"./button.1c6eda25.js";import"./Compact.c162d62d.js";import"./LoadingOutlined.732e1375.js";import"./useFlexGapSupport.f6cd5e9f.js";import"./DownOutlined.719ce519.js";const B="_container_122jv_1",T={container:B},q=()=>P({queryKey:["statuses"],queryFn:()=>N.get("statuses")}),F={order_id:"",status_id:"",user_type:"",usergroup_id:"",time_from:"",time_to:""},ht=()=>{const[d,h]=u.exports.useState(F),[g,y]=u.exports.useState(!1),{data:o,isLoading:_,isFetchingNextPage:x,fetchNextPage:b}=G(d),{data:p,isLoading:H}=q(),M=t=>{const e=t.target.scrollTop+t.target.offsetHeight+100>t.target.scrollHeight;y(e)};let j=u.exports.useMemo(()=>{var e;let t=[];return(e=o==null?void 0:o.pages)==null||e.map(s=>{var a,i;(i=Object.values((a=s==null?void 0:s.data)==null?void 0:a.report))==null||i.map(r=>{var n;(n=Object.entries(r))==null||n.map((S,K)=>{S.map((O,A)=>{A===1&&t.push(O)})})})}),t||[]},[o]);const l=()=>{var t;return p?(t=p==null?void 0:p.data)==null?void 0:t.statuses:[]},R=()=>{var e,s,a,i;let t=((a=(s=(e=o==null?void 0:o.pages)==null?void 0:e.at(-1))==null?void 0:s.data)==null?void 0:a.usergroups)||{};return(i=Object.values(t))==null?void 0:i.map((r,n)=>({label:r==null?void 0:r.usergroup,value:r==null?void 0:r.usergroup_id}))};return v(()=>{!g||b()},300,[g]),f("div",{className:T.container,children:[f(c,{children:[m(c.Item,{children:"Reports"}),m(c.Item,{children:"Monthly order reports"})]}),m(I,{status:l(),userGroup:R(),params:d,setParams:h}),m(L,{handleScroll:M,data:j,loading:_||x,status:l()})]})};export{ht as default};
