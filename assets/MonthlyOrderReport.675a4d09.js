import{r as u,j as f,b as m}from"./index.559c1fcf.js";import{M as I,a as L}from"./index.cfd97402.js";import{u as G}from"./ReportsApi.9fa071a0.js";import{A as N}from"./apiConfig.819e96ae.js";import{u as P}from"./useQuery.esm.484a4dde.js";import{u as v}from"./useDebounce.34ba1d43.js";import{B as c}from"./Breadcrumb.a0c48c79.js";import"./apicall.a45120ef.js";import"./axios.0a901153.js";import"./config.d6ac9ea8.js";import"./render.6e9f9fbc.js";import"./useNotification.530e6546.js";import"./apicall2.9b40c9fc.js";import"./useInfiniteQuery.esm.273cbf80.js";import"./utils.esm.f9fc2da8.js";import"./dropdown.496de808.js";import"./RightOutlined.6508ce6f.js";import"./Dropdown.40e49efe.js";import"./useMergedState.e59004d6.js";import"./Overflow.0ae650b7.js";import"./index.800256bd.js";import"./motion.c94e2116.js";import"./isEqual.5b0c1f76.js";import"./PurePanel.4b452415.js";import"./index.02299b94.js";import"./collapse.4ef0eee8.js";import"./button.c49f6243.js";import"./Compact.e0a86bbb.js";import"./LoadingOutlined.65af6f9d.js";import"./useFlexGapSupport.39a8fd32.js";import"./DownOutlined.218b67e6.js";const B="_container_122jv_1",T={container:B},q=()=>P({queryKey:["statuses"],queryFn:()=>N.get("statuses")}),F={order_id:"",status_id:"",user_type:"",usergroup_id:"",time_from:"",time_to:""},ht=()=>{const[d,h]=u.exports.useState(F),[g,y]=u.exports.useState(!1),{data:o,isLoading:_,isFetchingNextPage:x,fetchNextPage:b}=G(d),{data:p,isLoading:H}=q(),M=t=>{const e=t.target.scrollTop+t.target.offsetHeight+100>t.target.scrollHeight;y(e)};let j=u.exports.useMemo(()=>{var e;let t=[];return(e=o==null?void 0:o.pages)==null||e.map(s=>{var a,i;(i=Object.values((a=s==null?void 0:s.data)==null?void 0:a.report))==null||i.map(r=>{var n;(n=Object.entries(r))==null||n.map((S,K)=>{S.map((O,A)=>{A===1&&t.push(O)})})})}),t||[]},[o]);const l=()=>{var t;return p?(t=p==null?void 0:p.data)==null?void 0:t.statuses:[]},R=()=>{var e,s,a,i;let t=((a=(s=(e=o==null?void 0:o.pages)==null?void 0:e.at(-1))==null?void 0:s.data)==null?void 0:a.usergroups)||{};return(i=Object.values(t))==null?void 0:i.map((r,n)=>({label:r==null?void 0:r.usergroup,value:r==null?void 0:r.usergroup_id}))};return v(()=>{!g||b()},300,[g]),f("div",{className:T.container,children:[f(c,{children:[m(c.Item,{children:"Reports"}),m(c.Item,{children:"Monthly order reports"})]}),m(I,{status:l(),userGroup:R(),params:d,setParams:h}),m(L,{handleScroll:M,data:j,loading:_||x,status:l()})]})};export{ht as default};
