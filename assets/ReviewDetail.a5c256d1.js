import{r as _,u as A,b as e,a$ as I,b0 as T,j as s,X as D}from"./index.559c1fcf.js";import{s as c}from"./Reviews.module.3fc73c85.js";import{d as P,e as $,f as r}from"./index.esm.267eb871.js";import{a as x}from"./apicall.a45120ef.js";import{T as F}from"./TextArea.8f7e52a8.js";import{T as y}from"./index.978e37f6.js";import{B as C}from"./button.c49f6243.js";import{I as S}from"./index.53d3f337.js";import"./axios.0a901153.js";import"./config.d6ac9ea8.js";import"./render.6e9f9fbc.js";import"./useNotification.530e6546.js";import"./index.800256bd.js";import"./useMergedState.e59004d6.js";import"./statusUtils.8e955008.js";import"./Compact.e0a86bbb.js";import"./index.e42cc673.js";import"./CheckOutlined.61030fcd.js";import"./styleChecker.3de124d5.js";import"./index.02299b94.js";import"./motion.c94e2116.js";import"./isEqual.5b0c1f76.js";import"./LoadingOutlined.65af6f9d.js";import"./EyeOutlined.acaf92f0.js";import"./css.d6e3059f.js";import"./index.38297928.js";import"./pickAttrs.09e8e693.js";import"./LeftOutlined.abb276d5.js";import"./RightOutlined.6508ce6f.js";const ve=()=>{var t;const[i,f]=_.exports.useState(""),[a,d]=_.exports.useState(!1),[p,v]=_.exports.useState(""),[h,u]=_.exports.useState(""),n=A();_.exports.useEffect(()=>{o()},[]);const o=async()=>{var g,w,z,N,b,R;d(!0);let l=await x({url:`ProductReview?product_review_id=${n.id}`});console.log(l),((w=(g=l==null?void 0:l.data)==null?void 0:g.reviews)==null?void 0:w.length)==0&&u(404),l!=null&&l.data?(d(!1),f((z=l==null?void 0:l.data)==null?void 0:z.reviews[n.id]),v((R=(b=(N=l==null?void 0:l.data)==null?void 0:N.reviews[n.id])==null?void 0:b.reply)==null?void 0:R.reply)):(d(!1),f({}))},m=async()=>{let l={product_review_data:{product_review_id:n.id,reply:p}},g=await x({method:"put",url:`ProductReview/${n.id}`,data:l});g!=null&&g.data&&o()};return a?e(I,{}):h?e(T,{status:"404",title:"404",subTitle:"Sorry, Requested review does not found !",extra:e("a",{href:"/",children:"Back Home"})}):s("div",{className:c.container,children:[e(y.Title,{level:3,style:{margin:0},children:`Reviews #${n.id}`}),s("div",{className:c.main_container,children:[s("div",{className:c.review_section,children:[e("div",{className:c.review_description,children:i?e(k,{data:i}):""}),e("div",{className:c.reply_section,children:s("div",{className:c.reply_body,children:[e("div",{className:c.reply_text,children:" Reply:"}),e("div",{className:c.reply_box,children:e(F,{value:p,onChange:l=>v(l.target.value),rows:5})}),e("div",{className:c.reply_btn,children:e(C,{type:"primary",onClick:m,children:(t=i==null?void 0:i.reply)!=null&&t.reply?"Update reply":"Add reply"})})]})})]}),e("div",{className:c.product_section,children:i?e(j,{data:i}):""})]})]})},j=({data:i})=>{var a,d,p,v,h,u,n,o,m,t;const{Text:f}=y;return e("div",{className:c.product_wrapper,children:s("div",{className:c.review_status,children:[s(y.Title,{level:4,style:{margin:0},children:[" ","Review status"]}),s("div",{className:c.review_status,style:(i==null?void 0:i.status)==="A"?{color:"green"}:{color:"red"},children:[" ",(i==null?void 0:i.status)==="A"?"Approved":"Not Approved"]}),s("div",{className:c.product_details,children:[s(y.Title,{level:4,style:{margin:0},children:[" ","Product details"]}),e("div",{className:c.image_container,children:e(S,{width:200,src:(p=(d=(a=i==null?void 0:i.product)==null?void 0:a.main_pair)==null?void 0:d.detailed)==null?void 0:p.image_path})}),s("div",{className:c.product_description,children:[e("a",{href:"#",children:e("b",{children:(v=i==null?void 0:i.product)==null?void 0:v.product})}),s(f,{type:"secondary",children:[" ",e("b",{children:(h=i==null?void 0:i.product)==null?void 0:h.product_code})]}),s("div",{children:["\u0930\u0941",parseFloat((u=i==null?void 0:i.product)==null?void 0:u.price).toFixed(2)]})]})]}),s("div",{className:c.customer_info,children:[s(y.Title,{level:4,style:{margin:0},children:[" ","Customer info"]}),e("div",{className:c.address_and_name,children:`${(n=i==null?void 0:i.user_data)==null?void 0:n.name}, ${(o=i==null?void 0:i.user_data)==null?void 0:o.city}, ${(m=i==null?void 0:i.user_data)==null?void 0:m.country}`}),s("div",{className:c.ip_container,children:["IP address: ",(t=i==null?void 0:i.user_data)==null?void 0:t.ip_address]})]})]})})},k=({data:i})=>{var d,p,v,h,u,n;const f=o=>{switch(o){case"1":return s("div",{children:[e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18}),e(r,{size:18}),e(r,{size:18}),e(r,{size:18})]});case"2":return s("div",{children:[e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18}),e(r,{size:18}),e(r,{size:18})]});case"3":return s("div",{children:[e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18}),e(r,{size:18})]});case"4":return s("div",{children:[e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18})]});case"5":return s("div",{children:[e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18,color:"#ffbd3d"}),e(r,{size:18,color:"#ffbd3d"})]});default:return s("div",{children:[e(r,{size:18}),e(r,{size:18}),e(r,{size:18}),e(r,{size:18}),e(r,{size:18})]})}},a=o=>{const m=new Date(parseInt(o*1e3)),t=m.toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"}),l=m.toLocaleString("en-US",{hour:"2-digit",minute:"numeric"});return t+", "+l};return s(D.Fragment,{children:[s("div",{className:c.ReviewItem,children:[e("div",{children:"Rating:"}),e("div",{children:f(i==null?void 0:i.rating_value)})]}),s("div",{className:c.ReviewItem,children:[e("div",{children:"Date:"}),e("span",{children:a(i==null?void 0:i.product_review_timestamp)})]}),s("div",{className:c.ReviewItem,children:[e("div",{children:"Helpfulness:"}),s("span",{children:[" ",e(P,{})," ",e("span",{style:{color:"green"},children:(d=i==null?void 0:i.helpfulness)==null?void 0:d.vote_up})," ",e($,{}),e("span",{style:{color:"red"},children:(p=i==null?void 0:i.helpfulness)==null?void 0:p.vote_down})," "]})]}),s("div",{className:c.ReviewItem,children:[e("div",{children:"Advantages:"}),e("span",{children:(v=i==null?void 0:i.message)==null?void 0:v.advantages})]}),s("div",{className:c.ReviewItem,children:[e("div",{children:"Disadvantages:"}),e("span",{children:(h=i==null?void 0:i.message)==null?void 0:h.disadvantages})]}),s("div",{className:c.ReviewItem,children:[e("div",{children:"Comment:"}),e("span",{children:(u=i==null?void 0:i.message)==null?void 0:u.comment})]}),s("div",{className:c.ReviewItem,children:[e("div",{children:"Customer photos:"}),e("div",{children:(n=Object.values(i==null?void 0:i.images))==null?void 0:n.map((o,m)=>{var t;return e(S,{src:(t=o==null?void 0:o.detailed)==null?void 0:t.image_path,width:100},m)})})]})]})};export{ve as default};
