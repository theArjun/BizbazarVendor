import{a as L,r as d,u as F,ao as I,b as e,b0 as A,j as p}from"./index.559c1fcf.js";import{c as C,b as E}from"./MessageCenterApi.be615e63.js";import{F as m}from"./index.d3e6f2d0.js";import{B as u}from"./button.c49f6243.js";import{I as R}from"./index.99653d62.js";import{T as j}from"./index.978e37f6.js";import"./apiConfig.819e96ae.js";import"./axios.0a901153.js";import"./config.d6ac9ea8.js";import"./render.6e9f9fbc.js";import"./useNotification.530e6546.js";import"./useInfiniteQuery.esm.273cbf80.js";import"./useQuery.esm.484a4dde.js";import"./utils.esm.f9fc2da8.js";import"./useMutation.esm.3622c9ad.js";import"./index.02299b94.js";import"./motion.c94e2116.js";import"./isEqual.5b0c1f76.js";import"./useMergedState.e59004d6.js";import"./collapse.4ef0eee8.js";import"./LoadingOutlined.65af6f9d.js";import"./row.1adc50e8.js";import"./useFlexGapSupport.39a8fd32.js";import"./responsiveObserve.0df24820.js";import"./Compact.e0a86bbb.js";import"./index.e42cc673.js";import"./TextArea.8f7e52a8.js";import"./index.800256bd.js";import"./statusUtils.8e955008.js";import"./EyeOutlined.acaf92f0.js";import"./SearchOutlined.1243ca95.js";import"./CheckOutlined.61030fcd.js";import"./styleChecker.3de124d5.js";const B="_nav_top_ni0tp_1",k="_main_content_ni0tp_13",q="_message_container_ni0tp_21",H="_chat_ni0tp_41",O="_write_message_box_ni0tp_53",Q="_send_box_ni0tp_67",U="_buttons_ni0tp_83",z="_client_message_ni0tp_99",G="_your_message_ni0tp_121",i={nav_top:B,main_content:k,message_container:q,chat:H,write_message_box:O,send_box:Q,buttons:U,client_message:z,your_message:G},{Text:J}=j,{user_id:P}=JSON.parse(localStorage.getItem("userinfo")),Me=()=>{var l,g;const h=L(),[r,y]=d.exports.useState([]),{id:c}=F(),{data:n,isLoading:b,error:s,isError:f}=C(c),{mutate:x,isLoading:v}=E(),[_]=m.useForm(),S=I();d.exports.useEffect(()=>{T()},[n]);const N=t=>{const o=new Date(parseInt(t)*1e3),a=o.toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"}),w=o.toLocaleString("en-US",{hour:"2-digit",minute:"numeric"});return a+", "+w},T=()=>{var t;n!=null&&n.data&&y((t=n==null?void 0:n.data)==null?void 0:t.messages)};d.exports.useEffect(()=>{let t=document.querySelector("#chat_container");(a=>{a.scroll({top:a.scrollHeight})})(t)},[r]);const M=t=>{if(t.message){_.resetFields();let o={communication_type:"vendor_to_admin",message:{thread_id:c,message:t.message}};x(o,{onSuccess:a=>{S.invalidateQueries(["admin_messages",c])}})}};return f?e(A,{status:(l=s==null?void 0:s.response)==null?void 0:l.status,title:(g=s==null?void 0:s.response)==null?void 0:g.status,subTitle:s==null?void 0:s.message,extra:e(u,{type:"primary",onClick:()=>h("/"),children:"Back Home"})}):e("div",{className:i.messages,children:e("div",{children:e("div",{className:i.main_content,children:p("div",{className:i.message_container,children:[e("div",{id:"chat_container",className:i.chat,children:b?e("div",{children:"Loading..."}):r==null?void 0:r.map((t,o)=>e("div",{children:p("div",{className:t.user_id===P?i.your_message:i.client_message,children:[e("div",{children:t.message}),e(J,{type:"secondary",children:N(t.timestamp)})]})},o))}),e("div",{className:i.write_message_box,children:e(m,{form:_,onFinish:M,layout:"vertical",name:"basic",wrapperCol:{},autoComplete:"off",initialValues:"",children:p("div",{className:i.send_box,children:[e(m.Item,{name:"message",style:{width:"100%"},children:e(R,{style:{fontSize:"16px",borderRadius:"20px"},placeholder:"Type a message..."})}),e(m.Item,{children:e(u,{loading:v,htmlType:"submit",type:"default",style:{borderRadius:"20px"},children:e("b",{children:" Send"})})})]})})})]})})})})};export{Me as default};
