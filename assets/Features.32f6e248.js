import{r as P,ao as B,b as r,a$ as g,j as d}from"./index.2fea9b70.js";import{k as Q}from"./ProductApi.2f3c200d.js";import{F as l}from"./index.45329f15.js";import{B as k}from"./button.8d7ffa1a.js";import{C as y}from"./index.576a1fa8.js";import{S as F}from"./index.5de7cfda.js";import"./apiConfig.eaaa62ce.js";import"./axios.0a901153.js";import"./config.42e56451.js";import"./render.a8adff37.js";import"./useNotification.7663c963.js";import"./useMutation.esm.8bfe2ba0.js";import"./utils.esm.061cfd12.js";import"./useInfiniteQuery.esm.f9f05d77.js";import"./useQuery.esm.8aa31306.js";import"./index.de03715e.js";import"./motion.cd9ea6a7.js";import"./isEqual.cc883666.js";import"./useMergedState.acd959e8.js";import"./collapse.3b35c5c9.js";import"./LoadingOutlined.3aeec88a.js";import"./row.7750d1e9.js";import"./useFlexGapSupport.a59bf389.js";import"./responsiveObserve.6b5848d4.js";import"./Compact.c7a1bef5.js";import"./Dropdown.1d3385b2.js";import"./Overflow.1e0ec03a.js";import"./index.f5b4f9b0.js";import"./PlusOutlined.f1c18f31.js";import"./pickAttrs.18ca283f.js";import"./statusUtils.ab87837f.js";import"./CheckOutlined.45292deb.js";import"./DownOutlined.653e5bd2.js";import"./SearchOutlined.3b0489e1.js";import"./PurePanel.7897ccec.js";const q="_electronics_title_hrg0r_1",A="_close_electro_hrg0r_11",E="_export_title_hrg0r_17",G={electronics_title:q,close_electro:A,export_title:E},ye=({features:m,selected_features:p,editID:_})=>{const[u,C]=P.exports.useState({product_features:p}),S=B(),{isLoading:h,mutateAsync:x}=Q(),[j]=l.useForm(),w=i=>{let e={product_id:_,...u};x(e,{onSuccess:()=>S.invalidateQueries(["single_product",String(_)])})},L=i=>{console.log("Failed:",i)},O=(i,e)=>{},f=(i,e)=>{e&&C({product_features:{...u.product_features,[e.feature]:{feature_type:e.type,value:"Feature updated",variant_id:e.value}}})},V=()=>{let i=m.filter(e=>e.feature_type=="G");return r("div",{children:i.map((e,s)=>d("div",{children:[r("h3",{children:e.description}),r(y,{children:Object.values(e.subfeatures).map((t,a)=>{var n;return r("div",{children:r(l.Item,{name:t==null?void 0:t.description,label:t==null?void 0:t.description,children:r(F,{showSearch:!0,defaultValue:(n=p[t==null?void 0:t.feature_id])==null?void 0:n.variant_id,onChange:f,optionFilterProp:"children",filterOption:(o,c)=>{var v;return((v=c==null?void 0:c.label)!=null?v:"").toLowerCase().includes(o.toLowerCase())},options:t.variants?Object.values(t.variants).map(o=>({label:o.variant,value:o.variant_id,feature:t.feature_id,type:o.feature_type})):[]})})},a)})})]},s))},"this is features")},I=()=>{let i=m.filter((e,s)=>e.feature_type=="S");return r(y,{children:i.map((e,s)=>{var t;return r("div",{children:r(l.Item,{name:e==null?void 0:e.internal_name,label:e==null?void 0:e.internal_name,children:r(F,{onChange:f,showSearch:!0,optionFilterProp:"children",defaultValue:(t=p[e==null?void 0:e.feature_id])==null?void 0:t.variant_id,filterOption:(a,n)=>{var o;return((o=n==null?void 0:n.label)!=null?o:"").toLowerCase().includes(a.toLowerCase())},options:Object.values(e.variants).map(a=>({label:a.variant,value:a.variant_id,feature:e.feature_id,type:a.feature_type}))})})},s)})})};return h?r(g,{}):d("div",{className:G.feature_container,children:[h?r(g,{}):"",d(l,{form:j,name:"features",onFinish:w,onFinishFailed:L,autoComplete:"off",onValuesChange:O,children:[r(l.Item,{style:{float:"right"},children:r(k,{type:"primary",htmlType:"submit",children:"Save changes"})}),r("br",{}),r("br",{}),I(),r("div",{children:V()})]})]})};export{ye as default};
