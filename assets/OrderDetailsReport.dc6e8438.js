import{r as h,b as o,j as d,aU as D,a as O,X as $}from"./index.774ea3ea.js";import{u as N}from"./useDebounce.1afc85d0.js";import{C as P}from"./index.debb8753.js";import{I as b}from"./index.39e4b2c8.js";import{D as A}from"./index.bcd0b5f4.js";import{l as L,C as R}from"./index.5c6a01cc.js";import{T as w}from"./Table.41afa7f4.js";import{B as T}from"./button.1c6eda25.js";import{T as E}from"./index.d2c69ca5.js";import{c as V}from"./ReportsApi.1ad700b6.js";import{B as S}from"./Breadcrumb.97460a59.js";import"./Dropdown.9bafc5f9.js";import"./useMergedState.18b5b371.js";import"./Overflow.bc908490.js";import"./index.40d7e5d1.js";import"./motion.300408ad.js";import"./isEqual.4659e5de.js";import"./PlusOutlined.4da0bfe2.js";import"./index.0d78aa55.js";import"./Compact.c162d62d.js";import"./TextArea.119a5545.js";import"./statusUtils.d5af00d6.js";import"./EyeOutlined.700862bb.js";import"./SearchOutlined.16cec939.js";import"./PurePanel.f27248d0.js";import"./index.26751f43.js";import"./pickAttrs.087993c3.js";import"./styleChecker.bcd3295e.js";import"./css.d6e3059f.js";import"./index.f4539c3d.js";import"./CheckOutlined.70cf6153.js";import"./DownOutlined.719ce519.js";import"./LoadingOutlined.732e1375.js";import"./Pagination.43e6bda7.js";import"./LeftOutlined.de95bfb5.js";import"./RightOutlined.e389cfa8.js";import"./useForceUpdate.0ca03680.js";import"./responsiveObserve.84e4b503.js";import"./index.23d5fe28.js";import"./index.15a5cbb2.js";import"./dropdown.adcd444c.js";import"./collapse.bedc836d.js";import"./useFlexGapSupport.f6cd5e9f.js";import"./index.4645b33d.js";import"./apicall.886edec7.js";import"./axios.0a901153.js";import"./config.54eb1656.js";import"./render.66f9535e.js";import"./useNotification.934e0e3b.js";import"./apicall2.e45f6879.js";import"./useInfiniteQuery.esm.23b2a444.js";import"./useQuery.esm.ae6f238b.js";import"./utils.esm.82fab7d4.js";const q="_container_1qg89_1",B={container:q},j="_container_178h8_1",H="_search_inputs_178h8_9",M="_price_container_178h8_21",z="_search_btn_178h8_55",U="_form_178h8_63",F="_formcolumn_178h8_83",K="_dropdownbutton_178h8_101",Y="_icon_178h8_109",G="_flex_178h8_135",Q="_datepicker_178h8_147",W="_date_178h8_147",X="_span_178h8_163",C={container:j,search_inputs:H,price_container:M,search_btn:z,form:U,formcolumn:F,dropdownbutton:K,icon:Y,flex:G,datepicker:Q,date:W,span:X};const{RangePicker:J}=A,Z={order_id:"",vendor_name:"",customer_name:"",ordered_date:""},ee=({params:m,setParams:y})=>{const[t,p]=h.exports.useState(Z);return N(()=>{var n,l,u,g,v,f;let e={...m};if(t.ordered_date){let a=new Date((n=t.ordered_date[0])==null?void 0:n.$y,(l=t.ordered_date[0])==null?void 0:l.$M,(u=t.ordered_date[0])==null?void 0:u.$D).getTime()/1e3,c=new Date((g=t.ordered_date[1])==null?void 0:g.$y,(v=t.ordered_date[1])==null?void 0:v.$M,(f=t.ordered_date[1])==null?void 0:f.$D).getTime()/1e3;e.date=`time_from=${a}&time_to=${c}`}else e.date="isSearch=Y";e.order_id=t==null?void 0:t.order_id,e.vendor_name=t==null?void 0:t.vendor_name,e.shipping_customer_name=t==null?void 0:t.customer_name,y(e)},500,[t]),o("div",{className:C.container,id:"changeHere",children:o(P,{children:d("div",{className:C.formcolumn,children:[d("label",{children:["Order ID",o(b,{type:"number",onChange:e=>{let n={...t};n.order_id=e.target.value,p(n)}})]}),d("label",{children:["Vendor name",o(b,{type:"text",onChange:e=>{let n={...t};n.vendor_name=e.target.value,p(n)}})]}),d("label",{children:["Shipping Customer Name",o(b,{type:"text",onChange:e=>{let n={...t};n.customer_name=e.target.value,p(n)}})]}),d("label",{children:["Ordered Date ",o("br",{}),o("div",{style:{display:"flex"},children:o(J,{onChange:e=>{{let n={...t};n.ordered_date=e,p(n)}}})})]})]})})})},te="_product_info_sw05v_1",re="_product_name_sw05v_9",oe="_icons_sw05v_19",ne="_order_status_sw05v_51",ie="_gross_total_sw05v_59",se="_openSpinner_sw05v_67",ae="_closeSpinner_sw05v_75",de="_positionabsolute_sw05v_83",ce="_print_sw05v_95",pe="_margintop_sw05v_103",x={product_info:te,product_name:re,icons:oe,order_status:ne,gross_total:ie,openSpinner:se,closeSpinner:ae,positionabsolute:de,print:ce,margintop:pe},me=({orderData:m,status:y,loading:t,handleScroll:p})=>{const e=D(),[n,l]=h.exports.useState(!1),u=h.exports.useRef(),g=O();h.exports.useEffect(()=>{var r;return(r=document.querySelector("#reportaccount > div > div.ant-table-body"))==null||r.addEventListener("scroll",p),()=>{var i;(i=document.querySelector("#reportaccount > div > div.ant-table-body "))==null||i.removeEventListener("scroll",p)}},[]);const v=r=>{const[i]=y.filter(s=>s.value===r);return o($.Fragment,{children:o(E,{className:x.dpContainer,color:i==null?void 0:i.color,children:i==null?void 0:i.label})})},f=r=>{const i=new Date(parseInt(r)*1e3),s=i.toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"}),I=i.toLocaleString("en-US",{hour:"2-digit",minute:"numeric"});return s+", "+I},a=[{title:"Order Id",dataIndex:"order_id",key:"order_id",render:(r,i)=>d("div",{onClick:()=>g(`/Orders/orders details/${i.order_id}`),style:{color:"blue",cursor:"pointer"},children:["#",r]}),width:100},{title:"Order date",dataIndex:"ordered_date",key:"ordered_date",render:r=>f(r)},{title:"Vendor name",dataIndex:"vendor_name",key:"vendor_name"},{title:"Vendor address",dataIndex:"vendor_address",key:"vendor_address"},{title:"Vendor phone",dataIndex:"vendor_phone",key:"vendor_phone"},{title:"Product name",dataIndex:"product_name",key:"product_name"},{title:"Quantity",dataIndex:"qty",key:"qty"},{title:"Order status",dataIndex:"order_status",key:"order_status",render:r=>v(r)},{title:"Shipping cost",dataIndex:"shipping_cost",key:"shipping_cost",render:r=>d("div",{children:["\u0930\u0941",r||0]})},{title:"Total cost including shipping",dataIndex:"total_cost_including_shipping",key:"total_cost_including_shipping",render:r=>d("div",{children:["\u0930\u0941",r||0]})},{title:"Order delivery remarks",dataIndex:"order_delivery_remarks",key:"order_delivery_remarks"},{title:"Shipping customer name",dataIndex:"shipping_customer_name",key:"shipping_customer_name"},{title:"Shipping address",dataIndex:"shipping_address",key:"shipping_address"}],c=L.exports.useReactToPrint({content:()=>u.current,onAfterPrint:()=>l(!1)}),_=()=>{l(!0);const r=setTimeout(c,10);return()=>clearTimeout(r)};return d("div",{children:[o(w,{id:"reportaccount",columns:a,rowKey:"order_id",loading:t,dataSource:m,pagination:!1,scroll:{y:e.height>670?500:300,x:1800}}),d("div",{className:x.positionabsolute,children:[o(T,{className:x.print,onClick:_,children:"print"}),o(T,{children:o(R,{filename:"Expense_Table.csv",data:m,className:"btn btn-primary",onClick:()=>{},children:"Export to CSV"})})]}),n&&o("div",{className:x.margintop}),n&&o(w,{id:"reporprintTableaccount1",className:x.printTable,style:{zIndex:-1},columns:a,ref:u,rowKey:"order_id",dataSource:m,pagination:!1})]})},_e={order_id:"",vendor_name:"",shipping_customer_name:"",date:"isSearch=Y"},_t=()=>{const[m,y]=h.exports.useState(_e),[t,p]=h.exports.useState(!1),{data:e,isLoading:n,isFetchingNextPage:l,fetchNextPage:u}=V(m),g=a=>{const c=a.target.scrollTop+a.target.offsetHeight+100>a.target.scrollHeight;p(c)},v=()=>{var a,c,_,r;return e!=null&&e.pages?(r=Object.values(((_=(c=(a=e==null?void 0:e.pages)==null?void 0:a.at(-1))==null?void 0:c.data)==null?void 0:_.order_statuses)||{}))==null?void 0:r.map((s,I)=>{var k;return{label:s==null?void 0:s.description,value:s==null?void 0:s.status,color:(k=s==null?void 0:s.params)==null?void 0:k.color}}):[]};let f=h.exports.useMemo(()=>{var c;let a=[];return(c=e==null?void 0:e.pages)==null||c.map(_=>{var r,i;(i=(r=_==null?void 0:_.data)==null?void 0:r.report)==null||i.map(s=>{a.push(s)})}),a||[]},[e]);return N(()=>{!t||u()},300,[t]),d("div",{className:B.container,children:[d(S,{children:[o(S.Item,{children:"Reports"}),o(S.Item,{children:"Order Details"})]}),o(ee,{params:m,setParams:y}),o(me,{status:v(),orderData:f,loading:n||l,handleScroll:g})]})};export{_t as default};
