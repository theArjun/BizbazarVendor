import{r as h,ao as j,a as K,aU as Q,j as a,b as o}from"./index.4f23c09f.js";import{j as H,k as z,a as U}from"./index.esm.476cd3ce.js";import{h as V,i as X,j as J}from"./ProductApi.ec9e3999.js";import{T as d}from"./Table.7ae9acac.js";import{B as W}from"./button.0e0bb488.js";import{I as G}from"./index.b1166a52.js";import{D as v,S as Y}from"./dropdown.c5450427.js";import{M as Z}from"./index.2716beec.js";import{T as s}from"./index.afbea043.js";import"./apiConfig.6fee151b.js";import"./axios.0a901153.js";import"./config.93562c2e.js";import"./render.a21f8e67.js";import"./useNotification.ddc3cd5c.js";import"./useMutation.esm.62dcf3b9.js";import"./utils.esm.958af8f4.js";import"./useInfiniteQuery.esm.7b143079.js";import"./useQuery.esm.48f464b8.js";import"./motion.9212238f.js";import"./isEqual.5405dd52.js";import"./useMergedState.a9c803d6.js";import"./pickAttrs.08767335.js";import"./styleChecker.c75b564a.js";import"./index.04eab99a.js";import"./css.d6e3059f.js";import"./index.421566c6.js";import"./Overflow.1804b708.js";import"./statusUtils.c3240a4a.js";import"./CheckOutlined.a5fb0c39.js";import"./DownOutlined.72f23fd5.js";import"./LoadingOutlined.ad18cc7b.js";import"./SearchOutlined.19f92cba.js";import"./PurePanel.01378a58.js";import"./Compact.8d51645f.js";import"./Pagination.61534547.js";import"./LeftOutlined.04d83dae.js";import"./RightOutlined.dab7e2a3.js";import"./useForceUpdate.f84be2ca.js";import"./responsiveObserve.16c01648.js";import"./index.2687a7e4.js";import"./index.9fb36eb2.js";import"./index.48a55223.js";import"./index.c1ec313f.js";import"./collapse.7fea9198.js";import"./index.334a4467.js";import"./TextArea.5556322f.js";import"./EyeOutlined.ac35e31d.js";import"./index.7a8128c4.js";import"./index.ba3281eb.js";import"./Dropdown.af716b86.js";import"./useFlexGapSupport.3166aa6c.js";const $="_product_info_1tgvq_1",ee="_product_name_1tgvq_9",te="_icons_1tgvq_19",oe="_openDelete_1tgvq_51",re="_selectBar_1tgvq_57",c={product_info:$,product_name:ee,icons:te,openDelete:oe,selectBar:re},{confirm:ie}=Z,ot=({loading:S,handleScroll:l,setSortBy:k,products:b})=>{const[n,f]=h.exports.useState(""),[u,p]=h.exports.useState([]),{mutate:C,isLoading:x}=V(),{mutate:D,isLoading:I}=X(),{mutate:E,isLoading:N}=J(),m=j(),_=K(),A=Q();h.exports.useEffect(()=>{var t;return(t=document.querySelector("#product > div > div.ant-table-body"))==null||t.addEventListener("scroll",l),()=>{var e;(e=document.querySelector("#product > div > div.ant-table-body"))==null||e.removeEventListener("scroll",l)}},[l]);function L(t,e="",r){ie({title:t,content:e,async onOk(){try{C(r,{onSuccess:i=>{m.invalidateQueries(["products"])}})}catch{return console.log("Oops errors!")}},onCancel(){}})}const R=async t=>{let e={product_ids:{}};t==null||t.map((r,i)=>{e.product_ids[i]=r}),D(e,{onSuccess:r=>{m.invalidateQueries(["products"])}})},q=async(t,e)=>{f(t),window.localstorage.setItem("productRowId",JSON.stringify(t)),e==="detail"&&_("products")},g=(t,e)=>{E({id:t,status:e},{onSuccess:r=>{m.invalidateQueries(["products"])}})},y=t=>{switch(t){case"H":return o(s,{color:"purple",children:"Hidden"});case"A":return o(s,{color:"green",children:"Active"});case"D":return o(s,{color:"orange",children:"Disabled"});case"R":return o(s,{color:"red",children:"Requires Approval"});case"X":return o(s,{color:"magenta",children:"Disapproved"});default:return"Attention required"}},w=[{key:"1",label:o("div",{onClick:()=>g(n,"A"),children:"Active"})},{key:"2",label:o("div",{onClick:()=>g(n,"D"),children:"Disabled"})},{key:"3",label:o("div",{onClick:()=>g(n,"H"),children:"Hidden"})}],O=[{key:"1",label:a("a",{onClick:()=>_("../products/"+n),children:["Edit ",o(H,{})]})},{key:"2",label:a("a",{rel:"noopener noreferrer",href:"#",className:c.action_items,onClick:()=>L("Are you sure to delete?","",n),children:["Delete",o(z,{})]})}],P=[{title:"Name/Code",dataIndex:["product_id","product","product_code","main_pair"],data:"data",key:"product",render:(t,e)=>{var r;return a("div",{className:c.product_info,children:[o(G,{width:70,src:e.main_pair?e.main_pair.detailed.image_path:"",alt:""}),a("div",{className:c.product_name,children:[o("a",{onClick:()=>_("../products/"+(e==null?void 0:e.product_id)),children:o("strong",{children:((r=e.product)==null?void 0:r.length)>15?e.product.substring(0,15)+"...":e.product})}),o("small",{children:e.product_code})]})]})},sorter:(t,e)=>{}},{title:"Price",dataIndex:"price",key:"price",sorter:(t,e)=>{},render:t=>o("p",{children:parseFloat(t).toFixed(2)})},{title:"Quantity",dataIndex:"amount",key:"amount",sorter:(t,e)=>{}},{title:"Action",key:"action",dataIndex:["product_id"],render:t=>o("div",{className:c.product_action,onClick:()=>q(t),children:o(v,{menu:{items:O},placement:"bottom",arrow:!0,trigger:["click"],children:o(U,{size:20,className:c.icons})})})},{title:"Status",key:"status",dataIndex:["status","product_id"],defaultFilteredValue:"Requires Approval",render:(t,e)=>o("div",{children:e.status=="R"||e.status=="X"?y(e.status):o(v,{menu:{items:w},children:o(Y,{onMouseOver:()=>f(e.product_id),children:y(e.status)})})})}],T=t=>{p(t)},B=u.length>0,F={selectedRowKeys:u,onChange:T,selections:[d.SELECTION_ALL,d.SELECTION_INVERT,d.SELECTION_NONE,{key:"odd",text:"Select Odd Row",onSelect:t=>{let e=[];e=t.filter((r,i)=>i%2===0),p(e)}},{key:"even",text:"Select Even Row",onSelect:t=>{let e=[];e=t.filter((r,i)=>i%2!==0),p(e)}}]};function M(t,e,r,i){k(r)}return a("div",{children:[o("div",{style:{backgroundColor:"white",padding:"10px"},children:o(W,{type:"primary",onClick:()=>R(u),disabled:!B,children:"Delete"})}),o(d,{id:"product",rowKey:"product_id",loading:S||x||I||N,rowSelection:F,columns:P,dataSource:b,pagination:!1,onChange:M,scroll:{y:A.height>670?400:200,x:1e3}})]})};export{ot as default};
