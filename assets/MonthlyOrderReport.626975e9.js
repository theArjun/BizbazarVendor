import{r as u,j as f,b as m}from"./index.0eae6df2.js";import{M as I,a as L}from"./index.c2342435.js";import{u as G}from"./ReportsApi.48b17fc7.js";import{A as N}from"./apiConfig.422f7f8e.js";import{u as P}from"./useQuery.esm.a226e4a2.js";import{u as v}from"./useDebounce.2d8db3a6.js";import{B as c}from"./Breadcrumb.3e55c3b1.js";import"./apicall.28ee9ed9.js";import"./axios.0a901153.js";import"./config.a608364a.js";import"./render.36f71972.js";import"./useNotification.b0fd12ef.js";import"./apicall2.1308aa4e.js";import"./useInfiniteQuery.esm.39b60b71.js";import"./utils.esm.9d23a50b.js";import"./dropdown.04f8b523.js";import"./RightOutlined.44374471.js";import"./Dropdown.a44dcf86.js";import"./useMergedState.e128dcb1.js";import"./Overflow.0bb1c80c.js";import"./index.00b7436e.js";import"./motion.25de7d91.js";import"./isEqual.7557051f.js";import"./PurePanel.6b30b4ea.js";import"./index.a53e5976.js";import"./collapse.d7e28f1d.js";import"./button.bb92e4e7.js";import"./Compact.394e1fff.js";import"./LoadingOutlined.8c764613.js";import"./useFlexGapSupport.26f67e3e.js";import"./DownOutlined.0d88a6a7.js";const B="_container_122jv_1",T={container:B},q=()=>P({queryKey:["statuses"],queryFn:()=>N.get("statuses")}),F={order_id:"",status_id:"",user_type:"",usergroup_id:"",time_from:"",time_to:""},ht=()=>{const[d,h]=u.exports.useState(F),[g,y]=u.exports.useState(!1),{data:o,isLoading:_,isFetchingNextPage:x,fetchNextPage:b}=G(d),{data:p,isLoading:H}=q(),M=t=>{const e=t.target.scrollTop+t.target.offsetHeight+100>t.target.scrollHeight;y(e)};let j=u.exports.useMemo(()=>{var e;let t=[];return(e=o==null?void 0:o.pages)==null||e.map(s=>{var a,i;(i=Object.values((a=s==null?void 0:s.data)==null?void 0:a.report))==null||i.map(r=>{var n;(n=Object.entries(r))==null||n.map((S,K)=>{S.map((O,A)=>{A===1&&t.push(O)})})})}),t||[]},[o]);const l=()=>{var t;return p?(t=p==null?void 0:p.data)==null?void 0:t.statuses:[]},R=()=>{var e,s,a,i;let t=((a=(s=(e=o==null?void 0:o.pages)==null?void 0:e.at(-1))==null?void 0:s.data)==null?void 0:a.usergroups)||{};return(i=Object.values(t))==null?void 0:i.map((r,n)=>({label:r==null?void 0:r.usergroup,value:r==null?void 0:r.usergroup_id}))};return v(()=>{!g||b()},300,[g]),f("div",{className:T.container,children:[f(c,{children:[m(c.Item,{children:"Reports"}),m(c.Item,{children:"Monthly order reports"})]}),m(I,{status:l(),userGroup:R(),params:d,setParams:h}),m(L,{handleScroll:M,data:j,loading:_||x,status:l()})]})};export{ht as default};
