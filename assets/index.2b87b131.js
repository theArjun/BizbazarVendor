import{r as h,a3 as me,_ as I,b as m,C as W,v as E,N as ve,aR as Q,b2 as J,j,F as K,f as M,Y as xe,d as b,az as L,Q as ge,P as ye,O as he,R as Pe,W as $,T as be,aO as ke}from"./index.b239cc55.js";import{I as Te,u as Oe,r as we}from"./render.1622182d.js";import{B as D,c as U}from"./button.1e90f6e6.js";import{u as Z,P as Ne,D as Se}from"./index.9279110c.js";import{c as Ie}from"./useFlexGapSupport.1cb3c05a.js";function G(e){return!!(e&&!!e.then)}var _e=function(t){var r=h.exports.useRef(!1),n=h.exports.useRef(null),o=me(!1),i=I(o,2),v=i[0],x=i[1],l=t.close,f=function(){l==null||l.apply(void 0,arguments)};h.exports.useEffect(function(){var d=null;return t.autoFocus&&(d=setTimeout(function(){var u;(u=n.current)===null||u===void 0||u.focus()})),function(){d&&clearTimeout(d)}},[]);var c=function(u){!G(u)||(x(!0),u.then(function(){x(!1,!0),f.apply(void 0,arguments),r.current=!1},function(k){console.error(k),x(!1,!0),r.current=!1}))},a=function(u){var k=t.actionFn;if(!r.current){if(r.current=!0,!k){f();return}var C;if(t.emitEvent){if(C=k(u),t.quitOnNullishReturnValue&&!G(C)){r.current=!1,f(u);return}}else if(k.length)C=k(l),r.current=!1;else if(C=k(),!C){f();return}c(C)}},s=t.type,y=t.children,g=t.prefixCls,P=t.buttonProps;return m(D,{...U(s),onClick:a,loading:v,prefixCls:g,...P,ref:n,children:y})};const V=_e;var Re=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};function ee(e,t){return m("span",{className:e+"-close-x",children:t||m(ve,{className:e+"-close-icon"})})}function te(e){var t=e.okText,r=e.okType,n=r===void 0?"primary":r,o=e.cancelText,i=e.confirmLoading,v=e.onOk,x=e.onCancel,l=e.okButtonProps,f=e.cancelButtonProps,c=e.footer;return c===void 0?m(Q,{componentName:"Modal",defaultLocale:J(),children:function(a){return j(K,{children:[m(D,{onClick:x,...f,children:o||a.cancelText}),m(D,{...U(n),loading:i,onClick:v,...l,children:t||a.okText})]})}}):c}function Fe(e){var t=e.prefixCls,r=e.className,n=e.closeIcon,o=e.closable,i=e.type,v=e.title,x=e.children,l=Re(e,["prefixCls","className","closeIcon","closable","type","title","children"]),f=h.exports.useContext(W),c=f.getPrefixCls,a=c(),s=t||c("modal"),y=Z(s),g=I(y,2),P=g[1],d=s+"-confirm",u={};return i?u={closable:o!=null?o:!1,title:"",footer:"",children:m(re,{...e,confirmPrefixCls:d,rootPrefixCls:a,content:x})}:u={closable:o!=null?o:!0,title:v,footer:te(e),children:x},m(Ne,{prefixCls:s,className:E(P,s+"-pure-panel",i&&d,i&&d+"-"+i,r),...l,closeIcon:ee(s,n),closable:o,...u})}var $e=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},H,Ee=function(t){H={x:t.pageX,y:t.pageY},setTimeout(function(){H=null},100)};Ie()&&document.documentElement.addEventListener("click",Ee,!0);var Ae=function(t){var r,n,o=h.exports.useContext(W),i=o.getPopupContainer,v=o.getPrefixCls,x=o.direction,l=function(z){var R=t.onCancel;R==null||R(z)},f=function(z){var R=t.onOk;R==null||R(z)},c=t.prefixCls,a=t.className,s=t.open,y=t.wrapClassName,g=t.centered,P=t.getContainer,d=t.closeIcon,u=t.focusTriggerAfterClose,k=u===void 0?!0:u,C=t.visible,O=t.width,T=O===void 0?520:O,N=$e(t,["prefixCls","className","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","visible","width"]),S=v("modal",c),_=v(),p=Z(S),B=I(p,2),Y=B[0],q=B[1],de=E(y,(r={},M(r,S+"-centered",!!g),M(r,S+"-wrap-rtl",x==="rtl"),r));return Y(m(xe,{status:!0,override:!0,children:m(Se,{width:T,...N,getContainer:P===void 0?i:P,prefixCls:S,rootClassName:q,wrapClassName:de,footer:te(b(b({},t),{onOk:f,onCancel:l})),visible:s!=null?s:C,mousePosition:(n=N.mousePosition)!==null&&n!==void 0?n:H,onClose:l,closeIcon:ee(S,d),focusTriggerAfterClose:k,transitionName:L(_,"zoom",t.transitionName),maskTransitionName:L(_,"fade",t.maskTransitionName),className:E(q,a)})}))};const ne=Ae;function re(e){var t=e.icon,r=e.onCancel,n=e.onOk,o=e.close,i=e.okText,v=e.okButtonProps,x=e.cancelText,l=e.cancelButtonProps,f=e.confirmPrefixCls,c=e.rootPrefixCls,a=e.type,s=e.okCancel,y=e.locale,g=t;if(!t&&t!==null)switch(a){case"info":g=m(Te,{});break;case"success":g=m(he,{});break;case"error":g=m(ye,{});break;default:g=m(ge,{})}var P=e.okType||"primary",d=s!=null?s:a==="confirm",u=e.autoFocusButton===null?!1:e.autoFocusButton||"ok";return m(Q,{componentName:"Modal",children:function(k){var C=y||k,O=d&&m(V,{actionFn:r,close:o,autoFocus:u==="cancel",buttonProps:l,prefixCls:c+"-btn",children:x||(C==null?void 0:C.cancelText)});return j("div",{className:f+"-body-wrapper",children:[j("div",{className:f+"-body",children:[g,e.title===void 0?null:m("span",{className:f+"-title",children:e.title}),m("div",{className:f+"-content",children:e.content})]}),j("div",{className:f+"-btns",children:[O,m(V,{type:P,actionFn:n,close:o,autoFocus:u==="ok",buttonProps:v,prefixCls:c+"-btn",children:i||(d?C==null?void 0:C.okText:C==null?void 0:C.justOkText)})]})]})}})}var oe=function(t){var r=t.close,n=t.zIndex,o=t.afterClose;t.visible;var i=t.open,v=t.keyboard,x=t.centered,l=t.getContainer,f=t.maskStyle,c=t.direction,a=t.prefixCls,s=t.wrapClassName,y=t.rootPrefixCls,g=t.iconPrefixCls,P=t.bodyStyle,d=t.closable,u=d===void 0?!1:d,k=t.closeIcon,C=t.modalRender,O=t.focusTriggerAfterClose,T=a+"-confirm",N=t.width||416,S=t.style||{},_=t.mask===void 0?!0:t.mask,p=t.maskClosable===void 0?!1:t.maskClosable,B=E(T,T+"-"+t.type,M({},T+"-rtl",c==="rtl"),t.className);return m(Pe,{prefixCls:y,iconPrefixCls:g,direction:c,children:m(ne,{prefixCls:a,className:B,wrapClassName:E(M({},T+"-centered",!!t.centered),s),onCancel:function(){return r==null?void 0:r({triggerCancel:!0})},open:i,title:"",footer:"",transitionName:L(y,"zoom",t.transitionName),maskTransitionName:L(y,"fade",t.maskTransitionName),mask:_,maskClosable:p,maskStyle:f,style:S,bodyStyle:P,width:N,zIndex:n,afterClose:o,keyboard:v,centered:x,getContainer:l,closable:u,closeIcon:k,modalRender:C,focusTriggerAfterClose:O,children:m(re,{...t,confirmPrefixCls:T})})})},Be=[];const F=Be;var je=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},ae="";function Me(){return ae}function A(e){var t=document.createDocumentFragment(),r=b(b({},e),{close:v,open:!0}),n;function o(){for(var l=arguments.length,f=new Array(l),c=0;c<l;c++)f[c]=arguments[c];var a=f.some(function(g){return g&&g.triggerCancel});e.onCancel&&a&&e.onCancel.apply(e,[function(){}].concat($(f.slice(1))));for(var s=0;s<F.length;s++){var y=F[s];if(y===v){F.splice(s,1);break}}Oe(t)}function i(l){var f=l.okText,c=l.cancelText,a=l.prefixCls,s=je(l,["okText","cancelText","prefixCls"]);clearTimeout(n),n=setTimeout(function(){var y=J(),g=be(),P=g.getPrefixCls,d=g.getIconPrefixCls,u=P(void 0,Me()),k=a||u+"-modal",C=d();we(m(oe,{...s,prefixCls:k,rootPrefixCls:u,iconPrefixCls:C,okText:f,locale:y,cancelText:c||y.cancelText}),t)})}function v(){for(var l=this,f=arguments.length,c=new Array(f),a=0;a<f;a++)c[a]=arguments[a];r=b(b({},r),{open:!1,afterClose:function(){typeof e.afterClose=="function"&&e.afterClose(),o.apply(l,c)}}),r.visible&&delete r.visible,i(r)}function x(l){typeof l=="function"?r=l(r):r=b(b({},r),l),i(r)}return i(r),F.push(v),{destroy:v,update:x}}function le(e){return b(b({},e),{type:"warning"})}function ie(e){return b(b({},e),{type:"info"})}function ce(e){return b(b({},e),{type:"success"})}function se(e){return b(b({},e),{type:"error"})}function ue(e){return b(b({},e),{type:"confirm"})}function Le(e){var t=e.rootPrefixCls;ae=t}function pe(){var e=h.exports.useState([]),t=I(e,2),r=t[0],n=t[1],o=h.exports.useCallback(function(i){return n(function(v){return[].concat($(v),[i])}),function(){n(function(v){return v.filter(function(x){return x!==i})})}},[]);return[r,o]}var ze=function(t,r){var n=t.afterClose,o=t.config,i=h.exports.useState(!0),v=I(i,2),x=v[0],l=v[1],f=h.exports.useState(o),c=I(f,2),a=c[0],s=c[1],y=h.exports.useContext(W),g=y.direction,P=y.getPrefixCls,d=P("modal"),u=P(),k=function(){l(!1);for(var O=arguments.length,T=new Array(O),N=0;N<O;N++)T[N]=arguments[N];var S=T.some(function(_){return _&&_.triggerCancel});a.onCancel&&S&&a.onCancel.apply(a,[function(){}].concat($(T.slice(1))))};return h.exports.useImperativeHandle(r,function(){return{destroy:k,update:function(O){s(function(T){return b(b({},T),O)})}}}),m(Q,{componentName:"Modal",defaultLocale:ke.Modal,children:function(C){return m(oe,{prefixCls:d,rootPrefixCls:u,...a,close:k,open:x,afterClose:n,okText:a.okText||(a.okCancel?C.okText:C.justOkText),direction:g,cancelText:a.cancelText||C.cancelText})}})};const De=h.exports.forwardRef(ze);var X=0,He=h.exports.memo(h.exports.forwardRef(function(e,t){var r=pe(),n=I(r,2),o=n[0],i=n[1];return h.exports.useImperativeHandle(t,function(){return{patchElement:i}},[]),m(K,{children:o})}));function We(){var e=h.exports.useRef(null),t=h.exports.useState([]),r=I(t,2),n=r[0],o=r[1];h.exports.useEffect(function(){if(n.length){var x=$(n);x.forEach(function(l){l()}),o([])}},[n]);var i=h.exports.useCallback(function(x){return function(f){var c;X+=1;var a=h.exports.createRef(),s,y=m(De,{config:x(f),ref:a,afterClose:function(){s==null||s()}},"modal-"+X);return s=(c=e.current)===null||c===void 0?void 0:c.patchElement(y),{destroy:function(){function P(){var d;(d=a.current)===null||d===void 0||d.destroy()}a.current?P():o(function(d){return[].concat($(d),[P])})},update:function(P){function d(){var u;(u=a.current)===null||u===void 0||u.update(P)}a.current?d():o(function(u){return[].concat($(u),[d])})}}}},[]),v=h.exports.useMemo(function(){return{info:i(ie),success:i(ce),error:i(se),warning:i(le),confirm:i(ue)}},[]);return[v,m(He,{ref:e})]}function fe(e){return A(le(e))}var w=ne;w.useModal=We;w.info=function(t){return A(ie(t))};w.success=function(t){return A(ce(t))};w.error=function(t){return A(se(t))};w.warning=fe;w.warn=fe;w.confirm=function(t){return A(ue(t))};w.destroyAll=function(){for(;F.length;){var t=F.pop();t&&t()}};w.config=Le;w._InternalPanelDoNotUseOrYouWillBeFired=Fe;const Xe=w;export{Xe as M};
