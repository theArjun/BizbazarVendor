import{j as i,b as o,r as c,v as j,bq as D}from"./index.774ea3ea.js";import{T as O,v as V,W as H,w as Y}from"./index.ed194364.js";import{T as $}from"./TextArea.119a5545.js";import{a as w}from"./apicall.886edec7.js";import{F as u}from"./index.2fdd8f43.js";import{B as z}from"./Breadcrumb.97460a59.js";import{M as E}from"./index.d924cf53.js";import{I as G}from"./index.39e4b2c8.js";import{B as J}from"./button.1c6eda25.js";import"./index.40d7e5d1.js";import"./useMergedState.18b5b371.js";import"./statusUtils.d5af00d6.js";import"./Compact.c162d62d.js";import"./index.0d78aa55.js";import"./axios.0a901153.js";import"./config.54eb1656.js";import"./render.66f9535e.js";import"./useNotification.934e0e3b.js";import"./index.26751f43.js";import"./motion.300408ad.js";import"./isEqual.4659e5de.js";import"./collapse.bedc836d.js";import"./LoadingOutlined.732e1375.js";import"./row.114180a0.js";import"./useFlexGapSupport.f6cd5e9f.js";import"./responsiveObserve.84e4b503.js";import"./dropdown.adcd444c.js";import"./RightOutlined.e389cfa8.js";import"./Dropdown.9bafc5f9.js";import"./Overflow.bc908490.js";import"./PurePanel.f27248d0.js";import"./DownOutlined.719ce519.js";import"./index.5f886e53.js";import"./pickAttrs.087993c3.js";import"./EyeOutlined.700862bb.js";import"./SearchOutlined.16cec939.js";const L="_container_qzg0f_1",K="_tabContainer_qzg0f_25",Q="_left_qzg0f_37",R="_new_add_btn_qzg0f_47",X="_bgColor_qzg0f_79",Z="_button_qzg0f_97",m={container:L,tabContainer:K,left:Q,new_add_btn:R,bgColor:X,button:Z},v=({data:n,status:l,getAccountingInformation:p,loading:d})=>{const f=()=>n?n.reduce((a,e)=>a+parseFloat(e==null?void 0:e.payout_amount),0):"",_=()=>n?n.reduce((a,e)=>a+parseFloat(e!=null&&e.shipping_cost?e.shipping_cost:0),0):"",s=()=>n?n.reduce((a,e)=>a+parseFloat(e!=null&&e.voucher_cost?e.voucher_cost:0),0):"",h=()=>n?n.reduce((a,e)=>a+parseFloat(e!=null&&e.gift_certificate_cost?e.gift_certificate_cost:0),0):"",g=()=>f()-_()-s();return i("div",{children:[o(O,{getAccountingInformation:p,getTotalTransaction:f,getTotalShipping:_,getTotalVoucher:s,getTotalGift:h,getNetIncome:g}),o(V,{data:n||"",status:l,loading:d,getTotalTransaction:f,getTotalShipping:_,getTotalVoucher:s,getTotalGift:h,getNetIncome:g})]})},tt=({data:n,status:l,loading:p,getWithdrawInformation:d})=>i("div",{children:[o(H,{getWithdrawInformation:d}),o(Y,{data:n||"",status:l,loading:p})]}),jt=()=>{const n=["Transactions","Balance withdrawals"],[l,p]=c.exports.useState("Transactions"),[d,f]=c.exports.useState(""),[_,s]=c.exports.useState(!1),[h,g]=c.exports.useState([]),[a,e]=c.exports.useState(!1),[F,B]=c.exports.useState("");let y=JSON.parse(localStorage.getItem("userinfo"));c.exports.useEffect(()=>{T(),x(),S()},[]);const I=t=>{let r=`BizbazarAccounting/${y.id}?is_search=Y`;return t!=null&&t.types&&(r=r+"&payout_type="+t.types),t!=null&&t.status&&(r=r+"&approval_status="+t.status),(t==null?void 0:t.start_date)&&(t==null?void 0:t.end_date)&&(r=r+"&time_from="+t.start_date+"&time_to="+t.end_date),r},N=t=>{let r=`BizbazarAccounting/${y.id}?is_search=Y&selected_section=withdrawals`;return t!=null&&t.status&&(r=r+"&approval_status="+t.status),(t==null?void 0:t.start_date)&&(t==null?void 0:t.end_date)&&(r=r+"&time_from="+t.start_date+"&time_to="+t.end_date),r},S=async()=>{const t=await w({url:"statuses"});g(t.data.statuses)},T=async t=>{e(!0);let r=await w({url:I(t)});r.data&&(f(r.data.map((b,C)=>({...b,key:C}))),e(!1)),e(!1)},x=async t=>{e(!0);let r=await w({url:N(t)});if(r.data){let b=r.data.map((C,U)=>({...C,key:U}));B(b),e(!1)}e(!1)},q=()=>{s(!0)},[k]=u.useForm(),A=async t=>{let r={payment:{amount:t.amount,comments:t.comments,vendor:y.id}};(await w({url:"BizbazarAccounting",method:"post",data:r})).status==201&&(s(!1),T(),x(),S())},W=t=>{console.log("Failed:",t)},P=()=>{s(!1)},M=()=>{switch(l){case"Balance withdrawals":return o(tt,{data:F,status:h,loading:a,getWithdrawInformation:x});default:return o(v,{data:d,status:h,getAccountingInformation:T,loading:a})}};return o("div",{className:m.container,children:i("div",{className:"breadcrumb",children:[i(z,{children:[o(z.Item,{children:"Home"}),o(z.Item,{children:o("a",{href:"",children:"Accounting"})})]}),i("div",{className:m.tabContainer,children:[o("div",{className:m.left,children:n.map((t,r)=>o("div",{className:j(m.button,l===t?m.bgColor:null),onClick:()=>p(t),children:t},r))}),i("div",{children:[o("div",{onClick:q,className:m.new_add_btn,children:o(D,{size:25})}),i(E,{title:"New withdrawal",open:_,onOk:A,onCancel:P,okText:"Create",cancelText:"Cancel",okButtonProps:{style:{display:"none"}},cancelButtonProps:{style:{display:"none"}},children:[o("hr",{}),i("p",{children:[o("strong",{children:"Vendor:"})," \xA0\xA0 \xA0",o("span",{children:"Vendor Acc1"})]}),i(u,{form:k,className:m.form,name:"",onFinish:A,onFinishFailed:W,autoComplete:"off",children:[o(u.Item,{label:"Payment amount",name:"amount",rules:[{required:!0,message:"Please enter payment amount."}],children:o(G,{type:"number"})}),o(u.Item,{label:"Comments",name:"comments",children:o($,{rows:8})}),o(u.Item,{label:"",name:"submit",children:o(J,{type:"primary",htmlType:"submit",style:{float:"right"},children:"Create"})})]})]})]})]}),M()]})})};export{jt as default};
