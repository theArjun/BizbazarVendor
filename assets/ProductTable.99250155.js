import{r as h,ao as j,a as K,aU as Q,j as a,b as o}from"./index.b239cc55.js";import{j as H,k as z,a as U}from"./index.esm.681134e4.js";import{h as V,i as X,j as J}from"./ProductApi.eb176513.js";import{T as d}from"./Table.4059dce2.js";import{B as W}from"./button.1e90f6e6.js";import{I as G}from"./index.51ed3a13.js";import{D as v,S as Y}from"./dropdown.989042eb.js";import{M as Z}from"./index.2b87b131.js";import{T as s}from"./index.0c91c947.js";import"./apiConfig.446075fe.js";import"./axios.0a901153.js";import"./config.79883511.js";import"./render.1622182d.js";import"./useNotification.49a3f20c.js";import"./useMutation.esm.61ea1354.js";import"./utils.esm.408cb86b.js";import"./useInfiniteQuery.esm.0432f70d.js";import"./useQuery.esm.3c1c4f21.js";import"./motion.0d7a897e.js";import"./isEqual.21fc3aef.js";import"./useMergedState.a28f7e87.js";import"./pickAttrs.f011bab2.js";import"./styleChecker.98fd75c2.js";import"./index.282ea7d3.js";import"./css.d6e3059f.js";import"./index.3c397a1c.js";import"./Overflow.8b34a4db.js";import"./statusUtils.ab472cb9.js";import"./CheckOutlined.bf68ea45.js";import"./DownOutlined.69351dd6.js";import"./LoadingOutlined.97101298.js";import"./SearchOutlined.8331e38c.js";import"./PurePanel.ffcb695e.js";import"./Compact.d9f155a2.js";import"./Pagination.c3c3f66a.js";import"./LeftOutlined.cd9ac35f.js";import"./RightOutlined.47ed9d6c.js";import"./useForceUpdate.5b188f49.js";import"./responsiveObserve.99027935.js";import"./index.2d340b5d.js";import"./index.cd55466f.js";import"./index.d91339a4.js";import"./index.6bb695c7.js";import"./collapse.4a0a3d30.js";import"./index.4af21018.js";import"./TextArea.6c3ac8fe.js";import"./EyeOutlined.a43f77a8.js";import"./index.4bbb7811.js";import"./index.9279110c.js";import"./Dropdown.3bbb202b.js";import"./useFlexGapSupport.1cb3c05a.js";const $="_product_info_1tgvq_1",ee="_product_name_1tgvq_9",te="_icons_1tgvq_19",oe="_openDelete_1tgvq_51",re="_selectBar_1tgvq_57",c={product_info:$,product_name:ee,icons:te,openDelete:oe,selectBar:re},{confirm:ie}=Z,ot=({loading:S,handleScroll:l,setSortBy:k,products:b})=>{const[n,f]=h.exports.useState(""),[u,p]=h.exports.useState([]),{mutate:C,isLoading:x}=V(),{mutate:D,isLoading:I}=X(),{mutate:E,isLoading:N}=J(),m=j(),_=K(),A=Q();h.exports.useEffect(()=>{var t;return(t=document.querySelector("#product > div > div.ant-table-body"))==null||t.addEventListener("scroll",l),()=>{var e;(e=document.querySelector("#product > div > div.ant-table-body"))==null||e.removeEventListener("scroll",l)}},[l]);function L(t,e="",r){ie({title:t,content:e,async onOk(){try{C(r,{onSuccess:i=>{m.invalidateQueries(["products"])}})}catch{return console.log("Oops errors!")}},onCancel(){}})}const R=async t=>{let e={product_ids:{}};t==null||t.map((r,i)=>{e.product_ids[i]=r}),D(e,{onSuccess:r=>{m.invalidateQueries(["products"])}})},q=async(t,e)=>{f(t),window.localstorage.setItem("productRowId",JSON.stringify(t)),e==="detail"&&_("products")},g=(t,e)=>{E({id:t,status:e},{onSuccess:r=>{m.invalidateQueries(["products"])}})},y=t=>{switch(t){case"H":return o(s,{color:"purple",children:"Hidden"});case"A":return o(s,{color:"green",children:"Active"});case"D":return o(s,{color:"orange",children:"Disabled"});case"R":return o(s,{color:"red",children:"Requires Approval"});case"X":return o(s,{color:"magenta",children:"Disapproved"});default:return"Attention required"}},w=[{key:"1",label:o("div",{onClick:()=>g(n,"A"),children:"Active"})},{key:"2",label:o("div",{onClick:()=>g(n,"D"),children:"Disabled"})},{key:"3",label:o("div",{onClick:()=>g(n,"H"),children:"Hidden"})}],O=[{key:"1",label:a("a",{onClick:()=>_("../products/"+n),children:["Edit ",o(H,{})]})},{key:"2",label:a("a",{rel:"noopener noreferrer",href:"#",className:c.action_items,onClick:()=>L("Are you sure to delete?","",n),children:["Delete",o(z,{})]})}],P=[{title:"Name/Code",dataIndex:["product_id","product","product_code","main_pair"],data:"data",key:"product",render:(t,e)=>{var r;return a("div",{className:c.product_info,children:[o(G,{width:70,src:e.main_pair?e.main_pair.detailed.image_path:"",alt:""}),a("div",{className:c.product_name,children:[o("a",{onClick:()=>_("../products/"+(e==null?void 0:e.product_id)),children:o("strong",{children:((r=e.product)==null?void 0:r.length)>15?e.product.substring(0,15)+"...":e.product})}),o("small",{children:e.product_code})]})]})},sorter:(t,e)=>{}},{title:"Price",dataIndex:"price",key:"price",sorter:(t,e)=>{},render:t=>o("p",{children:parseFloat(t).toFixed(2)})},{title:"Quantity",dataIndex:"amount",key:"amount",sorter:(t,e)=>{}},{title:"Action",key:"action",dataIndex:["product_id"],render:t=>o("div",{className:c.product_action,onClick:()=>q(t),children:o(v,{menu:{items:O},placement:"bottom",arrow:!0,trigger:["click"],children:o(U,{size:20,className:c.icons})})})},{title:"Status",key:"status",dataIndex:["status","product_id"],defaultFilteredValue:"Requires Approval",render:(t,e)=>o("div",{children:e.status=="R"||e.status=="X"?y(e.status):o(v,{menu:{items:w},children:o(Y,{onMouseOver:()=>f(e.product_id),children:y(e.status)})})})}],T=t=>{p(t)},B=u.length>0,F={selectedRowKeys:u,onChange:T,selections:[d.SELECTION_ALL,d.SELECTION_INVERT,d.SELECTION_NONE,{key:"odd",text:"Select Odd Row",onSelect:t=>{let e=[];e=t.filter((r,i)=>i%2===0),p(e)}},{key:"even",text:"Select Even Row",onSelect:t=>{let e=[];e=t.filter((r,i)=>i%2!==0),p(e)}}]};function M(t,e,r,i){k(r)}return a("div",{children:[o("div",{style:{backgroundColor:"white",padding:"10px"},children:o(W,{type:"primary",onClick:()=>R(u),disabled:!B,children:"Delete"})}),o(d,{id:"product",rowKey:"product_id",loading:S||x||I||N,rowSelection:F,columns:P,dataSource:b,pagination:!1,onChange:M,scroll:{y:A.height>670?400:200,x:1e3}})]})};export{ot as default};
