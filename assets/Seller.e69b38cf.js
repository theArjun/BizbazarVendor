import{aY as ge,r as l,a as be,ao as fe,b as t,a$ as ye,b0 as ve,j as n,v as Se}from"./index.4f23c09f.js";import{S as Ce,B as Ne,D as xe,F as Fe,G as we}from"./index.1a6fc416.js";import{A as z}from"./apiConfig.6fee151b.js";import{u as ke}from"./useQuery.esm.48f464b8.js";import{u as Ie}from"./useMutation.esm.62dcf3b9.js";import{n as $}from"./config.93562c2e.js";import{F as je}from"./index.87e32118.js";import{B as K}from"./button.0e0bb488.js";import{B as S}from"./Breadcrumb.1fc5972d.js";import{m as U}from"./index.ed593c0f.js";import{M as Oe}from"./index.2716beec.js";import"./axios.0a901153.js";import"./utils.esm.958af8f4.js";import"./render.a21f8e67.js";import"./useNotification.ddc3cd5c.js";import"./index.7a8128c4.js";import"./motion.9212238f.js";import"./isEqual.5405dd52.js";import"./useMergedState.a9c803d6.js";import"./collapse.7fea9198.js";import"./LoadingOutlined.ad18cc7b.js";import"./row.dbcb11e5.js";import"./useFlexGapSupport.3166aa6c.js";import"./responsiveObserve.16c01648.js";import"./Compact.8d51645f.js";import"./dropdown.c5450427.js";import"./RightOutlined.dab7e2a3.js";import"./Dropdown.af716b86.js";import"./Overflow.1804b708.js";import"./index.04eab99a.js";import"./PurePanel.01378a58.js";import"./DownOutlined.72f23fd5.js";import"./index.ba3281eb.js";import"./pickAttrs.08767335.js";const Be="_container_p06rh_1",Ge="_breadcrumb_create_btn_p06rh_23",Le="_tabContainer_p06rh_35",Me="_left_p06rh_47",Ae="_bgColor_p06rh_59",Ee="_button_p06rh_75",Pe="_tab_body_p06rh_97",Ve="_tab_body_right_p06rh_107",qe="_menu_list_p06rh_119",Qe="_statistic_list_p06rh_145",s={container:Be,breadcrumb_create_btn:Ge,tabContainer:Le,left:Me,bgColor:Ae,button:Ee,tab_body:Pe,tab_body_right:Ve,menu_list:qe,statistic_list:Qe},Te=()=>ke({queryKey:["seller_information"],queryFn:()=>z.get("Companies")}),He=()=>Ie({mutationFn:c=>z.post("Companies",c),onSuccess:c=>{$.success({message:"Your changes have been saved."})},onError:c=>{$.error({message:"Failed to save",description:c==null?void 0:c.message})}}),h=["General","Description","Logos","TermsAndConditions","Plan"],Nt=()=>{var j,O;const c=ge(),[C,N]=l.exports.useState("General"),[e,f]=l.exports.useState({}),[W,X]=l.exports.useState([]),[m,Z]=l.exports.useState(""),[y,x]=l.exports.useState({removed_image_pair_ids:{},logotypes_image_data:{theme:{type:"M",object_id:"",image_alt:""},mail:{type:"M",object_id:"",image_alt:""}},file_logotypes_image_icon:{theme:"",mail:""},type_logotypes_image_icon:{theme:"local",mail:"local"},is_high_res_logotypes_image_icon:{theme:"N",mail:"N"}}),[g,D]=l.exports.useState(""),[b,ee]=l.exports.useState(""),[u,te]=l.exports.useState(""),{data:i,isLoading:oe,isError:ie,error:d}=Te(),p=new FormData,v=be(),[F]=je.useForm(),{isLoading:ne,mutate:w}=He(),k=fe(),{confirm:se}=Oe;l.exports.useEffect(()=>{var o;(o=c==null?void 0:c.generalState)!=null&&o.plan&&N(h[4])},[c]),l.exports.useEffect(()=>{var o,a;X((o=i==null?void 0:i.data)==null?void 0:o.plans),f((a=i==null?void 0:i.data)==null?void 0:a.company_data),re()},[i]);const ae=o=>{},re=()=>{var a,_,r,B,G,L,M,A,E,P,V,q,Q,T,H,J,R,Y;let o={...y};o.logotypes_image_data.theme.image_alt=(G=(B=(r=(_=(a=i==null?void 0:i.data)==null?void 0:a.company_data)==null?void 0:_.logos)==null?void 0:r.theme)==null?void 0:B.image)==null?void 0:G.alt,o.logotypes_image_data.mail.image_alt=(P=(E=(A=(M=(L=i==null?void 0:i.data)==null?void 0:L.company_data)==null?void 0:M.logos)==null?void 0:A.mail)==null?void 0:E.image)==null?void 0:P.alt,o.logotypes_image_data.theme.object_id=(T=(Q=(q=(V=i==null?void 0:i.data)==null?void 0:V.company_data)==null?void 0:q.logos)==null?void 0:Q.theme)==null?void 0:T.logo_id,o.logotypes_image_data.mail.object_id=(Y=(R=(J=(H=i==null?void 0:i.data)==null?void 0:H.company_data)==null?void 0:J.logos)==null?void 0:R.mail)==null?void 0:Y.logo_id,x(o)},ce=()=>{};function me(){se({title:"Change plan!",content:"Do you want to change your plan?",onOk(){I()},onCancel(){}})}const le=o=>{let a=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return!!o.match(a)},de=o=>o.length===10,I=()=>{let o={...e},a={...y};if(delete o.logos,m)if(m.company&&m.phone&&m.email&&m.tax_number&&m.address&&m.city)if(le(m.email)&&de(m.phone)){let _={...a,company_id:e==null?void 0:e.company_id,company_data:{...o,...m,plan_id:u||(e==null?void 0:e.plan_id)}};p.append("company_data",JSON.stringify(_)),g&&p.append("theme",g),b&&p.append("mail",b);try{w(p,{onSuccess:r=>{k.invalidateQueries(["seller_information"])}})}catch(r){console.log(r)}}else U.error("Make sure your valid data");else U.error("Required fields can not be empty!");else{let _={...a,company_id:e==null?void 0:e.company_id,company_data:{...o,...m,plan_id:u||(e==null?void 0:e.plan_id)}};p.append("company_data",JSON.stringify(_)),g&&p.append("theme",g),b&&p.append("mail",b);try{w(p,{onSuccess:r=>{k.invalidateQueries(["seller_information"])},onError:r=>{console.log(r.message)}})}catch(r){console.log(r)}}},pe=()=>{var o;return(o=i==null?void 0:i.data)==null?void 0:o.company_data},_e=()=>{var a;return Object.entries(((a=i==null?void 0:i.data)==null?void 0:a.countries)||{}).map(([_,r])=>({label:r,value:_}))},ue=()=>{var o;return((o=i==null?void 0:i.data)==null?void 0:o.states)||{}},he=()=>{switch(C){case h[1]:return t(we,{sellerData:e,setSellerData:f});case h[2]:return t(Fe,{sellerData:e,setSellerData:f,logoData:y,setLogoData:x,customerImage:g,setCustomerImage:D,invoiceImage:b,setInvoiceImage:ee});case h[3]:return t(xe,{sellerData:e,setSellerData:f});case h[4]:return t(Ne,{plans:W||[],sellerData:e,changed:u,setChanged:te});default:return t(Ce,{vendorData:pe(),countries:_e(),states:ue(),setGeneral:Z,handleFormSubmit:ae,handleFinishFailed:ce,form:F})}};return oe||ne?t(ye,{}):ie?t(ve,{status:(j=d==null?void 0:d.response)==null?void 0:j.status,title:(O=d==null?void 0:d.response)==null?void 0:O.status,subTitle:d==null?void 0:d.message,extra:t(K,{type:"primary",onClick:()=>v("/"),children:"Back Home"})}):n("div",{className:s.container,children:[n("div",{className:s.breadcrumb_create_btn,children:[t("div",{className:s.breadcrumb,children:n(S,{children:[t(S.Item,{children:"Home"}),t(S.Item,{children:t("a",{href:"",children:"Seller information"})})]})}),t(K,{type:"primary",onClick:()=>u?me():I(F.submit()),children:"Save Changes"})]}),t("div",{className:s.tabContainer,children:t("div",{className:s.left,children:h.map((o,a)=>t("div",{className:Se(s.button,C===o?s.bgColor:null),onClick:()=>N(o),children:o},a))})}),n("div",{className:s.tab_body,children:[t("div",{className:s.tab_body_left,children:he()}),n("div",{className:s.tab_body_right,children:[n("div",{className:s.vendor_menu,children:[t("div",{className:s.menu_title,children:t("h4",{children:"Menu"})}),n("div",{className:s.menu_list,children:[t("div",{onClick:()=>v("../Products"),children:"View vendor products"}),t("div",{children:"View vendor admins"}),t("div",{onClick:()=>v("../Orders/View Orders"),children:"View vendor orders"})]})]}),n("div",{className:s.vendor_statistics,children:[t("div",{className:s.stat_title,children:t("h4",{children:"Vendor's statistics"})}),n("div",{className:s.statistic_list,children:[n("div",{children:[t("p",{children:"Balance"})," ",n("p",{children:["\u0930\u0941",e==null?void 0:e.balance]})]}),n("div",{children:[t("p",{children:"Orders"})," ",t("p",{children:e==null?void 0:e.orders_count})]}),n("div",{children:[t("p",{children:"Sales"})," ",n("p",{children:["\u0930\u0941",e!=null&&e.sales?e==null?void 0:e.sales:0]})]}),n("div",{children:[t("p",{children:"Income"})," ",n("p",{children:["\u0930\u0941",e==null?void 0:e.income]})]}),n("div",{children:[t("p",{children:"Active products"})," ",t("p",{children:e==null?void 0:e.products_count})]}),n("div",{children:[t("p",{children:"Out of stock"})," ",t("p",{children:e==null?void 0:e.out_of_stock})]})]})]})]})]})]})};export{Nt as default};
