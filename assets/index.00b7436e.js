import{i as O,k as S,l as D,q as $,r as o,b as M,s as j,o as A,L as W,a7 as H,U as q}from"./index.0eae6df2.js";import{i as F}from"./useMergedState.e128dcb1.js";var c=new Map;function K(e){e.forEach(function(n){var r,t=n.target;(r=c.get(t))===null||r===void 0||r.forEach(function(i){return i(t)})})}var I=new F(K);function T(e,n){c.has(e)||(c.set(e,new Set),I.observe(e)),c.get(e).add(n)}function U(e,n){c.has(e)&&(c.get(e).delete(n),c.get(e).size||(I.unobserve(e),c.delete(e)))}var V=function(e){O(r,e);var n=S(r);function r(){return D(this,r),n.apply(this,arguments)}return $(r,[{key:"render",value:function(){return this.props.children}}]),r}(o.exports.Component),g=o.exports.createContext(null);function X(e){var n=e.children,r=e.onBatchResize,t=o.exports.useRef(0),i=o.exports.useRef([]),s=o.exports.useContext(g),v=o.exports.useCallback(function(f,u,l){t.current+=1;var d=t.current;i.current.push({size:f,element:u,data:l}),Promise.resolve().then(function(){d===t.current&&(r==null||r(i.current),i.current=[])}),s==null||s(f,u,l)},[r,s]);return M(g.Provider,{value:v,children:n})}function Y(e){var n=e.children,r=e.disabled,t=o.exports.useRef(null),i=o.exports.useRef(null),s=o.exports.useContext(g),v=typeof n=="function",f=v?n(t):n,u=o.exports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),l=!v&&o.exports.isValidElement(f)&&j(f),d=l?f.ref:null,P=o.exports.useMemo(function(){return A(d,t)},[d,t]),C=o.exports.useRef(e);C.current=e;var m=o.exports.useCallback(function(a){var b=C.current,z=b.onResize,B=b.data,E=a.getBoundingClientRect(),R=E.width,x=E.height,h=a.offsetWidth,p=a.offsetHeight,_=Math.floor(R),k=Math.floor(x);if(u.current.width!==_||u.current.height!==k||u.current.offsetWidth!==h||u.current.offsetHeight!==p){var w={width:_,height:k,offsetWidth:h,offsetHeight:p};u.current=w;var L=h===Math.round(R)?R:h,N=p===Math.round(x)?x:p,y=W(W({},w),{},{offsetWidth:L,offsetHeight:N});s==null||s(y,a,B),z&&Promise.resolve().then(function(){z(y,a)})}},[]);return o.exports.useEffect(function(){var a=H(t.current)||H(i.current);return a&&!r&&T(a,m),function(){return U(a,m)}},[t.current,r]),M(V,{ref:i,children:l?o.exports.cloneElement(f,{ref:P}):f})}var G="rc-observer-key";function J(e){var n=e.children,r=typeof n=="function"?[n]:q(n);return r.map(function(t,i){var s=(t==null?void 0:t.key)||"".concat(G,"-").concat(i);return o.exports.createElement(Y,{...e,key:s},t)})}J.Collection=X;export{J as R};
