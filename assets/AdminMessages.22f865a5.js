import{a as L,r as d,u as F,ao as I,b as e,b0 as A,j as p}from"./index.4f23c09f.js";import{c as C,b as E}from"./MessageCenterApi.78cd82a8.js";import{F as m}from"./index.87e32118.js";import{B as u}from"./button.0e0bb488.js";import{I as R}from"./index.334a4467.js";import{T as j}from"./index.09489d84.js";import"./apiConfig.6fee151b.js";import"./axios.0a901153.js";import"./config.93562c2e.js";import"./render.a21f8e67.js";import"./useNotification.ddc3cd5c.js";import"./useInfiniteQuery.esm.7b143079.js";import"./useQuery.esm.48f464b8.js";import"./utils.esm.958af8f4.js";import"./useMutation.esm.62dcf3b9.js";import"./index.7a8128c4.js";import"./motion.9212238f.js";import"./isEqual.5405dd52.js";import"./useMergedState.a9c803d6.js";import"./collapse.7fea9198.js";import"./LoadingOutlined.ad18cc7b.js";import"./row.dbcb11e5.js";import"./useFlexGapSupport.3166aa6c.js";import"./responsiveObserve.16c01648.js";import"./Compact.8d51645f.js";import"./index.2687a7e4.js";import"./TextArea.5556322f.js";import"./index.04eab99a.js";import"./statusUtils.c3240a4a.js";import"./EyeOutlined.ac35e31d.js";import"./SearchOutlined.19f92cba.js";import"./CheckOutlined.a5fb0c39.js";import"./styleChecker.c75b564a.js";const B="_nav_top_ni0tp_1",k="_main_content_ni0tp_13",q="_message_container_ni0tp_21",H="_chat_ni0tp_41",O="_write_message_box_ni0tp_53",Q="_send_box_ni0tp_67",U="_buttons_ni0tp_83",z="_client_message_ni0tp_99",G="_your_message_ni0tp_121",i={nav_top:B,main_content:k,message_container:q,chat:H,write_message_box:O,send_box:Q,buttons:U,client_message:z,your_message:G},{Text:J}=j,{user_id:P}=JSON.parse(localStorage.getItem("userinfo")),Me=()=>{var l,g;const h=L(),[r,y]=d.exports.useState([]),{id:c}=F(),{data:n,isLoading:b,error:s,isError:f}=C(c),{mutate:x,isLoading:v}=E(),[_]=m.useForm(),S=I();d.exports.useEffect(()=>{T()},[n]);const N=t=>{const o=new Date(parseInt(t)*1e3),a=o.toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"}),w=o.toLocaleString("en-US",{hour:"2-digit",minute:"numeric"});return a+", "+w},T=()=>{var t;n!=null&&n.data&&y((t=n==null?void 0:n.data)==null?void 0:t.messages)};d.exports.useEffect(()=>{let t=document.querySelector("#chat_container");(a=>{a.scroll({top:a.scrollHeight})})(t)},[r]);const M=t=>{if(t.message){_.resetFields();let o={communication_type:"vendor_to_admin",message:{thread_id:c,message:t.message}};x(o,{onSuccess:a=>{S.invalidateQueries(["admin_messages",c])}})}};return f?e(A,{status:(l=s==null?void 0:s.response)==null?void 0:l.status,title:(g=s==null?void 0:s.response)==null?void 0:g.status,subTitle:s==null?void 0:s.message,extra:e(u,{type:"primary",onClick:()=>h("/"),children:"Back Home"})}):e("div",{className:i.messages,children:e("div",{children:e("div",{className:i.main_content,children:p("div",{className:i.message_container,children:[e("div",{id:"chat_container",className:i.chat,children:b?e("div",{children:"Loading..."}):r==null?void 0:r.map((t,o)=>e("div",{children:p("div",{className:t.user_id===P?i.your_message:i.client_message,children:[e("div",{children:t.message}),e(J,{type:"secondary",children:N(t.timestamp)})]})},o))}),e("div",{className:i.write_message_box,children:e(m,{form:_,onFinish:M,layout:"vertical",name:"basic",wrapperCol:{},autoComplete:"off",initialValues:"",children:p("div",{className:i.send_box,children:[e(m.Item,{name:"message",style:{width:"100%"},children:e(R,{style:{fontSize:"16px",borderRadius:"20px"},placeholder:"Type a message..."})}),e(m.Item,{children:e(u,{loading:v,htmlType:"submit",type:"default",style:{borderRadius:"20px"},children:e("b",{children:" Send"})})})]})})})]})})})})};export{Me as default};
