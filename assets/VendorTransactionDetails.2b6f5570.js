import{r as d,b as e,j as n,aU as k}from"./index.4f23c09f.js";import{u as T}from"./useDebounce.06723c1e.js";import{C as I}from"./index.cffb9cfd.js";import{I as D}from"./index.334a4467.js";import{D as C}from"./index.d5d17e06.js";import{l as N,C as P}from"./index.340e8250.js";import{T as b}from"./Table.7ae9acac.js";import{B as x}from"./button.0e0bb488.js";import{b as V}from"./ReportsApi.c3373ec4.js";import{B as y}from"./Breadcrumb.1fc5972d.js";import"./Dropdown.af716b86.js";import"./useMergedState.a9c803d6.js";import"./Overflow.1804b708.js";import"./index.04eab99a.js";import"./motion.9212238f.js";import"./isEqual.5405dd52.js";import"./PlusOutlined.1693ec3e.js";import"./index.2687a7e4.js";import"./Compact.8d51645f.js";import"./TextArea.5556322f.js";import"./statusUtils.c3240a4a.js";import"./EyeOutlined.ac35e31d.js";import"./SearchOutlined.19f92cba.js";import"./PurePanel.01378a58.js";import"./index.7a8128c4.js";import"./pickAttrs.08767335.js";import"./styleChecker.c75b564a.js";import"./css.d6e3059f.js";import"./index.421566c6.js";import"./CheckOutlined.a5fb0c39.js";import"./DownOutlined.72f23fd5.js";import"./LoadingOutlined.ad18cc7b.js";import"./Pagination.61534547.js";import"./LeftOutlined.04d83dae.js";import"./RightOutlined.dab7e2a3.js";import"./useForceUpdate.f84be2ca.js";import"./responsiveObserve.16c01648.js";import"./index.9fb36eb2.js";import"./index.48a55223.js";import"./dropdown.c5450427.js";import"./collapse.7fea9198.js";import"./useFlexGapSupport.3166aa6c.js";import"./index.c1ec313f.js";import"./apicall.3416e5db.js";import"./axios.0a901153.js";import"./config.93562c2e.js";import"./render.a21f8e67.js";import"./useNotification.ddc3cd5c.js";import"./apicall2.94c75d74.js";import"./useInfiniteQuery.esm.7b143079.js";import"./useQuery.esm.48f464b8.js";import"./utils.esm.958af8f4.js";const $="_container_1qg89_1",R={container:$},B="_container_178h8_1",L="_search_inputs_178h8_9",A="_price_container_178h8_21",E="_search_btn_178h8_55",M="_form_178h8_63",j="_formcolumn_178h8_83",q="_dropdownbutton_178h8_101",z="_icon_178h8_109",H="_flex_178h8_135",K="_datepicker_178h8_147",W="_date_178h8_147",F="_span_178h8_163",w={container:B,search_inputs:L,price_container:A,search_btn:E,form:M,formcolumn:j,dropdownbutton:q,icon:z,flex:H,datepicker:K,date:W,span:F};const{RangePicker:G}=C,U=({params:a,setParams:c})=>{const[s,m]=d.exports.useState("");T(()=>{let o={...a};o.vendor=s,c(o)},500,[s]);const l=o=>{var p,_,u,t,i,h;let r={...a};if(o){let f=new Date((p=o[0])==null?void 0:p.$y,(_=o[0])==null?void 0:_.$M,(u=o[0])==null?void 0:u.$D).getTime()/1e3,v=new Date((t=o[1])==null?void 0:t.$y,(i=o[1])==null?void 0:i.$M,(h=o[1])==null?void 0:h.$D).getTime()/1e3;r.time_from=f||"",r.time_to=v||""}else r.time_from="",r.time_to="";c(r)};return e("div",{className:w.container,id:"changeHere",children:e(I,{children:n("div",{className:w.formcolumn,children:[n("label",{children:["Vendor",e(D,{onChange:o=>m(o.target.value)})]}),n("label",{children:["Payout Date ",e("br",{}),e("div",{style:{display:"flex"},children:e(G,{style:{minWidth:"250px"},onChange:o=>l(o)})})]})]})})})},J="_product_info_sw05v_1",O="_product_name_sw05v_9",Q="_icons_sw05v_19",X="_order_status_sw05v_51",Y="_gross_total_sw05v_59",Z="_openSpinner_sw05v_67",tt="_closeSpinner_sw05v_75",ot="_positionabsolute_sw05v_83",et="_print_sw05v_95",nt="_margintop_sw05v_103",g={product_info:J,product_name:O,icons:Q,order_status:X,gross_total:Y,openSpinner:Z,closeSpinner:tt,positionabsolute:ot,print:et,margintop:nt},rt=({accountOrderDetails:a,loading:c,handleScroll:s})=>{const[m,l]=d.exports.useState(!1),o=k();d.exports.useEffect(()=>{var t;return(t=document.querySelector("#reportaccount > div > div.ant-table-body"))==null||t.addEventListener("scroll",s),()=>{var i;(i=document.querySelector("#reportaccount > div > div.ant-table-body "))==null||i.removeEventListener("scroll",s)}},[]);const r=d.exports.useRef(),p=[{title:"Vendor",dataIndex:"vendor",key:"vendor"},{title:"Vendor name",dataIndex:"vendor_name",key:"vendor_name"},{title:"Total order amount",dataIndex:"total_order_amount",key:"total_order_amount",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Commission",dataIndex:"commission",key:"commission",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Total shipping",dataIndex:"total_shipping",key:"total_shipping",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Total withdrawal",dataIndex:"total_withdrawal",key:"total_withdrawal",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Total payout addition",dataIndex:"total_payout_addition",key:"total_payout_addition",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Total payout deduction",dataIndex:"total_payout_deduction",key:"total_payout_deduction",render:t=>n("div",{children:["\u0930\u0941",t]})},{title:"Balance",dataIndex:"balance",key:"balance",render:t=>n("div",{children:["\u0930\u0941",t]})}],_=N.exports.useReactToPrint({content:()=>r.current,onAfterPrint:()=>l(!1)}),u=()=>{l(!0);const t=setTimeout(_,10);return()=>clearTimeout(t)};return n("div",{children:[e(b,{id:"reportaccount",columns:p,rowKey:"company_id",loading:c,dataSource:a,pagination:!1,scroll:{y:o.height>670?500:300,x:1500}}),n("div",{className:g.positionabsolute,children:[e(x,{className:g.print,onClick:u,children:"print"}),e(x,{children:e(P,{filename:"Expense_Table.csv",data:a,className:"btn btn-primary",onClick:()=>{},children:"Export to CSV"})})]}),m&&e("div",{className:g.margintop}),m&&e(b,{id:"reporprintTableaccount1",className:g.printTable,style:{zIndex:-1},columns:p,ref:r,rowKey:"order_id",loading:c,dataSource:a,pagination:!1})]})},it={time_from:"",time_to:"",vendor:""},ro=()=>{const[a,c]=d.exports.useState(it),[s,m]=d.exports.useState(!1),{isLoading:l,data:o,fetchNextPage:r,isFetchingNextPage:p}=V(a);let _=d.exports.useMemo(()=>{var i;let t=[];return(i=o==null?void 0:o.pages)==null||i.map(h=>{var f,v;(v=(f=h==null?void 0:h.data)==null?void 0:f.report)==null||v.map(S=>{t.push(S)})}),t||[]},[o]);const u=t=>{const i=t.target.scrollTop+t.target.offsetHeight+100>t.target.scrollHeight;m(i)};return T(()=>{!s||r()},300,[s]),n("div",{className:R.container,children:[n(y,{children:[e(y.Item,{children:"Reports"}),e(y.Item,{children:"Vendor Transaction Details"})]}),e(U,{params:a,setParams:c}),e(rt,{accountOrderDetails:_,handleScroll:u,loading:l||p})]})};export{ro as default};
