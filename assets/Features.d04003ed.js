import{r as P,ao as B,b as r,a$ as g,j as d}from"./index.0eae6df2.js";import{k as Q}from"./ProductApi.1a51d991.js";import{F as l}from"./index.9a251b5a.js";import{B as k}from"./button.bb92e4e7.js";import{C as y}from"./index.1b605c09.js";import{S as F}from"./index.c17da8cc.js";import"./apiConfig.422f7f8e.js";import"./axios.0a901153.js";import"./config.a608364a.js";import"./render.36f71972.js";import"./useNotification.b0fd12ef.js";import"./useMutation.esm.b9a3c183.js";import"./utils.esm.9d23a50b.js";import"./useInfiniteQuery.esm.39b60b71.js";import"./useQuery.esm.a226e4a2.js";import"./index.a53e5976.js";import"./motion.25de7d91.js";import"./isEqual.7557051f.js";import"./useMergedState.e128dcb1.js";import"./collapse.d7e28f1d.js";import"./LoadingOutlined.8c764613.js";import"./row.cc463873.js";import"./useFlexGapSupport.26f67e3e.js";import"./responsiveObserve.b22e885b.js";import"./Compact.394e1fff.js";import"./Dropdown.a44dcf86.js";import"./Overflow.0bb1c80c.js";import"./index.00b7436e.js";import"./PlusOutlined.bcf114a1.js";import"./pickAttrs.8c22c2db.js";import"./statusUtils.bdd687b0.js";import"./CheckOutlined.aebd02a2.js";import"./DownOutlined.0d88a6a7.js";import"./SearchOutlined.83cc36da.js";import"./PurePanel.6b30b4ea.js";const q="_electronics_title_hrg0r_1",A="_close_electro_hrg0r_11",E="_export_title_hrg0r_17",G={electronics_title:q,close_electro:A,export_title:E},ye=({features:m,selected_features:p,editID:_})=>{const[u,C]=P.exports.useState({product_features:p}),S=B(),{isLoading:h,mutateAsync:x}=Q(),[j]=l.useForm(),w=i=>{let e={product_id:_,...u};x(e,{onSuccess:()=>S.invalidateQueries(["single_product",String(_)])})},L=i=>{console.log("Failed:",i)},O=(i,e)=>{},f=(i,e)=>{e&&C({product_features:{...u.product_features,[e.feature]:{feature_type:e.type,value:"Feature updated",variant_id:e.value}}})},V=()=>{let i=m.filter(e=>e.feature_type=="G");return r("div",{children:i.map((e,s)=>d("div",{children:[r("h3",{children:e.description}),r(y,{children:Object.values(e.subfeatures).map((t,a)=>{var n;return r("div",{children:r(l.Item,{name:t==null?void 0:t.description,label:t==null?void 0:t.description,children:r(F,{showSearch:!0,defaultValue:(n=p[t==null?void 0:t.feature_id])==null?void 0:n.variant_id,onChange:f,optionFilterProp:"children",filterOption:(o,c)=>{var v;return((v=c==null?void 0:c.label)!=null?v:"").toLowerCase().includes(o.toLowerCase())},options:t.variants?Object.values(t.variants).map(o=>({label:o.variant,value:o.variant_id,feature:t.feature_id,type:o.feature_type})):[]})})},a)})})]},s))},"this is features")},I=()=>{let i=m.filter((e,s)=>e.feature_type=="S");return r(y,{children:i.map((e,s)=>{var t;return r("div",{children:r(l.Item,{name:e==null?void 0:e.internal_name,label:e==null?void 0:e.internal_name,children:r(F,{onChange:f,showSearch:!0,optionFilterProp:"children",defaultValue:(t=p[e==null?void 0:e.feature_id])==null?void 0:t.variant_id,filterOption:(a,n)=>{var o;return((o=n==null?void 0:n.label)!=null?o:"").toLowerCase().includes(a.toLowerCase())},options:Object.values(e.variants).map(a=>({label:a.variant,value:a.variant_id,feature:e.feature_id,type:a.feature_type}))})})},s)})})};return h?r(g,{}):d("div",{className:G.feature_container,children:[h?r(g,{}):"",d(l,{form:j,name:"features",onFinish:w,onFinishFailed:L,autoComplete:"off",onValuesChange:O,children:[r(l.Item,{style:{float:"right"},children:r(k,{type:"primary",htmlType:"submit",children:"Save changes"})}),r("br",{}),r("br",{}),I(),r("div",{children:V()})]})]})};export{ye as default};
