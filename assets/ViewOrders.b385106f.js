import{r as o,j as b,b as s}from"./index.0eae6df2.js";import{V as q,b as C}from"./index.c2342435.js";import{a as l}from"./apicall.28ee9ed9.js";import{u as D}from"./useDebounce.2d8db3a6.js";import{B as p}from"./Breadcrumb.3e55c3b1.js";import"./axios.0a901153.js";import"./config.a608364a.js";import"./render.36f71972.js";import"./useNotification.b0fd12ef.js";import"./dropdown.04f8b523.js";import"./RightOutlined.44374471.js";import"./Dropdown.a44dcf86.js";import"./useMergedState.e128dcb1.js";import"./Overflow.0bb1c80c.js";import"./index.00b7436e.js";import"./motion.25de7d91.js";import"./isEqual.7557051f.js";import"./PurePanel.6b30b4ea.js";import"./index.a53e5976.js";import"./collapse.d7e28f1d.js";import"./button.bb92e4e7.js";import"./Compact.394e1fff.js";import"./LoadingOutlined.8c764613.js";import"./useFlexGapSupport.26f67e3e.js";import"./DownOutlined.0d88a6a7.js";const U="_container_yryvz_1",$={container:U},at=()=>{const[n,O]=o.exports.useState({}),[h,w]=o.exports.useState([]),[m,f]=o.exports.useState([]),[V,a]=o.exports.useState(!1),c=o.exports.useRef(1),[x,y]=o.exports.useState({open:!1,data:{},orderId:null}),[e,E]=o.exports.useState(""),[j,I]=o.exports.useState(""),[S,T]=o.exports.useState(!1),H=Object.values(n).join("");o.exports.useEffect(()=>{var t;return(t=document.querySelector("#hello > div > div.ant-table-body"))==null||t.addEventListener("scroll",g),()=>{var r;(r=document.querySelector("#hello > div > div.ant-table-body "))==null||r.removeEventListener("scroll",g)}},[]);const g=t=>{const r=t.target.scrollTop+t.target.offsetHeight+100>t.target.scrollHeight;T(r)};D(()=>{c.current=1,u(n)},1200,[H]),o.exports.useEffect(()=>{L()},[]),o.exports.useEffect(()=>{u(n)},[x.open,e==null?void 0:e.order,e==null?void 0:e.field]);const L=async()=>{const t=await l({url:"statuses"});w(t.data.statuses)},_=t=>{console.log(n);let r="orders?is_search=Y";if(t!=null&&t.customer&&(r=r+"&cname="+t.customer),t!=null&&t.email&&(r=r+"&email="+t.email),t!=null&&t.phone&&(r=r+"&phone="+t.phone),t!=null&&t.max_price&&(r=r+"&total_to="+t.max_price),t!=null&&t.orderid&&(r=r+"&order_id="+t.orderid),t!=null&&t.min_price&&(r=r+"&total_from="+t.min_price),e!=null&&e.order){const i=(e==null?void 0:e.order)==="ascend"?"asc":"desc";r=r+"&sort_order="+i;const d=(e==null?void 0:e.field)==="order_id"?"order":"date";r=r+"&sort_by="+d}return r+`&page=${c.current}&items_per_page=${50}`},u=async t=>{var i;a(!0);const r=await l({url:_(t)});f((i=r==null?void 0:r.data)==null?void 0:i.orders),a(!1)},M=async t=>{a(!0);const r=await l({url:_(t)});f(i=>{var d;return[...i,...(d=r==null?void 0:r.data)==null?void 0:d.orders]}),a(!1)};return o.exports.useEffect(()=>{m.length<50||!S||(c.current=c.current+1,M(n))},[S]),b("div",{className:$.container,children:[b(p,{children:[s(p.Item,{children:"Home"}),s(p.Item,{children:s("a",{href:"",children:"Orders"})}),s(p.Item,{children:"View Orders"})]}),s(q,{order:m,status:h,setSearchValue:O}),s(C,{order:m,status:h,page1:c,statusModalOpen:x,setStatusModalOpen:y,sortBy:e,sortColum:j,setSortingColum:I,setSortBy:E,setOrder:f,loading:V})]})};export{at as default};
