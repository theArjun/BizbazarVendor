import{r as o,j as b,b as s}from"./index.559c1fcf.js";import{V as q,b as C}from"./index.cfd97402.js";import{a as l}from"./apicall.a45120ef.js";import{u as D}from"./useDebounce.34ba1d43.js";import{B as p}from"./Breadcrumb.a0c48c79.js";import"./axios.0a901153.js";import"./config.d6ac9ea8.js";import"./render.6e9f9fbc.js";import"./useNotification.530e6546.js";import"./dropdown.496de808.js";import"./RightOutlined.6508ce6f.js";import"./Dropdown.40e49efe.js";import"./useMergedState.e59004d6.js";import"./Overflow.0ae650b7.js";import"./index.800256bd.js";import"./motion.c94e2116.js";import"./isEqual.5b0c1f76.js";import"./PurePanel.4b452415.js";import"./index.02299b94.js";import"./collapse.4ef0eee8.js";import"./button.c49f6243.js";import"./Compact.e0a86bbb.js";import"./LoadingOutlined.65af6f9d.js";import"./useFlexGapSupport.39a8fd32.js";import"./DownOutlined.218b67e6.js";const U="_container_yryvz_1",$={container:U},at=()=>{const[n,O]=o.exports.useState({}),[h,w]=o.exports.useState([]),[m,f]=o.exports.useState([]),[V,a]=o.exports.useState(!1),c=o.exports.useRef(1),[x,y]=o.exports.useState({open:!1,data:{},orderId:null}),[e,E]=o.exports.useState(""),[j,I]=o.exports.useState(""),[S,T]=o.exports.useState(!1),H=Object.values(n).join("");o.exports.useEffect(()=>{var t;return(t=document.querySelector("#hello > div > div.ant-table-body"))==null||t.addEventListener("scroll",g),()=>{var r;(r=document.querySelector("#hello > div > div.ant-table-body "))==null||r.removeEventListener("scroll",g)}},[]);const g=t=>{const r=t.target.scrollTop+t.target.offsetHeight+100>t.target.scrollHeight;T(r)};D(()=>{c.current=1,u(n)},1200,[H]),o.exports.useEffect(()=>{L()},[]),o.exports.useEffect(()=>{u(n)},[x.open,e==null?void 0:e.order,e==null?void 0:e.field]);const L=async()=>{const t=await l({url:"statuses"});w(t.data.statuses)},_=t=>{console.log(n);let r="orders?is_search=Y";if(t!=null&&t.customer&&(r=r+"&cname="+t.customer),t!=null&&t.email&&(r=r+"&email="+t.email),t!=null&&t.phone&&(r=r+"&phone="+t.phone),t!=null&&t.max_price&&(r=r+"&total_to="+t.max_price),t!=null&&t.orderid&&(r=r+"&order_id="+t.orderid),t!=null&&t.min_price&&(r=r+"&total_from="+t.min_price),e!=null&&e.order){const i=(e==null?void 0:e.order)==="ascend"?"asc":"desc";r=r+"&sort_order="+i;const d=(e==null?void 0:e.field)==="order_id"?"order":"date";r=r+"&sort_by="+d}return r+`&page=${c.current}&items_per_page=${50}`},u=async t=>{var i;a(!0);const r=await l({url:_(t)});f((i=r==null?void 0:r.data)==null?void 0:i.orders),a(!1)},M=async t=>{a(!0);const r=await l({url:_(t)});f(i=>{var d;return[...i,...(d=r==null?void 0:r.data)==null?void 0:d.orders]}),a(!1)};return o.exports.useEffect(()=>{m.length<50||!S||(c.current=c.current+1,M(n))},[S]),b("div",{className:$.container,children:[b(p,{children:[s(p.Item,{children:"Home"}),s(p.Item,{children:s("a",{href:"",children:"Orders"})}),s(p.Item,{children:"View Orders"})]}),s(q,{order:m,status:h,setSearchValue:O}),s(C,{order:m,status:h,page1:c,statusModalOpen:x,setStatusModalOpen:y,sortBy:e,sortColum:j,setSortingColum:I,setSortBy:E,setOrder:f,loading:V})]})};export{at as default};
