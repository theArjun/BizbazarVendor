import{r as a,j as m,X as A,b as o,v as G}from"./index.4f23c09f.js";import{x as j,y as W,z as k}from"./index.1a6fc416.js";import{a as I}from"./apicall.3416e5db.js";import{B as _}from"./Breadcrumb.1fc5972d.js";import{B as O}from"./button.0e0bb488.js";import{m as T}from"./index.ed593c0f.js";import"./axios.0a901153.js";import"./config.93562c2e.js";import"./render.a21f8e67.js";import"./useNotification.ddc3cd5c.js";import"./dropdown.c5450427.js";import"./RightOutlined.dab7e2a3.js";import"./Dropdown.af716b86.js";import"./useMergedState.a9c803d6.js";import"./Overflow.1804b708.js";import"./index.04eab99a.js";import"./motion.9212238f.js";import"./isEqual.5405dd52.js";import"./PurePanel.01378a58.js";import"./index.7a8128c4.js";import"./collapse.7fea9198.js";import"./Compact.8d51645f.js";import"./useFlexGapSupport.3166aa6c.js";import"./DownOutlined.72f23fd5.js";import"./LoadingOutlined.ad18cc7b.js";const $="_tabWrapper_8bw5q_1",z="_tab_8bw5q_1",F="_bgColor_8bw5q_33",J="_container_8bw5q_51",M="_tabcontain_8bw5q_69",V="_breadcumb_8bw5q_75",r={tabWrapper:$,tab:z,bgColor:F,container:J,tabcontain:M,breadcumb:V};function gt(){const[u,w]=a.exports.useState("General"),[b,x]=a.exports.useState([]),[g,y]=a.exports.useState([]),[c,v]=a.exports.useState(""),[N,p]=a.exports.useState(!1),[i,S]=a.exports.useState({zone:"catalog",name:"",detailed_description:"",short_description:"",from_date:0,to_date:0,priority:0,stop_other_rules:"N",status:"A"}),[f,B]=a.exports.useState({set:"all",set_value:1}),D=()=>{switch(u){case"General":return o(k,{image:c,setImage:v,generalData:i,setGeneralData:S});case"Conditions":return o(W,{conditions:g,setConditions:y,conditionValues:f,setConditionValues:B});default:return o(j,{bonuses:b,setBonuses:x})}},P=async()=>{if(i.name){p(!0);const t=new FormData;let e={promo_main_image_data:{0:{pair_id:"",type:"M",object_id:"0",image_alt:""}},file_promo_main_image_icon:{0:"promo_main"},type_promo_main_image_icon:{0:"local"},is_high_res_promo_main_image_icon:{0:"N"}},C=g.reduce((n,l,d)=>(n[d+1]={...l},n),{}),q=b.reduce((n,l,d)=>(n[d]={...l},n),{}),s={promotion_id:0,promotion_data:{...i,from_date:h(i.from_date),to_date:h(i.to_date),bonuses:{...q},conditions:{...f,conditions:{...C}}}};c&&(t.append("file",c),s={...s,...e}),t.append("promotion_data",JSON.stringify(s)),await I({url:"Promotions",method:"post",data:t,headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":!0}})&&p(!1),p(!1)}else T.error("Name is necessary to create a promotion.")},h=t=>{if(t){let e=t.split("-");return`${e[2]}/${e[1]}/${e[0]}`}};return m(A.Fragment,{children:[m("div",{className:r.breadcumb,children:[m(_,{children:[o(_.Item,{children:"Marketing"}),o(_.Item,{children:o("a",{href:"",children:"Add Catalog Promotion"})})]}),o(O,{loading:N,onClick:P,type:"primary",children:"Create promotion"})]}),m("div",{className:r.container,children:[o("div",{className:r.tabWrapper,children:["General","Conditions","Bonuses"].map((t,e)=>o("div",{className:G(r.tab,t===u?r.bgColor:null),onClick:()=>w(t),children:t},e))}),o("div",{className:r.tabcontain,children:D()})]})]})}export{gt as default};
