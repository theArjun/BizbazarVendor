import{r as P,ao as B,b as r,a$ as g,j as d}from"./index.774ea3ea.js";import{k as Q}from"./ProductApi.234be05e.js";import{F as l}from"./index.2fdd8f43.js";import{B as k}from"./button.1c6eda25.js";import{C as y}from"./index.debb8753.js";import{S as F}from"./index.f4539c3d.js";import"./apiConfig.2a32373e.js";import"./axios.0a901153.js";import"./config.54eb1656.js";import"./render.66f9535e.js";import"./useNotification.934e0e3b.js";import"./useMutation.esm.c151e619.js";import"./utils.esm.82fab7d4.js";import"./useInfiniteQuery.esm.23b2a444.js";import"./useQuery.esm.ae6f238b.js";import"./index.26751f43.js";import"./motion.300408ad.js";import"./isEqual.4659e5de.js";import"./useMergedState.18b5b371.js";import"./collapse.bedc836d.js";import"./LoadingOutlined.732e1375.js";import"./row.114180a0.js";import"./useFlexGapSupport.f6cd5e9f.js";import"./responsiveObserve.84e4b503.js";import"./Compact.c162d62d.js";import"./Dropdown.9bafc5f9.js";import"./Overflow.bc908490.js";import"./index.40d7e5d1.js";import"./PlusOutlined.4da0bfe2.js";import"./pickAttrs.087993c3.js";import"./statusUtils.d5af00d6.js";import"./CheckOutlined.70cf6153.js";import"./DownOutlined.719ce519.js";import"./SearchOutlined.16cec939.js";import"./PurePanel.f27248d0.js";const q="_electronics_title_hrg0r_1",A="_close_electro_hrg0r_11",E="_export_title_hrg0r_17",G={electronics_title:q,close_electro:A,export_title:E},ye=({features:m,selected_features:p,editID:_})=>{const[u,C]=P.exports.useState({product_features:p}),S=B(),{isLoading:h,mutateAsync:x}=Q(),[j]=l.useForm(),w=i=>{let e={product_id:_,...u};x(e,{onSuccess:()=>S.invalidateQueries(["single_product",String(_)])})},L=i=>{console.log("Failed:",i)},O=(i,e)=>{},f=(i,e)=>{e&&C({product_features:{...u.product_features,[e.feature]:{feature_type:e.type,value:"Feature updated",variant_id:e.value}}})},V=()=>{let i=m.filter(e=>e.feature_type=="G");return r("div",{children:i.map((e,s)=>d("div",{children:[r("h3",{children:e.description}),r(y,{children:Object.values(e.subfeatures).map((t,a)=>{var n;return r("div",{children:r(l.Item,{name:t==null?void 0:t.description,label:t==null?void 0:t.description,children:r(F,{showSearch:!0,defaultValue:(n=p[t==null?void 0:t.feature_id])==null?void 0:n.variant_id,onChange:f,optionFilterProp:"children",filterOption:(o,c)=>{var v;return((v=c==null?void 0:c.label)!=null?v:"").toLowerCase().includes(o.toLowerCase())},options:t.variants?Object.values(t.variants).map(o=>({label:o.variant,value:o.variant_id,feature:t.feature_id,type:o.feature_type})):[]})})},a)})})]},s))},"this is features")},I=()=>{let i=m.filter((e,s)=>e.feature_type=="S");return r(y,{children:i.map((e,s)=>{var t;return r("div",{children:r(l.Item,{name:e==null?void 0:e.internal_name,label:e==null?void 0:e.internal_name,children:r(F,{onChange:f,showSearch:!0,optionFilterProp:"children",defaultValue:(t=p[e==null?void 0:e.feature_id])==null?void 0:t.variant_id,filterOption:(a,n)=>{var o;return((o=n==null?void 0:n.label)!=null?o:"").toLowerCase().includes(a.toLowerCase())},options:Object.values(e.variants).map(a=>({label:a.variant,value:a.variant_id,feature:e.feature_id,type:a.feature_type}))})})},s)})})};return h?r(g,{}):d("div",{className:G.feature_container,children:[h?r(g,{}):"",d(l,{form:j,name:"features",onFinish:w,onFinishFailed:L,autoComplete:"off",onValuesChange:O,children:[r(l.Item,{style:{float:"right"},children:r(k,{type:"primary",htmlType:"submit",children:"Save changes"})}),r("br",{}),r("br",{}),I(),r("div",{children:V()})]})]})};export{ye as default};
