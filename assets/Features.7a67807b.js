import{r as P,ao as B,b as r,a$ as g,j as d}from"./index.4f23c09f.js";import{k as Q}from"./ProductApi.ec9e3999.js";import{F as l}from"./index.87e32118.js";import{B as k}from"./button.0e0bb488.js";import{C as y}from"./index.cffb9cfd.js";import{S as F}from"./index.421566c6.js";import"./apiConfig.6fee151b.js";import"./axios.0a901153.js";import"./config.93562c2e.js";import"./render.a21f8e67.js";import"./useNotification.ddc3cd5c.js";import"./useMutation.esm.62dcf3b9.js";import"./utils.esm.958af8f4.js";import"./useInfiniteQuery.esm.7b143079.js";import"./useQuery.esm.48f464b8.js";import"./index.7a8128c4.js";import"./motion.9212238f.js";import"./isEqual.5405dd52.js";import"./useMergedState.a9c803d6.js";import"./collapse.7fea9198.js";import"./LoadingOutlined.ad18cc7b.js";import"./row.dbcb11e5.js";import"./useFlexGapSupport.3166aa6c.js";import"./responsiveObserve.16c01648.js";import"./Compact.8d51645f.js";import"./Dropdown.af716b86.js";import"./Overflow.1804b708.js";import"./index.04eab99a.js";import"./PlusOutlined.1693ec3e.js";import"./pickAttrs.08767335.js";import"./statusUtils.c3240a4a.js";import"./CheckOutlined.a5fb0c39.js";import"./DownOutlined.72f23fd5.js";import"./SearchOutlined.19f92cba.js";import"./PurePanel.01378a58.js";const q="_electronics_title_hrg0r_1",A="_close_electro_hrg0r_11",E="_export_title_hrg0r_17",G={electronics_title:q,close_electro:A,export_title:E},ye=({features:m,selected_features:p,editID:_})=>{const[u,C]=P.exports.useState({product_features:p}),S=B(),{isLoading:h,mutateAsync:x}=Q(),[j]=l.useForm(),w=i=>{let e={product_id:_,...u};x(e,{onSuccess:()=>S.invalidateQueries(["single_product",String(_)])})},L=i=>{console.log("Failed:",i)},O=(i,e)=>{},f=(i,e)=>{e&&C({product_features:{...u.product_features,[e.feature]:{feature_type:e.type,value:"Feature updated",variant_id:e.value}}})},V=()=>{let i=m.filter(e=>e.feature_type=="G");return r("div",{children:i.map((e,s)=>d("div",{children:[r("h3",{children:e.description}),r(y,{children:Object.values(e.subfeatures).map((t,a)=>{var n;return r("div",{children:r(l.Item,{name:t==null?void 0:t.description,label:t==null?void 0:t.description,children:r(F,{showSearch:!0,defaultValue:(n=p[t==null?void 0:t.feature_id])==null?void 0:n.variant_id,onChange:f,optionFilterProp:"children",filterOption:(o,c)=>{var v;return((v=c==null?void 0:c.label)!=null?v:"").toLowerCase().includes(o.toLowerCase())},options:t.variants?Object.values(t.variants).map(o=>({label:o.variant,value:o.variant_id,feature:t.feature_id,type:o.feature_type})):[]})})},a)})})]},s))},"this is features")},I=()=>{let i=m.filter((e,s)=>e.feature_type=="S");return r(y,{children:i.map((e,s)=>{var t;return r("div",{children:r(l.Item,{name:e==null?void 0:e.internal_name,label:e==null?void 0:e.internal_name,children:r(F,{onChange:f,showSearch:!0,optionFilterProp:"children",defaultValue:(t=p[e==null?void 0:e.feature_id])==null?void 0:t.variant_id,filterOption:(a,n)=>{var o;return((o=n==null?void 0:n.label)!=null?o:"").toLowerCase().includes(a.toLowerCase())},options:Object.values(e.variants).map(a=>({label:a.variant,value:a.variant_id,feature:e.feature_id,type:a.feature_type}))})})},s)})})};return h?r(g,{}):d("div",{className:G.feature_container,children:[h?r(g,{}):"",d(l,{form:j,name:"features",onFinish:w,onFinishFailed:L,autoComplete:"off",onValuesChange:O,children:[r(l.Item,{style:{float:"right"},children:r(k,{type:"primary",htmlType:"submit",children:"Save changes"})}),r("br",{}),r("br",{}),I(),r("div",{children:V()})]})]})};export{ye as default};
