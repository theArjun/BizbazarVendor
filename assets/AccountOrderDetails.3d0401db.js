import{r as s,b as n,j as d,aU as Y,a as K,F as w}from"./index.774ea3ea.js";import{a as k}from"./apicall2.e45f6879.js";import{u as W}from"./useDebounce.1afc85d0.js";import{a as J}from"./apicall.886edec7.js";import{C as Q}from"./index.debb8753.js";import{I as E}from"./index.39e4b2c8.js";import{S as P}from"./index.f4539c3d.js";import{D as R}from"./index.bcd0b5f4.js";import{R as M}from"./index.4645b33d.js";import{l as X,C as Z}from"./index.5c6a01cc.js";import{T as U}from"./Table.41afa7f4.js";import{B as L}from"./button.1c6eda25.js";import{B as O}from"./Breadcrumb.97460a59.js";import"./axios.0a901153.js";import"./config.54eb1656.js";import"./render.66f9535e.js";import"./useNotification.934e0e3b.js";import"./Dropdown.9bafc5f9.js";import"./useMergedState.18b5b371.js";import"./Overflow.bc908490.js";import"./index.40d7e5d1.js";import"./motion.300408ad.js";import"./isEqual.4659e5de.js";import"./PlusOutlined.4da0bfe2.js";import"./index.0d78aa55.js";import"./Compact.c162d62d.js";import"./TextArea.119a5545.js";import"./statusUtils.d5af00d6.js";import"./EyeOutlined.700862bb.js";import"./SearchOutlined.16cec939.js";import"./pickAttrs.087993c3.js";import"./CheckOutlined.70cf6153.js";import"./DownOutlined.719ce519.js";import"./LoadingOutlined.732e1375.js";import"./PurePanel.f27248d0.js";import"./index.26751f43.js";import"./index.15a5cbb2.js";import"./styleChecker.bcd3295e.js";import"./css.d6e3059f.js";import"./Pagination.43e6bda7.js";import"./LeftOutlined.de95bfb5.js";import"./RightOutlined.e389cfa8.js";import"./useForceUpdate.0ca03680.js";import"./responsiveObserve.84e4b503.js";import"./index.23d5fe28.js";import"./dropdown.adcd444c.js";import"./collapse.bedc836d.js";import"./useFlexGapSupport.f6cd5e9f.js";const B="_container_1qg89_1",V={container:B},tt="_container_178h8_1",et="_search_inputs_178h8_9",ot="_price_container_178h8_21",nt="_search_btn_178h8_55",rt="_form_178h8_63",at="_formcolumn_178h8_83",it="_dropdownbutton_178h8_101",st="_icon_178h8_109",ct="_flex_178h8_135",dt="_datepicker_178h8_147",lt="_date_178h8_147",pt="_span_178h8_163",T={container:tt,search_inputs:et,price_container:ot,search_btn:nt,form:rt,formcolumn:at,dropdownbutton:it,icon:st,flex:ct,datepicker:dt,date:lt,span:pt};const mt=({setSearchValue:l,sValue:a,setLoad:b,setDload:y,setRadio:u,radio:m,page1:f})=>{const[v,x]=s.exports.useState([]);s.exports.useEffect(()=>{h()},[]);const h=async()=>{const i=await J({url:"payments"});x(i.data.payments)};return n("div",{className:T.container,id:"changeHere",children:n(Q,{children:d("div",{className:T.formcolumn,children:[d("label",{children:["Order No.",n(E,{type:"number",value:a==null?void 0:a.orderno,onChange:i=>l({...a,orderno:i.target.value})})]}),d("label",{children:["Customer",n(E,{type:"text",value:a==null?void 0:a.customername,onChange:i=>l({...a,customername:i.target.value})})]}),d("label",{children:["Customer phone",n(E,{type:"number",value:a==null?void 0:a.customerphone,onChange:i=>l({...a,customerphone:i.target.value})})]}),d("label",{children:["Payment method",n(P,{defaultValue:"",style:{width:"100%"},onChange:i=>{l({...a,paymentmethod:i})},options:[{value:"",label:"Select PaymentMethod "},...v.map(i=>({value:i.payment_id,label:i.payment}))]})]}),d("label",{children:[n("div",{children:"Account Status"}),n(P,{defaultValue:"",style:{width:"100%"},onChange:i=>l({...a,accountstatus:i}),options:[{value:"",label:"Select Account Status "},{value:"Paid",label:"Paid"},{value:"Pending",label:"Pending"}]})]}),d("label",{children:["RangePicker ",n("br",{}),d("div",{style:{display:"flex"},children:[n(R,{className:T.date,onChange:(i,r)=>{const p=a;p.startDate=r,y(g=>!g)}}),"-",n(R,{className:T.date,onChange:(i,r)=>{const p=a;p.endDate=r,l(p),y(g=>!g)}})]})]}),d("span",{className:T.span,children:[n("div",{children:" Order date"}),d("div",{style:{display:"flex"},children:[d(M,{value:"O",checked:m==="O",onClick:()=>{u("O"),f.current=1},children:["Order Created Date"," "]}),n(M,{value:"S",checked:m==="S",onClick:()=>{u("S"),f.current=1},children:"Settlement Date"})]})]})]})})})},_t="_product_info_sw05v_1",ut="_product_name_sw05v_9",ft="_icons_sw05v_19",ht="_order_status_sw05v_51",gt="_gross_total_sw05v_59",St="_openSpinner_sw05v_67",yt="_closeSpinner_sw05v_75",xt="_positionabsolute_sw05v_83",bt="_print_sw05v_95",vt="_margintop_sw05v_103",D={product_info:_t,product_name:ut,icons:ft,order_status:ht,gross_total:gt,openSpinner:St,closeSpinner:yt,positionabsolute:xt,print:bt,margintop:vt},Tt=({accountOrderDetails:l,loading:a})=>{const b=Y(),[y,u]=s.exports.useState(!1),m=s.exports.useRef(),f=K(),v=r=>{const p=new Date(parseInt(r)*1e3),g=p.toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"}),S=p.toLocaleString("en-US",{hour:"2-digit",minute:"numeric"});return g+", "+S},x=[{title:"Date And Time",dataIndex:"timestamp",key:"order_id",render:r=>v(r),sorter:(r,p)=>{}},{title:"Order Id",dataIndex:"order_id",key:"status_id",render:(r,p)=>d("div",{onClick:()=>f(`/Orders/orders details/${p.order_id}`),style:{color:"blue",cursor:"pointer"},children:["#",r]}),width:140,sorter:(r,p)=>{}},{title:"CUSTOMER",dataIndex:"customer",key:"order_id",render:(r,p)=>n("div",{children:r})},{title:"TOTAL ORDER VALUE",dataIndex:"subtotal"},{title:"Status",dataIndex:"statuses",key:"order_id",width:100},{title:"Phone",dataIndex:"phone",key:"order_id"},{title:"PAYMENT METHOD",dataIndex:"payment_method",key:"order_id"},{title:"SHIPMENT AMOUNT",dataIndex:"shipping_cost",key:"order_id"},{title:"VENDOR PAYABLE AMOUNT",dataIndex:"vendor_payable_amount",key:"order_id"},{title:"REMAINING AMOUNT",dataIndex:"remaining_amount",key:"order_id"},{title:"GIFT CARD AMOUNT USED",dataIndex:"gift_card_amount_used",render:r=>n(w,{children:r||0})},{title:"PRODUCT NAME",dataIndex:"product_name",render:r=>n(w,{children:r})},{title:"PRODUCT CATEGORY",dataIndex:"product_category"},{title:"SETTLEMENT STATUS",dataIndex:"settlement_status"},{title:"SETTLEMENT DATE",dataIndex:"settlement_date"},{title:"CASH VENDOR SETTLEMENT",dataIndex:"cash_vendor_settlement"}],h=X.exports.useReactToPrint({content:()=>m.current,onAfterPrint:()=>u(!1)}),i=()=>{u(!0);const r=setTimeout(h,10);return()=>clearTimeout(r)};return d("div",{children:[n(U,{id:"reportaccount",columns:x,rowKey:"order_id",loading:a,dataSource:l,pagination:!1,scroll:{y:b.height>670?500:300,x:2500}}),d("div",{className:D.positionabsolute,children:[n(L,{className:D.print,onClick:i,children:"print"}),n(L,{children:n(Z,{filename:"Expense_Table.csv",data:l,className:"btn btn-primary",onClick:()=>{},children:"Export to CSV"})})]}),y&&n("div",{className:D.margintop}),y&&n(U,{id:"reporprintTableaccount1",className:D.printTable,style:{zIndex:-1},columns:x,ref:m,rowKey:"order_id",dataSource:l,pagination:!1})]})},Se=()=>{const[l,a]=s.exports.useState({}),[b,y]=s.exports.useState([]),[u,m]=s.exports.useState([]),[f,v]=s.exports.useState("O"),[x,h]=s.exports.useState(!1),[i,r]=s.exports.useState(!1),[p,g]=s.exports.useState(!1),S=s.exports.useRef(1),[c,H]=s.exports.useState(""),[$,j]=s.exports.useState(""),[A,q]=s.exports.useState(!1),z=Object.values(l).join("");W(()=>{N()},1200,[z,p]),s.exports.useEffect(()=>{var e;return(e=document.querySelector("#reportaccount > div > div.ant-table-body"))==null||e.addEventListener("scroll",C),()=>{var o;(o=document.querySelector("#reportaccount > div > div.ant-table-body "))==null||o.removeEventListener("scroll",C)}},[]);const C=e=>{const o=e.target.scrollTop+e.target.offsetHeight+100>e.target.scrollHeight;q(o)};s.exports.useEffect(()=>{N()},[i,c==null?void 0:c.order,c==null?void 0:c.field,f]);const I=e=>{let o=!0,t="?";if(e.orderno&&e.orderno.length>0&&(o||(t=t+"&"),t=t+"order_id="+e.orderno,o=!1),e.customername&&e.customername.length>0&&(o||(t=t+"&"),t=t+"customer="+e.customername,o=!1),e.customerphone&&e.customerphone.length>0&&(o||(t=t+"&"),t=t+"phone="+e.customerphone,o=!1),e.paymentmethod&&e.paymentmethod.length>0&&(o||(t=t+"&"),t=t+"payment_id="+e.paymentmethod,o=!1),e.accountstatus&&e.accountstatus.length>0&&(o||(t=t+"&"),t=t+"account_status="+e.accountstatus,o=!1),e.startDate&&e.startDate.length>1){o||(t=t+"&");let _=e.startDate.split("-");t=t+"time_from="+_[2]+"/"+_[1]+"/"+_[0],o=!1}if(e.endDate&&e.endDate.length>1){o||(t=t+"&");let _=e.endDate.split("-");t=t+"time_to="+ +_[2]+"/"+_[1]+"/"+_[0],o=!1}if(c!=null&&c.order){o||(t=t+"&");const _=(c==null?void 0:c.order)==="ascend"?"asc":"desc";t=t+"sort_order="+_,o=!1;const G=c==null?void 0:c.field;o||(t=t+"&"),t=t+"sort_by="+G,o=!1}return o||(t=t+"&"),t=t+"filter_date="+f,t+`&page=${S.current}&items_per_page=${50}`},N=async()=>{h(!0);const e=await k({preurl:"AccountOrderDetail",posturl:I(l)});(e==null?void 0:e.status)===200&&m(e.data),h(!1)};s.exports.useEffect(()=>{u.length<50||!A||(S.current=S.current+1,F())},[A]);const F=async()=>{h(!0);const e=await k({preurl:"AccountOrderDetail",posturl:I(l)});(e==null?void 0:e.status)===200&&m(o=>[...o,...e.data]),h(!1)};return d("div",{className:V.container,children:[d(O,{children:[n(O.Item,{children:"Reports"}),n(O.Item,{children:"Account Orders Details"})]}),n(mt,{setAccountOrderDetails:m,status:b,setSearchValue:a,sValue:l,setLoad:r,setDload:g,radio:f,setRadio:v,page1:S}),n(Tt,{setAccountOrderDetails:m,accountOrderDetails:u,status:b,page1:S,sortBy:c,sortColum:$,setSortingColum:j,setSortBy:H,loading:x,setLoad:r})]})};export{Se as default};
