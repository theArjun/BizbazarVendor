import{r as h,ao as j,a as K,aU as Q,j as a,b as o}from"./index.774ea3ea.js";import{j as H,k as z,a as U}from"./index.esm.4a6b1e11.js";import{h as V,i as X,j as J}from"./ProductApi.234be05e.js";import{T as d}from"./Table.41afa7f4.js";import{B as W}from"./button.1c6eda25.js";import{I as G}from"./index.b9ffa7ab.js";import{D as v,S as Y}from"./dropdown.adcd444c.js";import{M as Z}from"./index.d924cf53.js";import{T as s}from"./index.d2c69ca5.js";import"./apiConfig.2a32373e.js";import"./axios.0a901153.js";import"./config.54eb1656.js";import"./render.66f9535e.js";import"./useNotification.934e0e3b.js";import"./useMutation.esm.c151e619.js";import"./utils.esm.82fab7d4.js";import"./useInfiniteQuery.esm.23b2a444.js";import"./useQuery.esm.ae6f238b.js";import"./motion.300408ad.js";import"./isEqual.4659e5de.js";import"./useMergedState.18b5b371.js";import"./pickAttrs.087993c3.js";import"./styleChecker.bcd3295e.js";import"./index.40d7e5d1.js";import"./css.d6e3059f.js";import"./index.f4539c3d.js";import"./Overflow.bc908490.js";import"./statusUtils.d5af00d6.js";import"./CheckOutlined.70cf6153.js";import"./DownOutlined.719ce519.js";import"./LoadingOutlined.732e1375.js";import"./SearchOutlined.16cec939.js";import"./PurePanel.f27248d0.js";import"./Compact.c162d62d.js";import"./Pagination.43e6bda7.js";import"./LeftOutlined.de95bfb5.js";import"./RightOutlined.e389cfa8.js";import"./useForceUpdate.0ca03680.js";import"./responsiveObserve.84e4b503.js";import"./index.0d78aa55.js";import"./index.23d5fe28.js";import"./index.15a5cbb2.js";import"./index.4645b33d.js";import"./collapse.bedc836d.js";import"./index.39e4b2c8.js";import"./TextArea.119a5545.js";import"./EyeOutlined.700862bb.js";import"./index.26751f43.js";import"./index.5f886e53.js";import"./Dropdown.9bafc5f9.js";import"./useFlexGapSupport.f6cd5e9f.js";const $="_product_info_1tgvq_1",ee="_product_name_1tgvq_9",te="_icons_1tgvq_19",oe="_openDelete_1tgvq_51",re="_selectBar_1tgvq_57",c={product_info:$,product_name:ee,icons:te,openDelete:oe,selectBar:re},{confirm:ie}=Z,ot=({loading:S,handleScroll:l,setSortBy:k,products:b})=>{const[n,f]=h.exports.useState(""),[u,p]=h.exports.useState([]),{mutate:C,isLoading:x}=V(),{mutate:D,isLoading:I}=X(),{mutate:E,isLoading:N}=J(),m=j(),_=K(),A=Q();h.exports.useEffect(()=>{var t;return(t=document.querySelector("#product > div > div.ant-table-body"))==null||t.addEventListener("scroll",l),()=>{var e;(e=document.querySelector("#product > div > div.ant-table-body"))==null||e.removeEventListener("scroll",l)}},[l]);function L(t,e="",r){ie({title:t,content:e,async onOk(){try{C(r,{onSuccess:i=>{m.invalidateQueries(["products"])}})}catch{return console.log("Oops errors!")}},onCancel(){}})}const R=async t=>{let e={product_ids:{}};t==null||t.map((r,i)=>{e.product_ids[i]=r}),D(e,{onSuccess:r=>{m.invalidateQueries(["products"])}})},q=async(t,e)=>{f(t),window.localstorage.setItem("productRowId",JSON.stringify(t)),e==="detail"&&_("products")},g=(t,e)=>{E({id:t,status:e},{onSuccess:r=>{m.invalidateQueries(["products"])}})},y=t=>{switch(t){case"H":return o(s,{color:"purple",children:"Hidden"});case"A":return o(s,{color:"green",children:"Active"});case"D":return o(s,{color:"orange",children:"Disabled"});case"R":return o(s,{color:"red",children:"Requires Approval"});case"X":return o(s,{color:"magenta",children:"Disapproved"});default:return"Attention required"}},w=[{key:"1",label:o("div",{onClick:()=>g(n,"A"),children:"Active"})},{key:"2",label:o("div",{onClick:()=>g(n,"D"),children:"Disabled"})},{key:"3",label:o("div",{onClick:()=>g(n,"H"),children:"Hidden"})}],O=[{key:"1",label:a("a",{onClick:()=>_("../products/"+n),children:["Edit ",o(H,{})]})},{key:"2",label:a("a",{rel:"noopener noreferrer",href:"#",className:c.action_items,onClick:()=>L("Are you sure to delete?","",n),children:["Delete",o(z,{})]})}],P=[{title:"Name/Code",dataIndex:["product_id","product","product_code","main_pair"],data:"data",key:"product",render:(t,e)=>{var r;return a("div",{className:c.product_info,children:[o(G,{width:70,src:e.main_pair?e.main_pair.detailed.image_path:"",alt:""}),a("div",{className:c.product_name,children:[o("a",{onClick:()=>_("../products/"+(e==null?void 0:e.product_id)),children:o("strong",{children:((r=e.product)==null?void 0:r.length)>15?e.product.substring(0,15)+"...":e.product})}),o("small",{children:e.product_code})]})]})},sorter:(t,e)=>{}},{title:"Price",dataIndex:"price",key:"price",sorter:(t,e)=>{},render:t=>o("p",{children:parseFloat(t).toFixed(2)})},{title:"Quantity",dataIndex:"amount",key:"amount",sorter:(t,e)=>{}},{title:"Action",key:"action",dataIndex:["product_id"],render:t=>o("div",{className:c.product_action,onClick:()=>q(t),children:o(v,{menu:{items:O},placement:"bottom",arrow:!0,trigger:["click"],children:o(U,{size:20,className:c.icons})})})},{title:"Status",key:"status",dataIndex:["status","product_id"],defaultFilteredValue:"Requires Approval",render:(t,e)=>o("div",{children:e.status=="R"||e.status=="X"?y(e.status):o(v,{menu:{items:w},children:o(Y,{onMouseOver:()=>f(e.product_id),children:y(e.status)})})})}],T=t=>{p(t)},B=u.length>0,F={selectedRowKeys:u,onChange:T,selections:[d.SELECTION_ALL,d.SELECTION_INVERT,d.SELECTION_NONE,{key:"odd",text:"Select Odd Row",onSelect:t=>{let e=[];e=t.filter((r,i)=>i%2===0),p(e)}},{key:"even",text:"Select Even Row",onSelect:t=>{let e=[];e=t.filter((r,i)=>i%2!==0),p(e)}}]};function M(t,e,r,i){k(r)}return a("div",{children:[o("div",{style:{backgroundColor:"white",padding:"10px"},children:o(W,{type:"primary",onClick:()=>R(u),disabled:!B,children:"Delete"})}),o(d,{id:"product",rowKey:"product_id",loading:S||x||I||N,rowSelection:F,columns:P,dataSource:b,pagination:!1,onChange:M,scroll:{y:A.height>670?400:200,x:1e3}})]})};export{ot as default};
