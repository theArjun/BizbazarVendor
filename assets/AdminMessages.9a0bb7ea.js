import{a as L,r as d,u as F,ao as I,b as e,b0 as A,j as p}from"./index.0eae6df2.js";import{c as C,b as E}from"./MessageCenterApi.ecad0f65.js";import{F as m}from"./index.9a251b5a.js";import{B as u}from"./button.bb92e4e7.js";import{I as R}from"./index.e0155dc4.js";import{T as j}from"./index.c8b65be2.js";import"./apiConfig.422f7f8e.js";import"./axios.0a901153.js";import"./config.a608364a.js";import"./render.36f71972.js";import"./useNotification.b0fd12ef.js";import"./useInfiniteQuery.esm.39b60b71.js";import"./useQuery.esm.a226e4a2.js";import"./utils.esm.9d23a50b.js";import"./useMutation.esm.b9a3c183.js";import"./index.a53e5976.js";import"./motion.25de7d91.js";import"./isEqual.7557051f.js";import"./useMergedState.e128dcb1.js";import"./collapse.d7e28f1d.js";import"./LoadingOutlined.8c764613.js";import"./row.cc463873.js";import"./useFlexGapSupport.26f67e3e.js";import"./responsiveObserve.b22e885b.js";import"./Compact.394e1fff.js";import"./index.ae11ed19.js";import"./TextArea.79f23aac.js";import"./index.00b7436e.js";import"./statusUtils.bdd687b0.js";import"./EyeOutlined.e2533ce1.js";import"./SearchOutlined.83cc36da.js";import"./CheckOutlined.aebd02a2.js";import"./styleChecker.c2755425.js";const B="_nav_top_ni0tp_1",k="_main_content_ni0tp_13",q="_message_container_ni0tp_21",H="_chat_ni0tp_41",O="_write_message_box_ni0tp_53",Q="_send_box_ni0tp_67",U="_buttons_ni0tp_83",z="_client_message_ni0tp_99",G="_your_message_ni0tp_121",i={nav_top:B,main_content:k,message_container:q,chat:H,write_message_box:O,send_box:Q,buttons:U,client_message:z,your_message:G},{Text:J}=j,{user_id:P}=JSON.parse(localStorage.getItem("userinfo")),Me=()=>{var l,g;const h=L(),[r,y]=d.exports.useState([]),{id:c}=F(),{data:n,isLoading:b,error:s,isError:f}=C(c),{mutate:x,isLoading:v}=E(),[_]=m.useForm(),S=I();d.exports.useEffect(()=>{T()},[n]);const N=t=>{const o=new Date(parseInt(t)*1e3),a=o.toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"}),w=o.toLocaleString("en-US",{hour:"2-digit",minute:"numeric"});return a+", "+w},T=()=>{var t;n!=null&&n.data&&y((t=n==null?void 0:n.data)==null?void 0:t.messages)};d.exports.useEffect(()=>{let t=document.querySelector("#chat_container");(a=>{a.scroll({top:a.scrollHeight})})(t)},[r]);const M=t=>{if(t.message){_.resetFields();let o={communication_type:"vendor_to_admin",message:{thread_id:c,message:t.message}};x(o,{onSuccess:a=>{S.invalidateQueries(["admin_messages",c])}})}};return f?e(A,{status:(l=s==null?void 0:s.response)==null?void 0:l.status,title:(g=s==null?void 0:s.response)==null?void 0:g.status,subTitle:s==null?void 0:s.message,extra:e(u,{type:"primary",onClick:()=>h("/"),children:"Back Home"})}):e("div",{className:i.messages,children:e("div",{children:e("div",{className:i.main_content,children:p("div",{className:i.message_container,children:[e("div",{id:"chat_container",className:i.chat,children:b?e("div",{children:"Loading..."}):r==null?void 0:r.map((t,o)=>e("div",{children:p("div",{className:t.user_id===P?i.your_message:i.client_message,children:[e("div",{children:t.message}),e(J,{type:"secondary",children:N(t.timestamp)})]})},o))}),e("div",{className:i.write_message_box,children:e(m,{form:_,onFinish:M,layout:"vertical",name:"basic",wrapperCol:{},autoComplete:"off",initialValues:"",children:p("div",{className:i.send_box,children:[e(m.Item,{name:"message",style:{width:"100%"},children:e(R,{style:{fontSize:"16px",borderRadius:"20px"},placeholder:"Type a message..."})}),e(m.Item,{children:e(u,{loading:v,htmlType:"submit",type:"default",style:{borderRadius:"20px"},children:e("b",{children:" Send"})})})]})})})]})})})})};export{Me as default};
