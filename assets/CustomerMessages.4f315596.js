import{r as p,u as L,ao as k,a as F,b as e,b0 as R,j as n}from"./index.0eae6df2.js";import{a as A,b as B}from"./MessageCenterApi.ecad0f65.js";import{F as c}from"./index.9a251b5a.js";import{B as h}from"./button.bb92e4e7.js";import{I as H}from"./index.e0155dc4.js";import{I as j}from"./index.d5e41f1d.js";import{T as E}from"./index.c8b65be2.js";import"./apiConfig.422f7f8e.js";import"./axios.0a901153.js";import"./config.a608364a.js";import"./render.36f71972.js";import"./useNotification.b0fd12ef.js";import"./useInfiniteQuery.esm.39b60b71.js";import"./useQuery.esm.a226e4a2.js";import"./utils.esm.9d23a50b.js";import"./useMutation.esm.b9a3c183.js";import"./index.a53e5976.js";import"./motion.25de7d91.js";import"./isEqual.7557051f.js";import"./useMergedState.e128dcb1.js";import"./collapse.d7e28f1d.js";import"./LoadingOutlined.8c764613.js";import"./row.cc463873.js";import"./useFlexGapSupport.26f67e3e.js";import"./responsiveObserve.b22e885b.js";import"./Compact.394e1fff.js";import"./index.ae11ed19.js";import"./TextArea.79f23aac.js";import"./index.00b7436e.js";import"./statusUtils.bdd687b0.js";import"./EyeOutlined.e2533ce1.js";import"./SearchOutlined.83cc36da.js";import"./css.d6e3059f.js";import"./index.bbe2afa4.js";import"./pickAttrs.8c22c2db.js";import"./LeftOutlined.3acbf618.js";import"./RightOutlined.44374471.js";import"./CheckOutlined.aebd02a2.js";import"./styleChecker.c2755425.js";const P="_nav_top_1yasa_1",V="_main_content_1yasa_13",W="_message_container_1yasa_19",q="_chat_1yasa_39",D="_write_message_box_1yasa_51",K="_send_box_1yasa_65",O="_buttons_1yasa_81",Q="_client_message_1yasa_97",U="_your_message_1yasa_119",z="_product_container_1yasa_167",G="_image_container_1yasa_181",t={nav_top:P,main_content:V,message_container:W,chat:q,write_message_box:D,send_box:K,buttons:O,client_message:Q,your_message:U,product_container:z,image_container:G},{Text:J}=E,d=[{chat:[{id:"user",message:"Hello sir, how are you?"},{id:"user",message:"I am looking for a product in your store."},{id:"you",message:"Hi, I am fine"},{id:"you",message:"What are you looking for sir?"}],image:"https://www.digitaltrends.com/wp-content/uploads/2021/11/macbook-pro-2021-16.jpg",id:"Thread$3",message:"Is this product available at your store?",customer:"Avinash KC",date:"1672831913",price:"120000",p_name:"Winter Beanie Hat Scarf Set Warm Knit Hat Thick Fleece Lined Skull Cap for Men/Womenmj",desc:"Importer Details:Rashi Peripherals Pvt. Ltd. Rashi Complex,A Building, Survey186, Dongaripada, Poman Village, Vasai Bhiwandi Road, Dist. Thane,Maharastra 401208, India"}],{user_id:$}=JSON.parse(localStorage.getItem("userinfo")),je=()=>{var u,g;const[m,y]=p.exports.useState([]),{id:l}=L(),{data:o,isLoading:f,error:a,isError:v}=A(l),{mutate:b,isLoading:x}=B(),S=k(),[_]=c.useForm(),w=F();p.exports.useEffect(()=>{let s=document.querySelector("#chat_container");(r=>{r.scroll({top:r.scrollHeight})})(s)},[m]),p.exports.useEffect(()=>{I()},[o]);const I=()=>{var s;o!=null&&o.data&&y((s=o==null?void 0:o.data)==null?void 0:s.messages)},C=s=>{const i=new Date(parseInt(s)*1e3),r=i.toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"}),M=i.toLocaleString("en-US",{hour:"2-digit",minute:"numeric"});return r+", "+M},N=(s,i)=>{},T=s=>{if(s.message){_.resetFields();let i={communication_type:"vendor_to_admin",message:{thread_id:l,message:s.message}};b(i,{onSuccess:r=>{S.invalidateQueries(["customer_messages",l])}})}};return v?e(R,{status:(u=a==null?void 0:a.response)==null?void 0:u.status,title:(g=a==null?void 0:a.response)==null?void 0:g.status,subTitle:a==null?void 0:a.message,extra:e(h,{type:"primary",onClick:()=>w("/"),children:"Back Home"})}):e("div",{className:t.messages,children:e("div",{children:n("div",{className:t.main_content,children:[n("div",{className:t.message_container,children:[e("div",{id:"chat_container",className:t.chat,children:f?e("div",{children:"Loading..."}):m==null?void 0:m.map((s,i)=>e("div",{children:n("div",{className:s.user_id===$?t.your_message:t.client_message,children:[e("div",{children:s.message}),e(J,{type:"secondary",children:C(s.timestamp)})]})},i))}),e("div",{className:t.write_message_box,children:e(c,{form:_,onFinish:T,layout:"vertical",name:"basic",wrapperCol:{},autoComplete:"off",onValuesChange:N,initialValues:"",children:n("div",{className:t.send_box,children:[e(c.Item,{name:"message",style:{width:"100%"},children:e(H,{style:{fontSize:"16px",borderRadius:"20px"},placeholder:"Type a message..."})}),e(c.Item,{children:n(h,{loading:x,htmlType:"submit",type:"default",style:{borderRadius:"20px"},children:[" ",e("b",{children:" Send"})]})})]})})})]}),e("div",{className:t.product_container,children:n("div",{className:t.product_details,children:[e("h3",{children:"Product details"}),e("div",{className:t.image_container,children:e(j,{width:200,src:d[0].image,alt:""})}),e("p",{children:e("b",{children:d[0].p_name})}),e("p",{children:d[0].desc}),n("p",{children:[" \u0930\u0941",d[0].price]})]})})]})})})};export{je as default};
