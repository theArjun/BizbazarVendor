import{r as p,u as L,ao as k,a as F,b as e,b0 as R,j as n}from"./index.559c1fcf.js";import{a as A,b as B}from"./MessageCenterApi.be615e63.js";import{F as c}from"./index.d3e6f2d0.js";import{B as h}from"./button.c49f6243.js";import{I as H}from"./index.99653d62.js";import{I as j}from"./index.53d3f337.js";import{T as E}from"./index.978e37f6.js";import"./apiConfig.819e96ae.js";import"./axios.0a901153.js";import"./config.d6ac9ea8.js";import"./render.6e9f9fbc.js";import"./useNotification.530e6546.js";import"./useInfiniteQuery.esm.273cbf80.js";import"./useQuery.esm.484a4dde.js";import"./utils.esm.f9fc2da8.js";import"./useMutation.esm.3622c9ad.js";import"./index.02299b94.js";import"./motion.c94e2116.js";import"./isEqual.5b0c1f76.js";import"./useMergedState.e59004d6.js";import"./collapse.4ef0eee8.js";import"./LoadingOutlined.65af6f9d.js";import"./row.1adc50e8.js";import"./useFlexGapSupport.39a8fd32.js";import"./responsiveObserve.0df24820.js";import"./Compact.e0a86bbb.js";import"./index.e42cc673.js";import"./TextArea.8f7e52a8.js";import"./index.800256bd.js";import"./statusUtils.8e955008.js";import"./EyeOutlined.acaf92f0.js";import"./SearchOutlined.1243ca95.js";import"./css.d6e3059f.js";import"./index.38297928.js";import"./pickAttrs.09e8e693.js";import"./LeftOutlined.abb276d5.js";import"./RightOutlined.6508ce6f.js";import"./CheckOutlined.61030fcd.js";import"./styleChecker.3de124d5.js";const P="_nav_top_1yasa_1",V="_main_content_1yasa_13",W="_message_container_1yasa_19",q="_chat_1yasa_39",D="_write_message_box_1yasa_51",K="_send_box_1yasa_65",O="_buttons_1yasa_81",Q="_client_message_1yasa_97",U="_your_message_1yasa_119",z="_product_container_1yasa_167",G="_image_container_1yasa_181",t={nav_top:P,main_content:V,message_container:W,chat:q,write_message_box:D,send_box:K,buttons:O,client_message:Q,your_message:U,product_container:z,image_container:G},{Text:J}=E,d=[{chat:[{id:"user",message:"Hello sir, how are you?"},{id:"user",message:"I am looking for a product in your store."},{id:"you",message:"Hi, I am fine"},{id:"you",message:"What are you looking for sir?"}],image:"https://www.digitaltrends.com/wp-content/uploads/2021/11/macbook-pro-2021-16.jpg",id:"Thread$3",message:"Is this product available at your store?",customer:"Avinash KC",date:"1672831913",price:"120000",p_name:"Winter Beanie Hat Scarf Set Warm Knit Hat Thick Fleece Lined Skull Cap for Men/Womenmj",desc:"Importer Details:Rashi Peripherals Pvt. Ltd. Rashi Complex,A Building, Survey186, Dongaripada, Poman Village, Vasai Bhiwandi Road, Dist. Thane,Maharastra 401208, India"}],{user_id:$}=JSON.parse(localStorage.getItem("userinfo")),je=()=>{var u,g;const[m,y]=p.exports.useState([]),{id:l}=L(),{data:o,isLoading:f,error:a,isError:v}=A(l),{mutate:b,isLoading:x}=B(),S=k(),[_]=c.useForm(),w=F();p.exports.useEffect(()=>{let s=document.querySelector("#chat_container");(r=>{r.scroll({top:r.scrollHeight})})(s)},[m]),p.exports.useEffect(()=>{I()},[o]);const I=()=>{var s;o!=null&&o.data&&y((s=o==null?void 0:o.data)==null?void 0:s.messages)},C=s=>{const i=new Date(parseInt(s)*1e3),r=i.toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"}),M=i.toLocaleString("en-US",{hour:"2-digit",minute:"numeric"});return r+", "+M},N=(s,i)=>{},T=s=>{if(s.message){_.resetFields();let i={communication_type:"vendor_to_admin",message:{thread_id:l,message:s.message}};b(i,{onSuccess:r=>{S.invalidateQueries(["customer_messages",l])}})}};return v?e(R,{status:(u=a==null?void 0:a.response)==null?void 0:u.status,title:(g=a==null?void 0:a.response)==null?void 0:g.status,subTitle:a==null?void 0:a.message,extra:e(h,{type:"primary",onClick:()=>w("/"),children:"Back Home"})}):e("div",{className:t.messages,children:e("div",{children:n("div",{className:t.main_content,children:[n("div",{className:t.message_container,children:[e("div",{id:"chat_container",className:t.chat,children:f?e("div",{children:"Loading..."}):m==null?void 0:m.map((s,i)=>e("div",{children:n("div",{className:s.user_id===$?t.your_message:t.client_message,children:[e("div",{children:s.message}),e(J,{type:"secondary",children:C(s.timestamp)})]})},i))}),e("div",{className:t.write_message_box,children:e(c,{form:_,onFinish:T,layout:"vertical",name:"basic",wrapperCol:{},autoComplete:"off",onValuesChange:N,initialValues:"",children:n("div",{className:t.send_box,children:[e(c.Item,{name:"message",style:{width:"100%"},children:e(H,{style:{fontSize:"16px",borderRadius:"20px"},placeholder:"Type a message..."})}),e(c.Item,{children:n(h,{loading:x,htmlType:"submit",type:"default",style:{borderRadius:"20px"},children:[" ",e("b",{children:" Send"})]})})]})})})]}),e("div",{className:t.product_container,children:n("div",{className:t.product_details,children:[e("h3",{children:"Product details"}),e("div",{className:t.image_container,children:e(j,{width:200,src:d[0].image,alt:""})}),e("p",{children:e("b",{children:d[0].p_name})}),e("p",{children:d[0].desc}),n("p",{children:[" \u0930\u0941",d[0].price]})]})})]})})})};export{je as default};
