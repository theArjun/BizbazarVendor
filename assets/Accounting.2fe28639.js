import{j as i,b as o,r as c,v as j,bq as D}from"./index.559c1fcf.js";import{T as O,v as V,W as H,w as Y}from"./index.cfd97402.js";import{T as $}from"./TextArea.8f7e52a8.js";import{a as w}from"./apicall.a45120ef.js";import{F as u}from"./index.d3e6f2d0.js";import{B as z}from"./Breadcrumb.a0c48c79.js";import{M as E}from"./index.e5e0e49c.js";import{I as G}from"./index.99653d62.js";import{B as J}from"./button.c49f6243.js";import"./index.800256bd.js";import"./useMergedState.e59004d6.js";import"./statusUtils.8e955008.js";import"./Compact.e0a86bbb.js";import"./index.e42cc673.js";import"./axios.0a901153.js";import"./config.d6ac9ea8.js";import"./render.6e9f9fbc.js";import"./useNotification.530e6546.js";import"./index.02299b94.js";import"./motion.c94e2116.js";import"./isEqual.5b0c1f76.js";import"./collapse.4ef0eee8.js";import"./LoadingOutlined.65af6f9d.js";import"./row.1adc50e8.js";import"./useFlexGapSupport.39a8fd32.js";import"./responsiveObserve.0df24820.js";import"./dropdown.496de808.js";import"./RightOutlined.6508ce6f.js";import"./Dropdown.40e49efe.js";import"./Overflow.0ae650b7.js";import"./PurePanel.4b452415.js";import"./DownOutlined.218b67e6.js";import"./index.38297928.js";import"./pickAttrs.09e8e693.js";import"./EyeOutlined.acaf92f0.js";import"./SearchOutlined.1243ca95.js";const L="_container_qzg0f_1",K="_tabContainer_qzg0f_25",Q="_left_qzg0f_37",R="_new_add_btn_qzg0f_47",X="_bgColor_qzg0f_79",Z="_button_qzg0f_97",m={container:L,tabContainer:K,left:Q,new_add_btn:R,bgColor:X,button:Z},v=({data:n,status:l,getAccountingInformation:p,loading:d})=>{const f=()=>n?n.reduce((a,e)=>a+parseFloat(e==null?void 0:e.payout_amount),0):"",_=()=>n?n.reduce((a,e)=>a+parseFloat(e!=null&&e.shipping_cost?e.shipping_cost:0),0):"",s=()=>n?n.reduce((a,e)=>a+parseFloat(e!=null&&e.voucher_cost?e.voucher_cost:0),0):"",h=()=>n?n.reduce((a,e)=>a+parseFloat(e!=null&&e.gift_certificate_cost?e.gift_certificate_cost:0),0):"",g=()=>f()-_()-s();return i("div",{children:[o(O,{getAccountingInformation:p,getTotalTransaction:f,getTotalShipping:_,getTotalVoucher:s,getTotalGift:h,getNetIncome:g}),o(V,{data:n||"",status:l,loading:d,getTotalTransaction:f,getTotalShipping:_,getTotalVoucher:s,getTotalGift:h,getNetIncome:g})]})},tt=({data:n,status:l,loading:p,getWithdrawInformation:d})=>i("div",{children:[o(H,{getWithdrawInformation:d}),o(Y,{data:n||"",status:l,loading:p})]}),jt=()=>{const n=["Transactions","Balance withdrawals"],[l,p]=c.exports.useState("Transactions"),[d,f]=c.exports.useState(""),[_,s]=c.exports.useState(!1),[h,g]=c.exports.useState([]),[a,e]=c.exports.useState(!1),[F,B]=c.exports.useState("");let y=JSON.parse(localStorage.getItem("userinfo"));c.exports.useEffect(()=>{T(),x(),S()},[]);const I=t=>{let r=`BizbazarAccounting/${y.id}?is_search=Y`;return t!=null&&t.types&&(r=r+"&payout_type="+t.types),t!=null&&t.status&&(r=r+"&approval_status="+t.status),(t==null?void 0:t.start_date)&&(t==null?void 0:t.end_date)&&(r=r+"&time_from="+t.start_date+"&time_to="+t.end_date),r},N=t=>{let r=`BizbazarAccounting/${y.id}?is_search=Y&selected_section=withdrawals`;return t!=null&&t.status&&(r=r+"&approval_status="+t.status),(t==null?void 0:t.start_date)&&(t==null?void 0:t.end_date)&&(r=r+"&time_from="+t.start_date+"&time_to="+t.end_date),r},S=async()=>{const t=await w({url:"statuses"});g(t.data.statuses)},T=async t=>{e(!0);let r=await w({url:I(t)});r.data&&(f(r.data.map((b,C)=>({...b,key:C}))),e(!1)),e(!1)},x=async t=>{e(!0);let r=await w({url:N(t)});if(r.data){let b=r.data.map((C,U)=>({...C,key:U}));B(b),e(!1)}e(!1)},q=()=>{s(!0)},[k]=u.useForm(),A=async t=>{let r={payment:{amount:t.amount,comments:t.comments,vendor:y.id}};(await w({url:"BizbazarAccounting",method:"post",data:r})).status==201&&(s(!1),T(),x(),S())},W=t=>{console.log("Failed:",t)},P=()=>{s(!1)},M=()=>{switch(l){case"Balance withdrawals":return o(tt,{data:F,status:h,loading:a,getWithdrawInformation:x});default:return o(v,{data:d,status:h,getAccountingInformation:T,loading:a})}};return o("div",{className:m.container,children:i("div",{className:"breadcrumb",children:[i(z,{children:[o(z.Item,{children:"Home"}),o(z.Item,{children:o("a",{href:"",children:"Accounting"})})]}),i("div",{className:m.tabContainer,children:[o("div",{className:m.left,children:n.map((t,r)=>o("div",{className:j(m.button,l===t?m.bgColor:null),onClick:()=>p(t),children:t},r))}),i("div",{children:[o("div",{onClick:q,className:m.new_add_btn,children:o(D,{size:25})}),i(E,{title:"New withdrawal",open:_,onOk:A,onCancel:P,okText:"Create",cancelText:"Cancel",okButtonProps:{style:{display:"none"}},cancelButtonProps:{style:{display:"none"}},children:[o("hr",{}),i("p",{children:[o("strong",{children:"Vendor:"})," \xA0\xA0 \xA0",o("span",{children:"Vendor Acc1"})]}),i(u,{form:k,className:m.form,name:"",onFinish:A,onFinishFailed:W,autoComplete:"off",children:[o(u.Item,{label:"Payment amount",name:"amount",rules:[{required:!0,message:"Please enter payment amount."}],children:o(G,{type:"number"})}),o(u.Item,{label:"Comments",name:"comments",children:o($,{rows:8})}),o(u.Item,{label:"",name:"submit",children:o(J,{type:"primary",htmlType:"submit",style:{float:"right"},children:"Create"})})]})]})]})]}),M()]})})};export{jt as default};
