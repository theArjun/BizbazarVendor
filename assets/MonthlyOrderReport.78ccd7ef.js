import{r as u,j as f,b as m}from"./index.2fea9b70.js";import{M as I,a as L}from"./index.b4aaa82a.js";import{u as G}from"./ReportsApi.f602d7ab.js";import{A as N}from"./apiConfig.eaaa62ce.js";import{u as P}from"./useQuery.esm.8aa31306.js";import{u as v}from"./useDebounce.857d1c38.js";import{B as c}from"./Breadcrumb.37de7763.js";import"./apicall.7005afb3.js";import"./axios.0a901153.js";import"./config.42e56451.js";import"./render.a8adff37.js";import"./useNotification.7663c963.js";import"./apicall2.997ebd5b.js";import"./useInfiniteQuery.esm.f9f05d77.js";import"./utils.esm.061cfd12.js";import"./dropdown.0343149c.js";import"./RightOutlined.19164f95.js";import"./Dropdown.1d3385b2.js";import"./useMergedState.acd959e8.js";import"./Overflow.1e0ec03a.js";import"./index.f5b4f9b0.js";import"./motion.cd9ea6a7.js";import"./isEqual.cc883666.js";import"./PurePanel.7897ccec.js";import"./index.de03715e.js";import"./collapse.3b35c5c9.js";import"./button.8d7ffa1a.js";import"./Compact.c7a1bef5.js";import"./LoadingOutlined.3aeec88a.js";import"./useFlexGapSupport.a59bf389.js";import"./DownOutlined.653e5bd2.js";const B="_container_122jv_1",T={container:B},q=()=>P({queryKey:["statuses"],queryFn:()=>N.get("statuses")}),F={order_id:"",status_id:"",user_type:"",usergroup_id:"",time_from:"",time_to:""},ht=()=>{const[d,h]=u.exports.useState(F),[g,y]=u.exports.useState(!1),{data:o,isLoading:_,isFetchingNextPage:x,fetchNextPage:b}=G(d),{data:p,isLoading:H}=q(),M=t=>{const e=t.target.scrollTop+t.target.offsetHeight+100>t.target.scrollHeight;y(e)};let j=u.exports.useMemo(()=>{var e;let t=[];return(e=o==null?void 0:o.pages)==null||e.map(s=>{var a,i;(i=Object.values((a=s==null?void 0:s.data)==null?void 0:a.report))==null||i.map(r=>{var n;(n=Object.entries(r))==null||n.map((S,K)=>{S.map((O,A)=>{A===1&&t.push(O)})})})}),t||[]},[o]);const l=()=>{var t;return p?(t=p==null?void 0:p.data)==null?void 0:t.statuses:[]},R=()=>{var e,s,a,i;let t=((a=(s=(e=o==null?void 0:o.pages)==null?void 0:e.at(-1))==null?void 0:s.data)==null?void 0:a.usergroups)||{};return(i=Object.values(t))==null?void 0:i.map((r,n)=>({label:r==null?void 0:r.usergroup,value:r==null?void 0:r.usergroup_id}))};return v(()=>{!g||b()},300,[g]),f("div",{className:T.container,children:[f(c,{children:[m(c.Item,{children:"Reports"}),m(c.Item,{children:"Monthly order reports"})]}),m(I,{status:l(),userGroup:R(),params:d,setParams:h}),m(L,{handleScroll:M,data:j,loading:_||x,status:l()})]})};export{ht as default};
