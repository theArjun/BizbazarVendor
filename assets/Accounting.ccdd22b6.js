import{j as i,b as o,r as c,v as j,bq as D}from"./index.4f23c09f.js";import{T as O,v as V,W as H,w as Y}from"./index.1a6fc416.js";import{T as $}from"./TextArea.5556322f.js";import{a as w}from"./apicall.3416e5db.js";import{F as u}from"./index.87e32118.js";import{B as z}from"./Breadcrumb.1fc5972d.js";import{M as E}from"./index.2716beec.js";import{I as G}from"./index.334a4467.js";import{B as J}from"./button.0e0bb488.js";import"./index.04eab99a.js";import"./useMergedState.a9c803d6.js";import"./statusUtils.c3240a4a.js";import"./Compact.8d51645f.js";import"./index.2687a7e4.js";import"./axios.0a901153.js";import"./config.93562c2e.js";import"./render.a21f8e67.js";import"./useNotification.ddc3cd5c.js";import"./index.7a8128c4.js";import"./motion.9212238f.js";import"./isEqual.5405dd52.js";import"./collapse.7fea9198.js";import"./LoadingOutlined.ad18cc7b.js";import"./row.dbcb11e5.js";import"./useFlexGapSupport.3166aa6c.js";import"./responsiveObserve.16c01648.js";import"./dropdown.c5450427.js";import"./RightOutlined.dab7e2a3.js";import"./Dropdown.af716b86.js";import"./Overflow.1804b708.js";import"./PurePanel.01378a58.js";import"./DownOutlined.72f23fd5.js";import"./index.ba3281eb.js";import"./pickAttrs.08767335.js";import"./EyeOutlined.ac35e31d.js";import"./SearchOutlined.19f92cba.js";const L="_container_qzg0f_1",K="_tabContainer_qzg0f_25",Q="_left_qzg0f_37",R="_new_add_btn_qzg0f_47",X="_bgColor_qzg0f_79",Z="_button_qzg0f_97",m={container:L,tabContainer:K,left:Q,new_add_btn:R,bgColor:X,button:Z},v=({data:n,status:l,getAccountingInformation:p,loading:d})=>{const f=()=>n?n.reduce((a,e)=>a+parseFloat(e==null?void 0:e.payout_amount),0):"",_=()=>n?n.reduce((a,e)=>a+parseFloat(e!=null&&e.shipping_cost?e.shipping_cost:0),0):"",s=()=>n?n.reduce((a,e)=>a+parseFloat(e!=null&&e.voucher_cost?e.voucher_cost:0),0):"",h=()=>n?n.reduce((a,e)=>a+parseFloat(e!=null&&e.gift_certificate_cost?e.gift_certificate_cost:0),0):"",g=()=>f()-_()-s();return i("div",{children:[o(O,{getAccountingInformation:p,getTotalTransaction:f,getTotalShipping:_,getTotalVoucher:s,getTotalGift:h,getNetIncome:g}),o(V,{data:n||"",status:l,loading:d,getTotalTransaction:f,getTotalShipping:_,getTotalVoucher:s,getTotalGift:h,getNetIncome:g})]})},tt=({data:n,status:l,loading:p,getWithdrawInformation:d})=>i("div",{children:[o(H,{getWithdrawInformation:d}),o(Y,{data:n||"",status:l,loading:p})]}),jt=()=>{const n=["Transactions","Balance withdrawals"],[l,p]=c.exports.useState("Transactions"),[d,f]=c.exports.useState(""),[_,s]=c.exports.useState(!1),[h,g]=c.exports.useState([]),[a,e]=c.exports.useState(!1),[F,B]=c.exports.useState("");let y=JSON.parse(localStorage.getItem("userinfo"));c.exports.useEffect(()=>{T(),x(),S()},[]);const I=t=>{let r=`BizbazarAccounting/${y.id}?is_search=Y`;return t!=null&&t.types&&(r=r+"&payout_type="+t.types),t!=null&&t.status&&(r=r+"&approval_status="+t.status),(t==null?void 0:t.start_date)&&(t==null?void 0:t.end_date)&&(r=r+"&time_from="+t.start_date+"&time_to="+t.end_date),r},N=t=>{let r=`BizbazarAccounting/${y.id}?is_search=Y&selected_section=withdrawals`;return t!=null&&t.status&&(r=r+"&approval_status="+t.status),(t==null?void 0:t.start_date)&&(t==null?void 0:t.end_date)&&(r=r+"&time_from="+t.start_date+"&time_to="+t.end_date),r},S=async()=>{const t=await w({url:"statuses"});g(t.data.statuses)},T=async t=>{e(!0);let r=await w({url:I(t)});r.data&&(f(r.data.map((b,C)=>({...b,key:C}))),e(!1)),e(!1)},x=async t=>{e(!0);let r=await w({url:N(t)});if(r.data){let b=r.data.map((C,U)=>({...C,key:U}));B(b),e(!1)}e(!1)},q=()=>{s(!0)},[k]=u.useForm(),A=async t=>{let r={payment:{amount:t.amount,comments:t.comments,vendor:y.id}};(await w({url:"BizbazarAccounting",method:"post",data:r})).status==201&&(s(!1),T(),x(),S())},W=t=>{console.log("Failed:",t)},P=()=>{s(!1)},M=()=>{switch(l){case"Balance withdrawals":return o(tt,{data:F,status:h,loading:a,getWithdrawInformation:x});default:return o(v,{data:d,status:h,getAccountingInformation:T,loading:a})}};return o("div",{className:m.container,children:i("div",{className:"breadcrumb",children:[i(z,{children:[o(z.Item,{children:"Home"}),o(z.Item,{children:o("a",{href:"",children:"Accounting"})})]}),i("div",{className:m.tabContainer,children:[o("div",{className:m.left,children:n.map((t,r)=>o("div",{className:j(m.button,l===t?m.bgColor:null),onClick:()=>p(t),children:t},r))}),i("div",{children:[o("div",{onClick:q,className:m.new_add_btn,children:o(D,{size:25})}),i(E,{title:"New withdrawal",open:_,onOk:A,onCancel:P,okText:"Create",cancelText:"Cancel",okButtonProps:{style:{display:"none"}},cancelButtonProps:{style:{display:"none"}},children:[o("hr",{}),i("p",{children:[o("strong",{children:"Vendor:"})," \xA0\xA0 \xA0",o("span",{children:"Vendor Acc1"})]}),i(u,{form:k,className:m.form,name:"",onFinish:A,onFinishFailed:W,autoComplete:"off",children:[o(u.Item,{label:"Payment amount",name:"amount",rules:[{required:!0,message:"Please enter payment amount."}],children:o(G,{type:"number"})}),o(u.Item,{label:"Comments",name:"comments",children:o($,{rows:8})}),o(u.Item,{label:"",name:"submit",children:o(J,{type:"primary",htmlType:"submit",style:{float:"right"},children:"Create"})})]})]})]})]}),M()]})})};export{jt as default};
