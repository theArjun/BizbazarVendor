import{a as L,r as d,u as F,ao as I,b as e,b0 as A,j as p}from"./index.b239cc55.js";import{c as C,b as E}from"./MessageCenterApi.b319308f.js";import{F as m}from"./index.02861738.js";import{B as u}from"./button.1e90f6e6.js";import{I as R}from"./index.4af21018.js";import{T as j}from"./index.86e696da.js";import"./apiConfig.446075fe.js";import"./axios.0a901153.js";import"./config.79883511.js";import"./render.1622182d.js";import"./useNotification.49a3f20c.js";import"./useInfiniteQuery.esm.0432f70d.js";import"./useQuery.esm.3c1c4f21.js";import"./utils.esm.408cb86b.js";import"./useMutation.esm.61ea1354.js";import"./index.4bbb7811.js";import"./motion.0d7a897e.js";import"./isEqual.21fc3aef.js";import"./useMergedState.a28f7e87.js";import"./collapse.4a0a3d30.js";import"./LoadingOutlined.97101298.js";import"./row.7108879f.js";import"./useFlexGapSupport.1cb3c05a.js";import"./responsiveObserve.99027935.js";import"./Compact.d9f155a2.js";import"./index.2d340b5d.js";import"./TextArea.6c3ac8fe.js";import"./index.282ea7d3.js";import"./statusUtils.ab472cb9.js";import"./EyeOutlined.a43f77a8.js";import"./SearchOutlined.8331e38c.js";import"./CheckOutlined.bf68ea45.js";import"./styleChecker.98fd75c2.js";const B="_nav_top_ni0tp_1",k="_main_content_ni0tp_13",q="_message_container_ni0tp_21",H="_chat_ni0tp_41",O="_write_message_box_ni0tp_53",Q="_send_box_ni0tp_67",U="_buttons_ni0tp_83",z="_client_message_ni0tp_99",G="_your_message_ni0tp_121",i={nav_top:B,main_content:k,message_container:q,chat:H,write_message_box:O,send_box:Q,buttons:U,client_message:z,your_message:G},{Text:J}=j,{user_id:P}=JSON.parse(localStorage.getItem("userinfo")),Me=()=>{var l,g;const h=L(),[r,y]=d.exports.useState([]),{id:c}=F(),{data:n,isLoading:b,error:s,isError:f}=C(c),{mutate:x,isLoading:v}=E(),[_]=m.useForm(),S=I();d.exports.useEffect(()=>{T()},[n]);const N=t=>{const o=new Date(parseInt(t)*1e3),a=o.toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"}),w=o.toLocaleString("en-US",{hour:"2-digit",minute:"numeric"});return a+", "+w},T=()=>{var t;n!=null&&n.data&&y((t=n==null?void 0:n.data)==null?void 0:t.messages)};d.exports.useEffect(()=>{let t=document.querySelector("#chat_container");(a=>{a.scroll({top:a.scrollHeight})})(t)},[r]);const M=t=>{if(t.message){_.resetFields();let o={communication_type:"vendor_to_admin",message:{thread_id:c,message:t.message}};x(o,{onSuccess:a=>{S.invalidateQueries(["admin_messages",c])}})}};return f?e(A,{status:(l=s==null?void 0:s.response)==null?void 0:l.status,title:(g=s==null?void 0:s.response)==null?void 0:g.status,subTitle:s==null?void 0:s.message,extra:e(u,{type:"primary",onClick:()=>h("/"),children:"Back Home"})}):e("div",{className:i.messages,children:e("div",{children:e("div",{className:i.main_content,children:p("div",{className:i.message_container,children:[e("div",{id:"chat_container",className:i.chat,children:b?e("div",{children:"Loading..."}):r==null?void 0:r.map((t,o)=>e("div",{children:p("div",{className:t.user_id===P?i.your_message:i.client_message,children:[e("div",{children:t.message}),e(J,{type:"secondary",children:N(t.timestamp)})]})},o))}),e("div",{className:i.write_message_box,children:e(m,{form:_,onFinish:M,layout:"vertical",name:"basic",wrapperCol:{},autoComplete:"off",initialValues:"",children:p("div",{className:i.send_box,children:[e(m.Item,{name:"message",style:{width:"100%"},children:e(R,{style:{fontSize:"16px",borderRadius:"20px"},placeholder:"Type a message..."})}),e(m.Item,{children:e(u,{loading:v,htmlType:"submit",type:"default",style:{borderRadius:"20px"},children:e("b",{children:" Send"})})})]})})})]})})})})};export{Me as default};
